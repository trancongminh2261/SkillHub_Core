(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405,391],{48312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(21364)}])},79930:function(e,t,s){"use strict";s.d(t,{X:function(){return n}});var a=s(59178);let n={uploadImage(e){let t=new FormData;return t.append("file",e),a.e.post("".concat("/api/Base","/Upload"),t,{})}}},82373:function(e,t,s){"use strict";var a=s(85893),n=s(67294),l=s(63237);t.Z=e=>{let{uri:t,className:s,disabled:c,isThumbnail:i,alt:r,resizedImage:o}=e,[d,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1);function h(){!c&&(d||t)&&x(!m)}let p=i?"/default-thumbnail.png":"/default-avatar.png";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{onClick:h,onError:()=>u(p),alt:"avatar",src:d||o||t||p,className:s,style:{cursor:d||t?"pointer":"default",borderStyle:t?"solid":"none"}}),(0,a.jsx)(l.Z,{closable:!1,title:null,width:700,open:m,onCancel:h,footer:null,children:(0,a.jsx)("img",{onError:()=>u(p),alt:r||"avatar",src:d||t||p,style:{width:"100%",maxHeight:"70vh",objectFit:"cover"}})})]})}},31936:function(e,t,s){"use strict";var a=s(85893),n=s(69361);s(67294);class l{constructor(){this.White=()=>(0,a.jsx)(n.Z,{className:"loading-white"}),this.Black=()=>(0,a.jsx)(n.Z,{className:"loading-black"}),this.Blue=()=>(0,a.jsx)(n.Z,{className:"loading-blue"})}}let c=new l;t.Z=c},58759:function(e,t,s){"use strict";var a=s(85893);s(67294),t.Z=e=>{let{id:t,children:s,content:n,className:l}=e;return(0,a.jsx)("a",{className:l||"","data-tooltip-id":"primary-tooltip","data-tooltip-content":n,children:s},t)}},28719:function(e,t,s){"use strict";s.d(t,{e:function(){return d}});var a=s(78551),n=s(9473),l=s(58416),c=s(25773),i=s(62811),r=s(42006);let o=async(e,t)=>{if((0,r.is)(t).student||(0,r.is)(t).parent)return[];try{let t=await c.Z.getAll({pageSize:9999});if(200==t.status)return e((0,i.t)(t.data.data)),t.data.data}catch(e){return(0,l.fr)("error",e.message),[]}};function d(){var e;let t=(0,n.I0)(),s=(0,n.v9)(e=>{var t;return null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.information}),l=(0,a.a)({queryKey:["USE_BRANCH"],queryFn:()=>o(t,s),enabled:!0});return{...l,branches:(null==l?void 0:l.data)||[],selectBranches:(e=l.data)?e.map(e=>({value:null==e?void 0:e.Id,title:null==e?void 0:e.Name})):[]}}},36054:function(e,t,s){"use strict";s.d(t,{Fn:function(){return a.Fn},Py:function(){return a.Py},S_:function(){return a.S_},UM:function(){return a.UM},Vq:function(){return a.Vq},X7:function(){return a.X7},Zn:function(){return n.Z},fU:function(){return a.fU}});var a=s(37379),n=s(26674)},37379:function(e,t,s){"use strict";s.d(t,{Vq:function(){return g},fU:function(){return F},Fn:function(){return v},X7:function(){return p},S_:function(){return Y},Py:function(){return z},UM:function(){return M}});var a=s(85893),n=s(67294),l=s(17331),c=s.n(l),i=s(78773),r=s(92594),o=s(85340),d=s(18644),u=s(92088),m=s(74931),x=s(48506),h=s(43291);let p=e=>{let{size:t,color:s}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:t+"px",height:t+"px",x:"0",y:"0",viewBox:"0 0 469.341 469.341",children:(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:"M437.337 384.007H362.67c-47.052 0-85.333-38.281-85.333-85.333s38.281-85.333 85.333-85.333h74.667a10.66 10.66 0 0 0 10.667-10.667v-32c0-22.368-17.35-40.559-39.271-42.323l-61.26-107c-5.677-9.896-14.844-16.969-25.813-19.906-10.917-2.917-22.333-1.385-32.104 4.302L79.553 128.007H42.67c-23.531 0-42.667 19.135-42.667 42.667v256c0 23.531 19.135 42.667 42.667 42.667h362.667c23.531 0 42.667-19.135 42.667-42.667v-32a10.66 10.66 0 0 0-10.667-10.667zM360.702 87.411l23.242 40.596h-92.971l69.729-40.596zm-238.749 40.596L300.295 24.184c4.823-2.823 10.458-3.573 15.844-2.135 5.448 1.458 9.99 4.979 12.813 9.906l.022.039-164.91 96.013h-42.111z",fill:s,opacity:"1","data-original":"#000000"}),(0,a.jsx)("path",{d:"M437.337 234.674H362.67c-35.292 0-64 28.708-64 64s28.708 64 64 64h74.667c17.646 0 32-14.354 32-32v-64c0-17.646-14.354-32-32-32zm-74.667 85.333c-11.76 0-21.333-9.573-21.333-21.333 0-11.76 9.573-21.333 21.333-21.333 11.76 0 21.333 9.573 21.333 21.333.001 11.76-9.572 21.333-21.333 21.333z",fill:s,opacity:"1","data-original":"#000000"})]})})},v=e=>{let{size:t,color:s}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:t+"px",height:t+"px",x:"0",y:"0",viewBox:"0 0 32 32",children:(0,a.jsx)("g",{children:(0,a.jsxs)("g",{"data-name":"Layer 2",children:[(0,a.jsx)("path",{d:"M21.75 20.32v1.76a.917.917 0 0 1 0-1.76ZM23.25 23.92a.917.917 0 0 1 0 1.76Z",fill:s,opacity:"1","data-original":"#000000"}),(0,a.jsx)("path",{d:"m25.95 18.63 1.93-4.25a.753.753 0 0 0-.19-.88.768.768 0 0 0-.89-.07 2.657 2.657 0 0 1-1.17.38c-.15 0-.18-.02-.35-.14a1.876 1.876 0 0 0-1.22-.42 1.922 1.922 0 0 0-1.22.42c-.16.12-.19.14-.34.14a.456.456 0 0 1-.35-.14 1.982 1.982 0 0 0-2.44 0c-.16.12-.19.14-.34.14a2.58 2.58 0 0 1-1.17-.38.768.768 0 0 0-.89.07.753.753 0 0 0-.19.88l1.93 4.25a8.503 8.503 0 0 0-3.71 6.12 6.656 6.656 0 0 0 1.01 3.77 2.357 2.357 0 0 0 2.08 1.23h8.14a2.357 2.357 0 0 0 2.08-1.23 6.658 6.658 0 0 0 1.01-3.77 8.504 8.504 0 0 0-3.71-6.12Zm-.54 6.17a2.624 2.624 0 0 1-2.16 2.45v.25a.75.75 0 0 1-1.5 0v-.25a2.624 2.624 0 0 1-2.16-2.45.75.75 0 0 1 1.5 0 1.036 1.036 0 0 0 .66.88v-2.03a2.624 2.624 0 0 1-2.16-2.45 2.624 2.624 0 0 1 2.16-2.45v-.25a.75.75 0 0 1 1.5 0v.25a2.624 2.624 0 0 1 2.16 2.45.75.75 0 0 1-1.5 0 1.036 1.036 0 0 0-.66-.88v2.03a2.624 2.624 0 0 1 2.16 2.45ZM15.81 29.5H7a2.006 2.006 0 0 1-2-2 2.015 2.015 0 0 1 2-2h7.34a8.302 8.302 0 0 0 1.13 3.49 3.477 3.477 0 0 0 .34.51ZM15.83 20.5a8.708 8.708 0 0 0-1.47 4H6a2.006 2.006 0 0 1-2-2 2.015 2.015 0 0 1 2-2Z",fill:s,opacity:"1","data-original":"#000000"}),(0,a.jsx)("path",{d:"M17.81 18.32a10.912 10.912 0 0 0-1.21 1.18H8a2.006 2.006 0 0 1-2-2 2.015 2.015 0 0 1 2-2h8.53ZM24.795 2.387l-5.035.629a1.072 1.072 0 0 0-.625 1.822l1.108 1.108-4.04 2.835a.536.536 0 0 1-.648-.025l-4.319-3.545a1.072 1.072 0 0 0-1.414.047L3.291 11.39a1.072 1.072 0 0 0 .09 1.64l.833.624a1.072 1.072 0 0 0 1.376-.075l4.584-4.289a.536.536 0 0 1 .696-.031l4.362 3.398a1.072 1.072 0 0 0 1.29.02l6.045-4.408.973.974a1.072 1.072 0 0 0 1.822-.625l.63-5.035a1.072 1.072 0 0 0-1.197-1.196Z",fill:s,opacity:"1","data-original":"#000000"})]})})})},j=e=>{let{size:t}=e;return(0,a.jsx)("svg",{"enable-background":"new 0 0 32 32",height:t+"px",viewBox:"0 0 32 32",width:t+"px",xmlns:"http://www.w3.org/2000/svg",id:"fi_7941498",children:(0,a.jsxs)("g",{id:"Layer_13",children:[(0,a.jsxs)("g",{children:[(0,a.jsx)("g",{children:(0,a.jsx)("path",{d:"m2.001 21.223c-.23 0-.46-.088-.636-.264-.352-.351-.352-.921 0-1.272l2.862-2.862c.352-.352.921-.352 1.272 0 .352.351.352.921 0 1.272l-2.862 2.862c-.175.176-.405.264-.636.264z"})}),(0,a.jsx)("g",{children:(0,a.jsx)("path",{d:"m4.318 28.583c-.23 0-.46-.088-.636-.264-.352-.351-.352-.921 0-1.272l5.384-5.384c.352-.352.921-.352 1.272 0 .352.351.352.921 0 1.272l-5.384 5.385c-.176.176-.406.263-.636.263z"})}),(0,a.jsx)("g",{children:(0,a.jsx)("path",{d:"m11.678 30.9c-.23 0-.46-.088-.636-.264-.352-.351-.352-.921 0-1.272l2.862-2.862c.352-.352.921-.352 1.272 0 .352.351.352.921 0 1.272l-2.862 2.862c-.175.176-.405.264-.636.264z"})})]}),(0,a.jsx)("path",{d:"m27.473 2.084-23.504 7.01c-1.775.529-1.899 2.995-.187 3.7l10.092 4.159c.044-.107.108-.207.195-.293l5.161-5.161c.352-.352.921-.352 1.272 0 .352.351.352.921 0 1.272l-5.161 5.161c-.087.087-.187.152-.294.196l4.161 10.097c.704 1.709 3.166 1.585 3.694-.187l7.012-23.513c.446-1.494-.946-2.886-2.441-2.441z"})]})})},g=e=>{let{className:t,children:s,type:n="button",style:l,hover:p="opacity",customIcon:v,hideTitleOnMobile:g=!1}=e,{background:f="blue",icon:w,loading:N=!1,disabled:y=!1,onClick:b,hideIcon:C=!1,iconSize:k}=e,I="".concat(function(e){switch(e){case"opacity":default:return c()["hover-opacity"];case"scale-out":return c()["hover-scale-out"];case"scale-in":return c()["hover-scale-in"]}}(p)," ").concat(function(e){switch(e){case"red":return c()["btn-delete"];case"green":return c()["btn-create"];case"blue":return c()["btn-save"];case"light-blue":return c()["btn-edit"];case"orange":return c()["btn-export"];case"yellow":return c()["btn-warning"];case"purple":return c()["btn-purple"];case"transparent":return c()["btn-transparent"];default:return""}}(f)),_={type:n,className:"".concat(c()["chaos-btn-23"]," ").concat(I," ").concat(y?"opacity-50":""," ").concat(t||""),style:l||{},disabled:N||y,onClick:N||y?()=>{}:b};return(0,a.jsxs)("button",{..._,children:[N&&(0,a.jsxs)("svg",{className:"animate-spin w-[15px] h-[15px] mr-[2px]",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!N&&!C&&(0,a.jsx)(a.Fragment,{children:function(e,t,s){if(t)return t;if(!e)return"";switch(e){case"create":return(0,a.jsx)(r.O9D,{size:s||16});case"history":return(0,a.jsx)(i.ceS,{size:s||15});case"save":return(0,a.jsx)(u.tfk,{size:s||18});case"edit":return(0,a.jsx)(i.fmQ,{size:s||18});case"delete":return(0,a.jsx)(i.lp8,{size:s||15});case"import":return(0,a.jsx)(x._iA,{size:s||18});case"export":return(0,a.jsx)(m.WUQ,{size:s||18});case"notification":return(0,a.jsx)(d.IZE,{size:s||18});case"close":return(0,a.jsx)(d.bjh,{size:s||18});case"download":return(0,a.jsx)(o.H_7,{size:s||18});case"drop-down":return(0,a.jsx)(h.dbR,{size:s||18});case"send":return(0,a.jsx)(j,{size:s||18});default:return null}}(w,v,k)}),g?(0,a.jsx)("div",{className:"desk-text",children:s}):s]})};var f=s(14522),w=s(30381),N=s.n(w),y=s(30286),b=s(63237),C=s(83677),k=s.n(C);function I(e){let t=new Date(e);return t.setHours(0,0,0,0),new Date(t).getTime()}function _(e){let t=new Date(e);return t.setHours(23,59,59,0),new Date(t).getTime()}let F=e=>{let{onSubmit:t,useISOString:s,showYesterday:l=!0,showToday:c=!0,showPast7Days:i=!0,showSelected:r=!0}=e,[o,d]=(0,n.useState)(0),[u,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)([{startDate:new Date,endDate:new Date,key:"selection"}]);function p(){var e,t,s,a,n;return N()(null===(e=x[0])||void 0===e?void 0:e.startDate).format("DD/MM/YYYY")==N()(null===(t=x[0])||void 0===t?void 0:t.endDate).format("DD/MM/YYYY")?N()(null===(n=x[0])||void 0===n?void 0:n.startDate).format("DD/MM/YYYY"):"".concat(N()(null===(s=x[0])||void 0===s?void 0:s.startDate).format("DD/MM/YYYY")," - ").concat(N()(null===(a=x[0])||void 0===a?void 0:a.endDate).format("DD/MM/YYYY"))}function v(e){if(t){if(!(null==e?void 0:e.start)){t({start:null,end:null,timestamp:new Date().getTime()});return}s?t({start:new Date((null==e?void 0:e.start)+252e5).toISOString(),end:new Date((null==e?void 0:e.end)+252e5).toISOString(),timestamp:new Date().getTime()}):t({...e,timestamp:new Date().getTime()}),h([{startDate:new Date(null==e?void 0:e.start),endDate:new Date(null==e?void 0:e.end),key:"selection"}])}}function j(e){switch(e){case"all":default:d(0),v({start:null,end:null});break;case"toDay":d(1),v({start:I(new Date().getTime()),end:_(new Date().getTime())});break;case"yesterday":d(2);let t=function(){let e=new Date,t=new Date(e);return t.setDate(e.getDate()-1),t}();v({start:I(t),end:_(new Date(t).getTime())});break;case"thisWeek":d(3);let s=function(){let e=new Date,t=new Date(e);return t.setDate(e.getDate()-7),{currentDate:new Date(e).getTime(),past7DaysDate:new Date(t).getTime()}}();v({start:I(null==s?void 0:s.past7DaysDate),end:_(null==s?void 0:s.currentDate)});break;case"range":var a,n;d(4),m(!1),v({start:I(null===(a=x[0])||void 0===a?void 0:a.startDate),end:_(null===(n=x[0])||void 0===n?void 0:n.endDate)})}}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:k().container,children:[(0,a.jsx)("div",{onClick:()=>j("all"),className:"item ".concat(0==o?"active":""),children:(0,a.jsx)("div",{children:"Tất cả"})}),c&&(0,a.jsx)("div",{onClick:()=>j("toDay"),className:"item ".concat(1==o?"active":""),children:(0,a.jsx)("div",{children:"H\xf4m nay"})}),l&&(0,a.jsx)("div",{onClick:()=>j("yesterday"),className:"item ".concat(2==o?"active":""),children:(0,a.jsx)("div",{children:"H\xf4m qua"})}),i&&(0,a.jsxs)("div",{onClick:()=>j("thisWeek"),className:"item ".concat(3==o?"active":""),children:[(0,a.jsx)("div",{className:"block w400:hidden",children:"7 ng\xe0y"}),(0,a.jsx)("div",{className:"hidden w400:block",children:"7 ng\xe0y qua"})]}),(0,a.jsx)("div",{onClick:()=>m(!0),className:"item ".concat(4==o?"active":""),children:(0,a.jsx)("div",{children:"Tuỳ chỉnh"})})]}),0!==o&&r&&(0,a.jsxs)("div",{className:"text-[12px] mt-[4px] text-[#1b73e8]",children:["Đang xem: ",p()]})]}),(0,a.jsx)(b.Z,{open:u,width:360,title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:"Chọn khoảng thời gian"}),(0,a.jsxs)("div",{className:"text-[12px] opacity-70 text-[#1b73e8]",children:["Đ\xe3 chọn: ",p()]})]}),closable:!1,footer:(0,a.jsxs)("div",{className:"w-full flex items-center justify-center gap-[8px]",children:[(0,a.jsx)(g,{icon:"close",background:"red",onClick:()=>m(!1),children:"Đ\xf3ng"}),(0,a.jsx)(g,{icon:"save",background:"blue",onClick:()=>j("range"),children:"\xc1p dụng"})]}),children:(0,a.jsx)("div",{className:"mt-[-24px] mb-[-24px] mx-[-10px]",children:(0,a.jsx)(y.C0,{locale:f.vi,showDateDisplay:!1,editableDateInputs:!1,onChange:e=>h([e.selection]),moveRangeOnFirstSelection:!1,ranges:x})})})]})};var Z=s(77024),S=s(84295),D=s(4915),T=s.n(D);let E=e=>{let{size:t,color:s}=e;return(0,a.jsx)("svg",{stroke:s||"black",fill:s||"black","stroke-width":"0",viewBox:"0 0 576 512",height:t+"px",width:t+"px",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M3.9 22.9C10.5 8.9 24.5 0 40 0H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L396.4 195.6C316.2 212.1 256 283 256 368c0 27.4 6.3 53.4 17.5 76.5c-1.6-.8-3.2-1.8-4.7-2.9l-64-48c-8.1-6-12.8-15.5-12.8-25.6V288.9L9 65.3C-.7 53.4-2.8 36.8 3.9 22.9zM432 224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zm59.3 107.3c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L432 345.4l-36.7-36.7c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6L409.4 368l-36.7 36.7c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L432 390.6l36.7 36.7c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6L454.6 368l36.7-36.7z"})})},z=e=>{let{style:t,children:s,isButton:l,onClickButton:c,visible:i,isHiddenCloseBtn:r=!1}=e,o=(0,n.useRef)();if(l)return(0,a.jsx)(Z.Z,{ref:o,id:"filters-".concat(N()(new Date).format("HHDDMMYYYY")),placement:"right",title:i?"Đ\xf3ng":"Bộ lọc",children:(0,a.jsx)("div",{onClick:()=>{o.current&&o.current.close(),c&&c()},className:T()["btn-filter"],children:i?(0,a.jsx)(E,{size:18,color:"#de2842"}):(0,a.jsx)(S.ulB,{size:16,color:"#1b73e8"})})});if(!i)return(0,a.jsx)(a.Fragment,{});let u={className:T().container,style:t||{}};return(0,a.jsxs)("div",{...u,children:[!r&&(0,a.jsx)("button",{onClick:()=>!!c&&c(),className:T().close,children:(0,a.jsx)(d.bjh,{size:20})}),s]})};var L=s(15637),G=s.n(L);let M=e=>{let{key:t,children:s,background:n="blue",onClick:l,isButton:c}=e,i={key:t||"$tag-".concat(new Date().getTime()),className:function(e){switch(e){case"red":return G()["red-tag"];case"green":return G()["green-tag"];case"blue":default:return G()["blue-tag"];case"yellow":return G()["yellow-tag"];case"black":return G()["black-tag"];case"white":return G()["white-tag"];case"dark":return G()["dark-tag"];case"turquoise":return G()["turquoise-tag"];case"teal":return G()["teal-tag"];case"deeppurple":return G()["deeppurple-tag"];case"purple":return G()["purple-tag"]}}(n),style:{cursor:c?"pointer":"default"}};return(0,a.jsx)("div",{...i,onClick:()=>!!l&&l(),children:s})};var R=s(16655),B=s(13277),A=s.n(B);let{Option:U}=R.default,Y=e=>{let{onChange:t,placeholder:s,style:n}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(R.default,{style:n||{},className:A().container,placeholder:s||"Sắp xếp",onChange:function(e,s){switch(t&&t(s),e){case 1:t({sort:1,sortType:!0});break;case 2:default:t({sort:0,sortType:!1});break;case 3:t({sort:0,sortType:!0});break;case 4:t({sort:1,sortType:!1})}},size:"large",children:[(0,a.jsx)(U,{value:1,children:"T\xean A - Z"},1),(0,a.jsx)(U,{value:4,children:"T\xean Z - A"},4),(0,a.jsx)(U,{value:2,children:"Mới đến cũ"},2),(0,a.jsx)(U,{value:3,children:"Cũ đến mới"},3)]})})}},21364:function(e,t,s){"use strict";s.r(t);var a=s(85893),n=s(26674),l=s(2876);let c=()=>(0,a.jsx)(l.default,{});c.Layout=n.C,t.default=c},2876:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eT}});var a=s(85893),n=s(67294),l=s(36054),c=s(34223),i=s(28853),r=s(11163),o=s.n(r),d=s(58533),u=s(9473),m=s(42006);let x=(0,n.createContext)({}),h=()=>(0,n.useContext)(x);var p=e=>{let t=(0,r.useRouter)(),[s,l]=(0,n.useState)(!0),[c,i]=(0,n.useState)("");return(0,n.useEffect)(()=>{var e,s;(null==t?void 0:null===(e=t.query)||void 0===e?void 0:e.group)?i((0,m.Jx)(null==t?void 0:null===(s=t.query)||void 0===s?void 0:s.group)):i("")},[t]),(0,a.jsx)(x.Provider,{value:{loading:s,setLoading:l,currentGroup:c,setCurrentGroup:i},children:e.children})},v=s(28802),j=s(16655),g=s(54696),f=s(51095),w=s(78773),N=s(11828),y=s(72548),b=s(79930),C=s(63237),k=s(28719),I=s(58416),_=s(82373),F=s(58759);let Z=e=>{let{onClick:t,title:s,icon:n}=e;return(0,a.jsxs)("div",{onClick:e=>t(e),className:"cc-news-create-type",children:[n,(0,a.jsx)("span",{children:s})]})};var S=function(e){let{onClick:t,setHaveImage:s}=e,n=(0,u.v9)(e=>e.user.information);return(0,a.jsxs)("div",{className:"cc-news-create-container w-full",children:[(0,a.jsxs)("div",{className:"flex row-center",children:[(0,a.jsx)(_.Z,{uri:null==n?void 0:n.Avatar,className:"cc-news-avatar"}),(0,a.jsx)("div",{onClick:()=>t(),className:"cc-fake-input",children:(0,a.jsx)("span",{children:"B\xe0i viết mới..."})})]}),(0,a.jsx)("div",{className:"cc-hr my-[16px]"}),(0,a.jsxs)("div",{className:"flex row-center",children:[(0,a.jsx)(Z,{onClick:()=>{s(!1),t()},icon:(0,a.jsx)(w.syc,{size:16,className:"text-[#4CAF50] mt-[-2px] mr-[8px]"}),title:"B\xe0i viết"}),(0,a.jsx)(Z,{onClick:()=>{s(!0),t()},icon:(0,a.jsx)(N.S2h,{size:20,className:"text-[#1E88E5] mt-[-2px] mr-[8px]"}),title:"Đăng ảnh"})]})]})};let D=e=>new Promise((t,s)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>s(e)});var T=e=>{let{onRefresh:t,isEdit:s,defaultData:l,onOpen:c}=e,i=(0,u.v9)(e=>e.user.information),{currentGroup:r}=h(),[o,d]=(0,n.useState)(!1),[m,x]=(0,n.useState)(""),[p,Z]=(0,n.useState)(""),[T,E]=(0,n.useState)(!1),[z,L]=(0,n.useState)(!1),[G,M]=(0,n.useState)([]),[R,B]=(0,n.useState)(""),{branches:A}=(0,k.e)(),[U,Y]=(0,n.useState)([]),H=async e=>{e.url||e.preview||(e.preview=await D(e.originFileObj)),x(e.url||e.preview),d(!0),Z(e.name||e.url.substring(e.url.lastIndexOf("/")+1)),console.log("dang ở đ\xe2y")},q=(0,a.jsxs)("div",{children:[(0,a.jsx)(v.Z,{}),(0,a.jsx)("div",{style:{marginTop:8},children:"Th\xeam ảnh"})]}),[P,O]=(0,n.useState)(!1);async function X(){let e=[];G.forEach(t=>{(null==t?void 0:t.fileType)||e.push(null==t?void 0:t.originFileObj)});try{let t=[],a=!1;if(e.length>0)for(let s=0;s<e.length;s++){let n=e[s];if(s==e.length-1&&(a=!0),n){let e=await b.X.uploadImage(n);200==e.status&&t.push({FileUrl:e.data.data})}}else a=!0;if(a){let e={Content:R,Color:"",BackGroundUrl:"",ListBranchId:[]};if(s){let s=G.filter(e=>e.FilteUrl||e.FileName);K({Id:null==l?void 0:l.Id,...e,FileListUpdate:[...t,...s]})}else V({...e,FileListCreate:t,NewsFeedGroupId:r||null})}}catch(e){I.Gu.error(null==e?void 0:e.message),O(!1)}}async function V(e){try{r?e.NewsFeedGroupId=r:e.ListBranchId=U;let s=await y.Z.post("NewsFeed",e);200==s.status&&(t(),E(!1),B(""),M([]),Y([]))}catch(e){I.Gu.error(null==e?void 0:e.message)}finally{O(!1)}}async function K(e){console.log("--- DATA_SUBMIT: ",e);try{let s=await y.Z.put("NewsFeed",e);200==s.status&&(t(),E(!1),B(""),M([]))}catch(e){I.Gu.error(null==e?void 0:e.message)}finally{O(!1)}}return(0,a.jsxs)(a.Fragment,{children:[!s&&(0,a.jsx)(S,{onClick:()=>E(!0),setHaveImage:L}),s&&(0,a.jsxs)("div",{className:"cc-comment-menu-item",onClick:()=>{let e;return e=[],void((null==l?void 0:l.FileList)&&(L(!0),l.FileList.forEach((t,s)=>{e.push({...t,url:t.FileUrl,uid:t.FileName})})),M([...e]),c(),B(l.Content),E(!0))},children:[(0,a.jsx)(w.fmQ,{className:"text-[#1E88E5] ml-[2px]",size:18}),(0,a.jsx)("span",{children:"Chỉnh sửa"})]}),(0,a.jsxs)(C.Z,{className:"cc-news",open:T,width:600,title:null,footer:null,onCancel:()=>E(!1),children:[(0,a.jsxs)("div",{className:"mb-[16px] p-2",children:[(0,a.jsxs)("div",{className:"cc-news-modal-user",children:[(0,a.jsx)(_.Z,{uri:null==i?void 0:i.Avatar,className:"cc-news-avatar"}),(0,a.jsxs)("div",{className:"mt-[-4px]",children:[(0,a.jsx)("span",{children:null==i?void 0:i.FullName}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{className:"cc-news-role-tag",children:[(0,a.jsx)(w.wN,{size:14,className:"mr-[8px]"})," ",null==i?void 0:i.role]})})]})]}),(0,a.jsx)("textarea",{disabled:P,value:R,onChange:e=>B(e.target.value),placeholder:"Nhập nội dung . . .",rows:6}),!r&&(0,a.jsx)("div",{className:"cc-news-branch-wrapper",children:(0,a.jsx)(j.default,{mode:"multiple",className:"cc-news-branch-wrapper",placeholder:"Chọn trung t\xe2m",onChange:e=>Y(e),value:U,children:null==A?void 0:A.map(e=>(0,a.jsxs)(j.default.Option,{value:e.Id,children:[e.Name," - ",e.Code]},e.Id))})}),z&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"cc-hr my-[16px]"}),(0,a.jsx)(g.default,{accept:"image/png, image/jpeg, images/jpg",disabled:P,listType:"picture-card",fileList:G,onPreview:H,onRemove:e=>{},onChange:e=>{let{fileList:t}=e;return M(t)},children:G.length>=8?null:q}),(0,a.jsxs)(C.Z,{width:1e3,centered:!0,open:o,title:p,footer:null,onCancel:()=>d(!1),children:[m.includes(".mp4")&&(0,a.jsxs)("video",{className:"shadow-md",controls:!0,id:"video",src:m,children:[(0,a.jsx)("source",{src:m,type:"video/mp4"}),"Your browser does not support the video tag."]}),!m.includes(".mp4")&&(0,a.jsx)("img",{className:"shadow-md",draggable:!1,alt:"example",style:{width:"100%"},src:m})]})]}),(0,a.jsxs)("div",{className:"cc-news-insert-wrapper",children:[(0,a.jsx)("div",{children:"Th\xeam v\xe0o b\xe0i viết"}),(0,a.jsx)(F.Z,{id:"create-btn-img",content:"Ảnh",place:"left",children:(0,a.jsx)("div",{onClick:()=>L(!z),className:"cc-insert-image",children:(0,a.jsx)(N.S2h,{size:20,color:"#43A047"})})})]})]}),(0,a.jsxs)(f.Z,{className:"w-full flex items-center justify-center ",onClick:!P&&function(){O(!0),X()},loading:P,disabled:P,type:"primary",children:[P?"":(0,a.jsx)(w.AGi,{size:20}),(0,a.jsx)("div",{className:"ml-[8px] font-[600]",children:s?"Lưu":"Đăng b\xe0i"})]})]})]})},E=s(66946),z=s(63462),L=s(31379),G=s(74253),M=s(32512),R=s(49367),B=s(92088),A=s(46556),U=s(11583),Y=e=>{let{buttonFull:t=!1,loading:s,onCancel:l,onOK:c,isEdit:i=!1,groupId:o}=e,d=(0,r.useRouter)(),[u,m]=(0,n.useState)(!1),x=async()=>{m(!0);try{await y.Z.delete("NewsFeedGroup",o),I.Gu.success("Th\xe0nh c\xf4ng"),d.push("/")}catch(e){console.log("\uD83D\uDE80 ~ file: ModalFooter.tsx:27 ~ handleDeleteGroup ~ error",e)}finally{m(!1)}};return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[i&&(0,a.jsx)(A.Z,{title:"Bạn c\xf3 chắc muốn xo\xe1 group hay kh\xf4ng ?",onConfirm:x,children:(0,a.jsxs)(f.Z,{className:"".concat(t&&"flex-1"),style:{background:"#ff595e"},loading:u,children:[(0,a.jsx)(U.TdI,{className:"text-[18px] mr-2"})," Xo\xe1 Nh\xf3m"]})}),!i&&(0,a.jsxs)(f.Z,{className:"".concat(t&&"flex-1"),style:{background:"#ff595e"},onClick:l,children:[(0,a.jsx)(R.SV5,{className:"text-[18px] mr-2"})," Huỷ"]}),(0,a.jsxs)(f.Z,{className:t?"flex-1":"",onClick:c,style:{background:"#0a89ff"},loading:s,children:[(0,a.jsx)(R.JMf,{className:"text-[18px] mr-2"})," ",i?"Chỉnh sửa":"Lưu"]})]})},H=function(e){var t,s,l;let{defaultData:c,isEdit:i=!1}=e,[r,o]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)([]),[h,p]=(0,n.useState)([]),g=(0,n.useCallback)(e=>{p(e.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)})))},[]),f=new z.S,{getRootProps:w,getInputProps:N,isDragActive:k}=(0,M.uI)({onDrop:g}),[_]=L.Z.useForm(),F=async()=>{try{o(!0);let e=await y.Z.get("NewsFeedGroup/class-available",{});if(200==e.status){let{data:t}=e.data;x(t)}else x([])}catch(e){I.Gu.error(e.message)}finally{o(!1)}};async function Z(e){try{if(o(!0),h.length>0){let t=await b.X.uploadImage(h[0]);200==t.status&&(e.Background=t.data.data)}i?await y.Z.put("NewsFeedGroup",{...e,Id:c.Id}):await y.Z.post("NewsFeedGroup",e),I.Gu.success("Th\xe0nh c\xf4ng"),_.resetFields(),p([]),f.invalidateQueries({queryKey:["NewsFeedGroup"]}),F(),u(!1)}catch(e){I.Gu.error(e.message)}finally{o(!1)}}return(0,n.useEffect)(()=>{i||F()},[]),(0,n.useEffect)(()=>{_.setFieldValue("Name",null==c?void 0:c.Name)},[c]),(0,a.jsxs)(a.Fragment,{children:[!i&&(0,a.jsxs)("div",{onClick:()=>u(!0),className:"btn-create-group",children:[(0,a.jsx)(R.Lfi,{size:18,className:"mr-2"}),(0,a.jsx)("div",{children:"Tạo nh\xf3m"})]}),!!i&&(0,a.jsx)("div",{className:"ml-3 cc-group-settings",onClick:()=>u(!0),children:(0,a.jsx)(B.b9P,{size:22})}),(0,a.jsx)(C.Z,{open:d,onCancel:()=>u(!1),closable:!0,centered:!0,width:500,title:"Th\xf4ng tin nh\xf3m",footer:(0,a.jsx)(Y,{isEdit:i,buttonFull:!0,loading:r,groupId:c&&c.Id,onCancel:()=>u(!1),onOK:()=>_.submit()}),children:(0,a.jsxs)(L.Z,{form:_,className:"grid grid-cols-2 gap-x-4 ",layout:"vertical",onFinish:Z,autoComplete:"on",children:[(0,a.jsx)(L.Z.Item,{label:"Ảnh b\xeca",name:"Background",className:"col-span-2",children:(0,a.jsxs)("div",{...w(),className:"cc-form-new-group-item border-[".concat(k?"#1890ff":"#d9d9d9","]  "),children:[(0,a.jsx)("input",{...N()}),(null===(t=h[0])||void 0===t?void 0:t.preview)||c?(0,a.jsx)("img",{src:(null===(s=h[0])||void 0===s?void 0:s.preview)?null===(l=h[0])||void 0===l?void 0:l.preview:null==c?void 0:c.BackGround,className:"object-cover w-full h-full"}):(0,a.jsx)(v.Z,{})]})}),!i&&(0,a.jsx)(L.Z.Item,{className:"col-span-2",label:"Lớp học",name:"ClassId",required:!0,children:(0,a.jsx)(j.default,{onChange:e=>{let t=m.find(t=>t.Id==e);_.setFieldValue("Name",t.Name)},children:m.length>0&&m.map((e,t)=>(0,a.jsxs)(j.default.Option,{value:e.Id,children:[(0,a.jsx)("b",{className:"".concat(1===e.Type?"text-[#f95a5a]":"text-[#50a14f]"),children:e.TypeName})," - ",e.Name]},t))})}),(0,a.jsx)(L.Z.Item,{className:"col-span-2",label:"T\xean nh\xf3m",name:"Name",required:!0,children:(0,a.jsx)(G.default,{disabled:r,className:"primary-input"})})]})})]})},q=s(78551);let P=e=>{let{uri:t}=e,[s,l]=(0,n.useState)("");return(0,a.jsx)("img",{draggable:!1,onError:()=>l("/default-group-thumbnail.png"),src:s||t||"/default-group-thumbnail.png",className:"w-[50px] h-[50px] rounded-[6px] object-cover border-[1px] border-[#ebebeb] border-solid"})};var O=function(e){let t=(0,u.v9)(e=>e.user.information),{data:s={data:[],totalRow:0},isFetching:n}=(0,q.a)({queryKey:["NewsFeedGroup"],queryFn:async()=>{let e=await y.Z.get("NewsFeedGroup",{pageIndex:1,pageSize:8});if((null==e?void 0:e.status)==200)return null==e?void 0:e.data}}),l=(null==s?void 0:s.data)||[],i=(null==s?void 0:s.totalRow)||0;return(0,a.jsxs)("div",{className:"p-[16px] mb-[16px] cc-news-group",children:[(0,a.jsx)("h4",{className:"font-semibold text-[16px] mb-[8px]",children:"Danh s\xe1ch nh\xf3m "}),((null==t?void 0:t.RoleId)==1||(null==t?void 0:t.RoleId)==2||(null==t?void 0:t.RoleId)==4||(null==t?void 0:t.RoleId)==7)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H,{isEdit:!1,defaultData:null}),(0,a.jsx)("div",{className:"cc-hr my-[16px]"})]}),!n&&0==l.length&&(0,a.jsx)(E.Z,{description:"Kh\xf4ng c\xf3 nh\xf3m n\xe0o",className:"py-[16px]"}),!n&&l.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"gap-[8px] flex flex-col",children:l.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"cc-group-item ".concat((0,m.cv)(e.Id)==(null===(s=o().query)||void 0===s?void 0:s.group)?"group-selected":""," "),onClick:()=>o().push({pathname:"/news",query:{group:(0,m.cv)(e.Id)}}),children:[(0,a.jsx)(P,{uri:null==e?void 0:e.BackGround}),(0,a.jsxs)("div",{className:"cc-group-info no-select",children:[(0,a.jsx)("div",{className:"group-name",children:null==e?void 0:e.Name}),(0,a.jsx)("div",{className:"text-[#959595]",children:(null==e?void 0:e.Members)==0?"Chưa c\xf3 th\xe0nh vi\xean":"".concat(null==e?void 0:e.Members," th\xe0nh vi\xean")})]})]},"the-group-".concat(t))})}),i>8&&(0,a.jsx)("div",{className:"cc-news-group-more",onClick:()=>o().push({pathname:"/group"}),children:"Hiện tất cả"})]}),n&&Array.from({length:0==i?1:i},(e,t)=>(0,a.jsxs)("div",{className:"cc-group-item",children:[(0,a.jsx)(c.Z.Image,{active:!0,style:{width:50,height:50},className:"cc-news-group-skele-img"}),(0,a.jsxs)("div",{className:"flex flex-col justify-center cc-group-info flex-1",children:[(0,a.jsx)(c.Z,{paragraph:!1,className:"w-[70%]",active:!0}),(0,a.jsx)(c.Z,{paragraph:!1,className:"w-[30%] mt-3",active:!0})]})]},t+Date.now().toLocaleString()))]})},X=s(8751),V=s(36070),K=s(18644),Q=s(88291);let{Search:W}=G.default,J=e=>{let{className:t}=e;return(0,a.jsxs)("div",{className:"flex items-center p-[8px]",children:[(0,a.jsx)(c.Z.Avatar,{size:"large"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(c.Z,{active:!0,className:"ml-[16px] w-[60%] ".concat(t),paragraph:!1})}),(0,a.jsx)(c.Z,{active:!0,className:"ml-[16px] w-[30px]",paragraph:!1})]})};function $(e){let{groupId:t}=e,[s,l]=(0,n.useState)({}),[c,i]=(0,n.useState)(!0);function r(){o(),N()}async function o(){try{let e=await y.Z.getByID("NewsFeedGroup",t);200==e.status?l(e.data.data):l({})}catch(e){I.Gu.error(null==e?void 0:e.message)}}(0,n.useEffect)(()=>{r()},[t]);let[d,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{d&&p()},[d]);let[x,h]=(0,n.useState)([]);async function p(){try{let e=await Q.GT.getUserNotIn(t);200==e.status?(h(e.data.data),f(e.data.data)):(h([]),f([]))}catch(e){I.Gu.error(null==e?void 0:e.message)}finally{i(!1)}}let[v,j]=(0,n.useState)([]),[g,f]=(0,n.useState)([]);async function N(){try{let e=await y.Z.get("UserInNewsFeedGroup",{newsFeedGroupId:t});200==e.status?j(e.data.data):j([])}catch(e){I.Gu.error(null==e?void 0:e.message)}}let b=(0,u.v9)(e=>e.user.information),k=(0,a.jsxs)("div",{className:"w-[400px] max-h-[500px] scrollable",children:[v.map(e=>(0,a.jsx)($.UserItem,{onRefresh:r,groupId:t,item:e,isMember:!0},"key:>-".concat(Date.now()+1e4*Math.random()))),0==v.length&&(0,a.jsx)(E.Z,{})]});return(0,a.jsxs)("div",{className:"w-full p-[16px] bg-[#fff] rounded-[6px] shadow-sm mb-[16px] w1000:mb-0",children:[!!(null==s?void 0:s.BackGround)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:null==s?void 0:s.BackGround,className:"object-cover w-[100%] h-[250px] rounded-[6px] shadow-sm"}),(0,a.jsx)("div",{className:"cc-hr my-[16px]"})]}),(0,a.jsxs)("div",{className:"flex row-center",children:[(0,a.jsxs)("div",{className:"flex-1 cc-group-info",children:[(0,a.jsx)("h2",{children:null==s?void 0:s.Name}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)(V.Z,{content:k,title:"Danh s\xe1ch th\xe0nh vi\xean",placement:"right",children:(0,a.jsx)("div",{className:"text-[#959595] cursor-pointer",children:(null==s?void 0:s.Members)==0?"Chưa c\xf3 th\xe0nh vi\xean":"".concat(null==s?void 0:s.Members," th\xe0nh vi\xean")})})})]}),((null==b?void 0:b.RoleId)==1||(null==b?void 0:b.RoleId)==2||(null==b?void 0:b.RoleId)==4||(null==b?void 0:b.RoleId)==7)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"cc-add-member",onClick:()=>m(!0),children:(0,a.jsx)(w.Bj$,{size:20})}),(0,a.jsx)(H,{isEdit:!0,defaultData:s,onRefresh:o})]})]}),(0,a.jsxs)(C.Z,{className:"min-h-[650px]",open:d,onCancel:()=>m(!1),closable:!0,centered:!0,title:"Danh s\xe1ch người d\xf9ng",footer:null,children:[(0,a.jsx)(W,{placeholder:"T\xecm kiếm  ...",className:"w-full mb-2 rounded-lg cc_search_input",style:{borderRadius:"8px"},onSearch:e=>{if(e.trim().length<1)return f(x);f(x.filter(t=>t.FullName.toLowerCase().includes(e.toLowerCase())))}}),(0,a.jsxs)("div",{className:"max-h-[500px] scrollable",children:[c&&(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{}),(0,a.jsx)(J,{className:"!w-[30%]"}),(0,a.jsx)(J,{className:"!w-[70%]"}),(0,a.jsx)(J,{className:"!w-[20%]"})]}),!c&&(0,a.jsx)(a.Fragment,{children:g.map(e=>(0,a.jsx)($.UserItem,{onRefresh:()=>{p(),o()},groupId:t,item:e},"key:>-".concat(Date.now()+1e4*Math.random())))})]})]})]})}$.UserItem=e=>{let{item:t,groupId:s,onRefresh:l,isMember:c=!1}=e,[i,r]=(0,n.useState)(!1),o=async()=>{r(!0);try{await Q.GT.addMember({NewsFeedGroupId:s,Members:[{UserId:t.UserInformationId||t.Id,Type:2}]}),await l(),I.Gu.success("Th\xe0nh C\xf4ng")}catch(e){I.Gu.error(null==e?void 0:e.message)}r(!1)},d=async()=>{try{await Q.GT.deleteMember(t.UserInformationId||t.Id),await l(),I.Gu.success("Th\xe0nh C\xf4ng")}catch(e){I.Gu.error(null==e?void 0:e.message)}finally{r(!1)}};return(0,a.jsxs)("div",{className:"flex row-center mb-[8px] p-[8px] hover:bg-[#eeeaea41] rounded-[6px]",children:[(0,a.jsx)(_.Z,{disabled:!0,uri:t.Avatar,className:"w-[40px] h-[40px] mr-[16px] shadow-sm "}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-[600]",children:null==t?void 0:t.FullName}),(0,a.jsx)("div",{className:"font-[400] text-[#808080]",children:t.TypeName})]}),(0,a.jsx)("div",{onClick:()=>!i&&c?d():o(),className:"flex all-center h-[34px] w-[34px] hover:bg-[#eeeaea77] active:bg-[#eeeaea1b] cursor-pointer none-selection rounded-full",children:i?(0,a.jsx)(X.Z,{}):c?(0,a.jsx)(K.bjh,{size:20,color:"#F44336"}):(0,a.jsx)(K.vDB,{size:20,color:"#2374E1"})})]})};var ee=s(30381),et=s.n(ee),es=s(8285),ea=s(92594),en=s(19006),el=s(31936),ec=s(31339),ei=e=>{let{onDelete:t,onEdit:s,showEdit:n}=e;return(0,a.jsxs)("div",{className:"cc-comment-menu-main w-[110px]",children:[(0,a.jsx)(A.Z,{showArrow:!1,placement:"right",onConfirm:()=>t(),title:"Xo\xe1?",cancelText:"Hủy",okText:"X\xf3a",children:(0,a.jsxs)("div",{className:"cc-comment-menu-item",children:[(0,a.jsx)(R.YK6,{className:"text-[#E53935]",size:18}),(0,a.jsx)("span",{children:"Xo\xe1"})]})}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"cc-hr my-[4px] mx-[4px]"}),(0,a.jsxs)("div",{className:"cc-comment-menu-item",onClick:()=>s(),children:[(0,a.jsx)(w.fmQ,{className:"text-[#1E88E5] ml-[2px]",size:18}),(0,a.jsx)("span",{children:"Chỉnh sửa"})]})]})]})};async function er(e,t,s,a,n){console.time("- Get NewsFeed");try{let n=await y.Z.get("NewsFeed",e);200==n.status?1==e.pageIndex?(t(n.data.data),s(n.data.totalRow)):t([...a,...n.data.data]):1==e.pageIndex?(t([]),s(0)):t([...a])}catch(e){I.Gu.error(null==e?void 0:e.message)}finally{n(!1)}console.timeEnd("- Get NewsFeed")}function eo(e){if(!e)return"Kh\xf4ng r\xf5";{let a=new Date().getTime()-new Date(e).getTime(),n=new Date(new Date().getTime()-a);var t=Math.floor((new Date-n)/1e3),s=t/31536e3;return s>1?Math.floor(s)+" năm trước":(s=t/2592e3)>1?Math.floor(s)+" th\xe1ng trước":(s=t/86400)>1&&s<2?"H\xf4m qua":s>1?Math.floor(s)+" ng\xe0y trước":(s=t/3600)>1?Math.floor(s)+" giờ trước":(s=t/60)>1?Math.floor(s)+" ph\xfat trước":t<30?"Vừa xong":Math.floor(t)+" gi\xe2y trước"}}async function ed(e,t,s,a){try{let s=await y.Z.get("NewsFeedComment",e);200==s.status?(t(s.data.data),a(s.data.totalRow)):(t([]),a(0))}catch(e){I.Gu.error(e.message)}finally{s(!1)}}async function eu(e,t){try{let s=await y.Z.delete("NewsFeed",e);200==s.status&&t()}catch(e){I.Gu.error(e.message)}}async function em(e,t){try{let s=await y.Z.delete("NewsFeedComment",e);200==s.status&&t()}catch(e){I.Gu.error(e.message)}}async function ex(e,t){try{let s=await y.Z.getByID("NewsFeed",e);200==s.status&&t(s.data.data)}catch(e){I.Gu.error(e.message)}}async function eh(e,t){try{let s=await y.Z.delete("NewsFeedReply",e);200==s.status&&t()}catch(e){I.Gu.error(e.message)}}async function ep(e){e.setLoading(!0);try{let t=await y.Z.get("NewsFeedReply",e.apiParams);200==t.status?(e.setData(t.data.data),e.setTotal(t.data.totalRow)):(e.setData([]),e.setTotal(0))}catch(e){I.Gu.error(e.message)}finally{e.setLoading(!1)}}async function ev(e){e.setLoading(!0);try{let t=await y.Z.put("NewsFeedReply",e.apiParams);200==t.status&&e.onSuccess()}catch(e){I.Gu.error(e.message)}finally{e.setLoading(!1)}}let ej=e=>{let{indexRe:t,item:s,onRefresh:l}=e,c=(0,u.v9)(e=>e.user.information),{Id:i,ReplyAvatar:r,Content:o,CreatedBy:d,CreatedIdBy:m,CreatedOn:x}=s,[h,p]=(0,n.useState)(!1),[v,j]=(0,n.useState)(""),[g,f]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1),[C,k]=(0,n.useState)(!1);function I(){ev({apiParams:{Id:i,Content:v},setLoading:b,onSuccess:()=>{l(),j(""),f(!1)}})}let Z=(0,a.jsx)(ei,{data:s,onDelete:()=>void(p(!1),eh(i,l)),onEdit:()=>{j(o),p(!1),f(!0)},showEdit:c.UserInformationId==m});return(0,a.jsxs)(a.Fragment,{children:[!g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"cc-comment-item",children:[(0,a.jsx)(_.Z,{className:"cc-news-avatar",uri:r}),(0,a.jsxs)("div",{className:"relative cc-comment-content",children:[(0,a.jsx)("div",{className:"cc-comment-user-name mr-[20px]",children:d}),c.UserInformationId==m&&(0,a.jsx)(V.Z,{open:h,onOpenChange:e=>p(e),placement:"rightTop",content:Z,title:null,showArrow:!1,trigger:"click",children:(0,a.jsx)("div",{className:"cc-comment-menu",children:(0,a.jsx)(ea.$Pu,{})})}),(0,a.jsx)("div",{className:"cc-comment-text",children:o})]}),(0,a.jsx)("div",{className:"cc-comment-menu"})]},"rep-".concat(t)),(0,a.jsx)("div",{className:"w-full flex ali-center ml-[56px] mt-[4px] font-[500] text-[12px]",children:(0,a.jsx)(F.Z,{id:"cmt-since-".concat(i),place:"top",content:(0,ec._3)(x).full,children:(0,a.jsx)("div",{className:"mr-2 hover:underline",children:eo(x)})})})]}),!!g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"cc-news-create-comment mt-[16px]",children:[(0,a.jsx)(_.Z,{className:"cc-news-avatar",uri:c.Avatar}),(0,a.jsxs)("div",{onClick:()=>{},className:"relative cc-comment-input",children:[(0,a.jsx)("input",{onKeyUp:function(e){13==e.keyCode&&v&&!y&&I(),27==e.keyCode&&f(!1)},disabled:y,placeholder:"Nhập nhận x\xe9t...",value:v,onChange:e=>j(e.target.value),onFocus:()=>k(!0),onBlur:()=>k(!1)}),(0,a.jsx)("div",{onClick:function(){v&&!y&&v!==o&&I()},className:"cc-comment-submit",children:y?(0,a.jsx)(el.Z.Blue,{}):(0,a.jsx)(w.AGi,{size:20,color:v&&v!=o?"#1E88E5":"#0000003d",className:"ml-[-2px]"})})]}),(0,a.jsx)(F.Z,{id:"cmt-rep-cancel-".concat(i),place:"right",content:"Huỷ",children:(0,a.jsx)("div",{onClick:()=>f(!1),className:"cursor-pointer pl-[8px] pr-[2px] py-[8px]",children:(0,a.jsx)(N.QAE,{size:22,color:"#E53935"})})})]}),C&&(0,a.jsxs)("div",{className:"the-option text-[12px] text-[#E53935] mt-[8px] font-[500] ml-[56px]",children:["Nhấn ESC để hủy",!!v&&v!=o&&(0,a.jsxs)(a.Fragment,{children:[", ",(0,a.jsx)("div",{className:"text-[#1E88E5] inline-flex",children:"Enter để lưu"})]})]})]})]})};var eg=function(e){let{comment:t}=e,s=(0,u.v9)(e=>e.user.information),{Id:l,Content:c}=t,[i,r]=(0,n.useState)([]),[o,d]=(0,n.useState)({pageIndex:1,pageSize:2,newsFeedCommentId:l}),[m,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)(0),[v,j]=(0,n.useState)(!1),[g,f]=(0,n.useState)("");function N(){g&&!m&&g!==c&&b()}async function b(){x(!0);try{let e=await y.Z.post("NewsFeedReply",{NewsFeedCommentId:l,Content:g});200==e.status&&(ep({apiParams:o,setData:r,setLoading:x,setTotal:p}),f(""))}catch(e){I.Gu.error(e.message)}finally{x(!0)}}return(0,n.useEffect)(()=>{ep({apiParams:o,setData:r,setLoading:x,setTotal:p})},[o]),(0,a.jsxs)("div",{className:"ml-[56px]",children:[(0,a.jsxs)("div",{className:"cc-news-create-comment mt-[16px]",children:[(0,a.jsx)(_.Z,{className:"cc-news-avatar",uri:null==s?void 0:s.Avatar}),(0,a.jsxs)("div",{onClick:()=>{},className:"relative cc-comment-input",children:[(0,a.jsx)("input",{onKeyUp:function(e){13===e.keyCode&&g&&!m&&N()},disabled:m,placeholder:"Nhập nhận x\xe9t...",value:g,onChange:e=>f(e.target.value)}),(0,a.jsx)("div",{onClick:N,className:"cc-comment-submit",children:m?(0,a.jsx)(el.Z.Blue,{}):(0,a.jsx)(w.AGi,{size:20,color:g?"#1E88E5":"#0000003d",className:"ml-[-2px]"})})]})]}),(0,a.jsxs)("div",{className:"cc-list-comment",children:[i.map((e,t)=>(0,a.jsx)(ej,{item:e,indexRe:t,onRefresh:()=>ep({apiParams:o,setData:r,setLoading:x,setTotal:p})},"xts-".concat(t))),h>2&&(0,a.jsx)("div",{onClick:function(){v?d({...o,pageSize:2}):d({...o,pageSize:9999}),j(!v)},className:"cc-comment-more",children:v?"Ẩn bớt":"Hiện tất cả"})]})]})};function ef(e){let{item:t,onRefresh:s}=e,l=(0,u.v9)(e=>e.user.information),[c,i]=(0,n.useState)(!1),[r,o]=(0,n.useState)(!1),[d,m]=(0,n.useState)(""),[x,h]=(0,n.useState)(!1),{Id:p,Content:v,CreatedIdBy:j,CreatedBy:g,CreatedOn:f,CommentedAvatar:w}=t,N=(0,a.jsx)(ei,{data:t,onDelete:function(){i(!1),em(p,s),h(!1)},onEdit:()=>{m(v),i(!1),o(!0)}});return(0,a.jsx)(a.Fragment,{children:!r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"cc-comment-item",children:[(0,a.jsx)(_.Z,{uri:w,className:"cc-news-avatar"}),(0,a.jsxs)("div",{className:"relative cc-comment-content",children:[(0,a.jsx)("div",{className:"cc-comment-user-name mr-[20px]",children:g}),l.UserInformationId==j&&(0,a.jsx)(V.Z,{open:c,onOpenChange:i,placement:"rightTop",content:N,title:null,showArrow:!1,trigger:"click",children:(0,a.jsx)("div",{className:"cc-comment-menu",children:(0,a.jsx)(ea.$Pu,{})})}),(0,a.jsx)("div",{className:"cc-comment-text",children:v})]}),(0,a.jsx)("div",{className:"cc-comment-menu"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"news-cmt-info",children:[(0,a.jsx)(F.Z,{id:"cmt-since-".concat(p),place:"left",content:(0,ec._3)(f).full,children:(0,a.jsx)("div",{className:"mr-2 hover:underline",children:eo(f)})}),"•",(0,a.jsx)("div",{onClick:()=>h(e=>!e),className:"news-cmt-info-text none-selection",children:"Trả lời"})]}),x&&(0,a.jsx)(eg,{comment:t})]})]})})}var ew=function(e){let{data:t,onShowAll:s,totalComment:l,onRefresh:c}=e,[i,r]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:"cc-list-comment",children:[t.map(e=>(0,a.jsx)(ef,{item:e,onRefresh:c},e.Id)),l>1&&(0,a.jsx)("div",{onClick:function(){s(!i),r(!i)},className:"cc-comment-more",children:i?"Ẩn bớt":"Hiện tất cả"})]})},eN=e=>{let{item:t,isModal:s,Content:n,setVisible:l,showButton:c,showAll:i,setShowAll:r}=e;return(0,a.jsxs)("div",{children:[!s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{id:"news-item-content-"+(null==t?void 0:t.Id),className:"cc-news-item-content in-4-line",children:n}),c&&(0,a.jsx)("div",{onClick:()=>l(!0),className:"text-[#1E88E5] mt-[8px] cursor-pointer",children:"Xem th\xeam..."})]}),s&&(0,a.jsxs)(a.Fragment,{children:[!i&&(0,a.jsx)("span",{id:"news-item-content-x-"+(null==t?void 0:t.Id),className:"cc-news-item-content in-4-line",children:n}),i&&(0,a.jsx)("span",{id:"news-item-content-x-"+(null==t?void 0:t.Id),className:"cc-news-item-content full-content",children:n}),c&&(0,a.jsx)("div",{onClick:()=>r(!i),className:"".concat(i?"text-[#F44336]":"text-[#1E88E5]"," mt-[8px] cursor-pointer"),children:i?"Ẩn bớt":"Xem th\xeam..."})]})]})};let ey=n.memo(e=>{let{files:t}=e,[s,l]=(0,n.useState)(""),[c,i]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(t){let e=[];t.forEach(t=>{var s;(null==t?void 0:t.FileUrl)&&("jpg"==(s=t.FileType)||"jpeg"==s||"webp"==s||"png"==s||"svg"==s||"mp4"==s||"avi"==s||"mkv"==s)&&e.push({src:null==t?void 0:t.FileUrl,alt:t.FileName,fileType:t.FileType})}),i([...e])}},[t]);let r=c.length<4?c.length:4;return(0,a.jsxs)(a.Fragment,{children:[t.length>0&&(0,a.jsx)("div",{className:"cc-hr my-[8px] mx-[-6px]"}),(0,a.jsx)("div",{className:"grid grid-cols-".concat(r," gap-x-2 gap-y-2"),children:c.map((e,t)=>(0,a.jsxs)("div",{onClick:()=>l(e.src),className:"shadow-md cursor-pointer bg-[#fff] h-full rounded-[6px]",children:["mp4"!==e.fileType&&(0,a.jsx)("img",{draggable:!1,src:e.src,className:"".concat(r>1?"max-h-[400px] w-[100%]":""," rounded-[6px] object-cover"),width:"100%"}),("mp4"==e.fileType||"avi"==e.fileType||"mkv"==e.fileType)&&(0,a.jsxs)("div",{className:"relative text-[22px] hover:text-[24px]",children:[(0,a.jsxs)("video",{className:"".concat(r>1?"h-[120px] w-[100%]":"min-h-[400px]"," object-cover"),id:"video",src:e.src,children:[(0,a.jsx)("source",{src:e.src,className:"min-h-[400px]",type:"video/mp4"}),"Your browser does not support the video tag."]}),(0,a.jsx)("div",{className:"top-0 lef-0 right-0 absolute bottom-0 flex all-center bg-[#00000041] h-full w-full",children:(0,a.jsx)(w.gmG,{className:"",color:"#fff"})})]})]},"FILE-POST-".concat(t,"-").concat(new Date().getTime())))}),(0,a.jsxs)(C.Z,{width:1e3,closable:!1,centered:!0,open:!!s,footer:null,onCancel:()=>l(""),children:[s.includes(".mp4")&&(0,a.jsxs)("video",{className:"shadow-md",controls:!0,id:"video",src:s,children:[(0,a.jsx)("source",{src:s,type:"video/mp4"}),"Your browser does not support the video tag."]}),s.includes(".avi")&&(0,a.jsxs)("video",{className:"shadow-md",controls:!0,id:"video",src:s,children:[(0,a.jsx)("source",{src:s,type:"video/avi"}),"Your browser does not support the video tag."]}),!s.includes(".mp4")&&!s.includes(".avi")&&(0,a.jsx)("img",{className:"shadow-md",draggable:!1,alt:"example",style:{width:"100%",objectFit:"cover"},src:s})]})]})});var eb=s(57918),eC=s.n(eb);let ek=e=>{let{onClick:t,title:s,icon:n,loading:l,activated:c}=e;return(0,a.jsxs)("div",{onClick:e=>t(e),className:"cc-news-create-type",children:[l?(0,a.jsx)("div",{className:"mr-[8px]",children:(0,a.jsx)(el.Z.Blue,{})}):n,(0,a.jsx)("span",{style:{color:c?"#1E88E5":"#000"},children:s})]})};var eI=e=>{let t;let{item:s,index:l,CreatedBy:c,_clickComment:i,_like:r,loadingLike:d,GroupName:x,details:h,RoleName:p,CreatedOn:v,Id:j,refreshComment:g,onRefresh:f,deleteNews:N,Content:y,showComment:b,loadingComment:C,_comment:k,comments:I,showAllComment:Z,totalComment:S,visible:D,setVisible:E,currentComment:z,setCurrentComment:L,isModal:G}=e;console.log("item",null==s?void 0:s.Id);let M=(0,n.useRef)(null),B=(0,u.v9)(e=>e.user.information),[U,Y]=(0,n.useState)(!0),[H,q]=(0,n.useState)(!1),P=(0,a.jsxs)("div",{className:"cc-comment-menu-main w-[110px]",children:[(0,a.jsx)(A.Z,{showArrow:!1,placement:"right",onConfirm:()=>{var e;g(),null===(e=M.current)||void 0===e||e.close(),N(j,f)},title:"Xo\xe1 b\xe0i đăng n\xe0y ?",cancelText:"Hủy",okText:"X\xf3a",children:(0,a.jsxs)("div",{className:"cc-comment-menu-item",children:[(0,a.jsx)(R.YK6,{className:"text-[#E53935]",size:18}),(0,a.jsx)("span",{children:"Xo\xe1"})]})}),B.UserInformationId==(null==s?void 0:s.CreatedIdBy)&&(0,a.jsx)("span",{onClick:()=>q(!1),children:(0,a.jsx)(T,{onRefresh:f,isEdit:!0,defaultData:s,onOpen:()=>{var e;return null===(e=M.current)||void 0===e?void 0:e.close()}})})]}),[O,X]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=D?"news-item-content-x-":"news-item-content-",t=document.getElementById(e+(null==s?void 0:s.Id));if(t){let e=parseInt(window.getComputedStyle(t).lineHeight);t.scrollHeight>2*e?O||X(!0):O&&X(!1)}},[null==s?void 0:s.Id,D]),(0,a.jsxs)("div",{className:"cc-news-item  bg-tw-black ".concat(eC().newsItem),id:"news-item-".concat(null==s?void 0:s.Id),children:[(0,a.jsxs)("div",{className:"cc-news-item-header",children:[(0,a.jsx)("div",{className:"cc-news-item-user py-[4px]",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(_.Z,{uri:null==s?void 0:s.Avatar,className:"cc-news-avatar"}),(0,a.jsxs)("div",{className:"ml-[16px] mt-[-2px]",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"cc-news-poster-name",children:c}),!!x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mx-[8px] mt-[2px] inline-block",children:"➤"}),(0,a.jsx)(F.Z,{place:"right",id:"group-".concat(null==s?void 0:s.Id,"-").concat(l),content:"Nh\xf3m: ".concat(x),children:(0,a.jsx)("div",{onClick:function(){o().push({pathname:"/news",query:{group:(0,m.cv)(s.NewsFeedGroupId)}})},className:"cc-news-poster-name cc-news-poster-group",children:x})})]}),(null==s?void 0:s.BranchNameList)&&(0,a.jsxs)(a.Fragment,{children:[s.BranchNameList.map((e,t)=>t>0?"":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mx-[8px] mt-[2px] inline-block",children:"➤"}),(0,a.jsx)(F.Z,{place:"right",id:"branch-".concat(null==s?void 0:s.Id,"-").concat(t),content:"Trung t\xe2m: ".concat(e),children:(0,a.jsx)("div",{className:"cc-news-poster-name cc-news-poster-group",children:e})})]})),s.BranchNameList.length>1&&(0,a.jsx)(V.Z,{title:"Danh s\xe1ch trung t\xe2m",content:s.BranchNameList.map((e,t)=>(0,a.jsx)("li",{className:"text-[14px] text-[#000000] font-[600] mt-[4px]",children:e},e+1e3*Math.random())),placement:"rightTop",trigger:"click",overlayClassName:"show-arrow",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"text-[16px] font-[600]",children:","}),(0,a.jsx)("div",{className:"cc-news-poster-name cc-news-poster-group ml-[4px] !text-[#1E88E5] cursor-pointer",children:"xem th\xeam..."})]})})]})]}),(0,a.jsxs)("div",{className:"flex row-center",children:[!!p&&(0,a.jsx)("div",{className:"cc-news-post-role ".concat("Admin"==p?"is-admin":""),children:p}),(0,a.jsxs)(F.Z,{place:"right",id:"since-".concat(j),content:et()(new Date(v)).format("HH:mm DD/MM/YYYY"),children:[(0,a.jsx)("div",{className:"cc-news-post-since hover:underline",children:eo(v)})," "]})]})]})]})}),(null==B?void 0:B.RoleId)==1&&(0,a.jsx)(V.Z,{ref:M,placement:"rightTop",content:P,title:null,onOpenChange:e=>q(e),open:H,showArrow:!1,trigger:"click",children:(0,a.jsx)("div",{className:"cc-news-item-menu",children:(0,a.jsx)(ea.$Pu,{size:18})})})]}),(0,a.jsxs)("div",{className:"cc-news-item-body",children:[(0,a.jsx)(eN,{Content:y,isModal:G,item:s,setShowAll:Y,setVisible:E,showAll:U,showButton:O}),!!(null==h?void 0:h.FileList)&&(0,a.jsx)("div",{className:"cc-news-item-files",children:(0,a.jsx)(ey,{files:null==h?void 0:h.FileList})})]}),(0,a.jsxs)("div",{className:"cc-news-item-footer",children:[(0,a.jsxs)("div",{className:"cc-footer-top",children:[(0,a.jsx)("div",{className:"cc-news-likes",children:!!(null==h?void 0:h.TotalLike)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.L7p,{size:20,className:"mr-[8px] text-[#1E88E5]"}),(0,a.jsx)("div",{className:"number-of-likes",children:(B.UserInformationId,t="",h.TotalLike>0&&(1==h.TotalLike&&(null==h?void 0:h.IsLike)&&(t="Bạn đ\xe3 th\xedch"),1!=h.TotalLike||(null==h?void 0:h.IsLike)||(t="1 người đ\xe3 th\xedch"),h.TotalLike>1&&(t=h.TotalLike+" người đ\xe3 th\xedch"),h.TotalLike>1&&(null==h?void 0:h.IsLike)&&(t="Bạn v\xe0 "+(h.TotalLike-1)+" người đ\xe3 th\xedch")),{text:t}).text})]})}),!!(null==h?void 0:h.TotalComment)&&(0,a.jsxs)("div",{className:"number-of-likes",children:[null==h?void 0:h.TotalComment," nhận x\xe9t"]})]}),(0,a.jsx)("div",{className:"cc-hr my-[8px] mx-[-6px]"}),(0,a.jsxs)("div",{className:"cc-footer-bottom",children:[(0,a.jsx)(ek,{onClick:r,title:"Th\xedch",loading:d,activated:!!(null==h?void 0:h.IsLike),icon:(null==h?void 0:h.IsLike)?(0,a.jsx)(R.L7p,{size:18,className:"mr-[8px] text-[#1E88E5]"}):(0,a.jsx)(es.UZT,{size:18,className:"mr-[8px]"})}),(0,a.jsx)(ek,{onClick:i,title:"Nhận x\xe9t",icon:(0,a.jsx)(en.T3Y,{size:18,className:"mr-[8px] text-[#000]"})})]}),b&&(0,a.jsxs)("div",{className:"cc-news-comment",children:[(0,a.jsx)("div",{className:"cc-hr my-[8px] mt-[14px] mx-[-6px]"}),(0,a.jsxs)("div",{className:"cc-comments",children:[(0,a.jsxs)("div",{className:"cc-news-create-comment",children:[(0,a.jsx)(_.Z,{uri:B.Avatar,className:"cc-news-avatar"}),(0,a.jsxs)("div",{className:"relative cc-comment-input",children:[(0,a.jsx)("input",{onKeyUp:function(e){13==e.keyCode&&z&&!C&&k()},disabled:C,placeholder:"Nhập nhận x\xe9t...",value:z,onChange:e=>L(e.target.value),style:{outline:"none"}}),(0,a.jsx)("div",{onClick:k,className:"cc-comment-submit",children:C?(0,a.jsx)(el.Z.Blue,{}):(0,a.jsx)(w.AGi,{size:20,color:z?"#1E88E5":"#0000003d",className:"ml-[-2px]"})})]})]}),(0,a.jsx)(ew,{data:I,onShowAll:Z,totalComment:S,onRefresh:g})]})]})]})]},"news-item-".concat(null==s?void 0:s.Id))},e_=e=>{let{item:t,index:s,onRefresh:l}=e,{Id:c,CreatedBy:i,GroupName:r,RoleName:o,CreatedOn:d,Content:m}=t,[x,h]=(0,n.useState)(!1),[p,v]=(0,n.useState)(!1),[j,g]=(0,n.useState)(!1),[f,w]=(0,n.useState)([]),[N,b]=(0,n.useState)({pageIndex:1,pageSize:1,newsFeedId:t.Id||null}),[k,_]=(0,n.useState)(0),[F,Z]=(0,n.useState)({}),[S,D]=(0,n.useState)("");function T(e){Z(e),h(!1)}async function E(){h(!0);try{let e=await y.Z.post("NewsFeedLike",{newsFeedId:c});200==e.status&&ex(c,T)}catch(e){I.Gu.error(null==e?void 0:e.message)}finally{h(!1)}}async function z(){if(S&&!p){v(!0);try{let e=await y.Z.post("NewsFeedComment",{NewsFeedId:c,Content:S});200==e.status&&(ed(N,w,v,_),D(""),ex(c,Z))}catch(e){I.Gu.error(e.message)}v(!1)}}function L(){j||b({pageIndex:1,pageSize:1,newsFeedId:t.Id||null}),g(!j)}function G(e){e?b({...N,pageSize:999}):b({...N,pageSize:1})}function M(){ex(c,Z),ed(N,w,v,_)}(0,u.v9)(e=>e.user.information),(0,n.useEffect)(()=>{Z(t)},[t]),(0,n.useEffect)(()=>{j&&ed(N,w,v,_)},[N]);let[R,B]=(0,n.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eI,{_like:E,comments:f,deleteNews:eu,details:F,index:s,item:t,loadingComment:p,loadingLike:x,onRefresh:l,refreshComment:M,showAllComment:G,showComment:j,totalComment:k,Id:c,RoleName:o,_clickComment:L,_comment:z,Content:m,CreatedBy:i,CreatedOn:d,GroupName:r,setVisible:B,visible:R,currentComment:S,setCurrentComment:D}),(0,a.jsx)(C.Z,{width:700,closable:!1,className:"cc-news news-item-modal",footer:null,open:R,onCancel:()=>B(!1),children:(0,a.jsx)(eI,{_like:E,comments:f,deleteNews:eu,details:F,index:s,item:t,loadingComment:p,loadingLike:x,onRefresh:l,refreshComment:M,showAllComment:G,showComment:j,totalComment:k,Id:c,RoleName:o,_clickComment:L,_comment:z,Content:m,CreatedBy:i,CreatedOn:d,GroupName:r,setVisible:B,visible:R,currentComment:S,setCurrentComment:D,isModal:!0})})]})};let eF={newsFeedGroupId:null,pageIndex:1,pageSize:10,branchIds:null};function eZ(){return(0,a.jsxs)("div",{className:"cc-news-item mt-[32px]",id:"loading-32",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(c.Z.Avatar,{active:!0,style:{width:40,height:40}}),(0,a.jsxs)("div",{className:"flex-1 ml-[16px] max-w-[150px]",children:[(0,a.jsx)(c.Z,{active:!0,paragraph:!1,round:!0,className:"w-[70%]"}),(0,a.jsx)(c.Z,{active:!0,paragraph:!1,round:!0,style:{marginTop:8}})]})]}),(0,a.jsx)(c.Z,{active:!0,round:!0,paragraph:!1,style:{marginTop:16}}),(0,a.jsx)(c.Z,{active:!0,round:!0,paragraph:!1,style:{marginTop:16,width:"30%"}}),(0,a.jsx)(c.Z,{active:!0,round:!0,paragraph:!1,style:{marginTop:16,width:"70%"}}),(0,a.jsx)("div",{className:"cc-hr my-[8px] mx-[-6px] mt-[16px]"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"flex-1 all-center mt-[8px]",children:[(0,a.jsx)(c.Z,{active:!0,round:!0,paragraph:!1,style:{width:16,marginRight:8}}),(0,a.jsx)(c.Z,{active:!0,round:!0,paragraph:!1,style:{width:70}})]}),(0,a.jsxs)("div",{className:"flex-1 all-center mt-[8px]",children:[(0,a.jsx)(c.Z,{active:!0,round:!0,paragraph:!1,style:{width:16,marginRight:8}}),(0,a.jsx)(c.Z,{active:!0,round:!0,paragraph:!1,style:{width:90}})]})]})]})}var eS=function(){let{loading:e,setLoading:t,currentGroup:s}=h(),[l,c]=(0,n.useState)(eF),[o,x]=(0,n.useState)([]),[p,v]=(0,n.useState)(0),j=(0,u.v9)(e=>e.user),[g,f]=(0,n.useState)(!1),w=(0,r.useRouter)(),N=document.getElementById("news-scroll");function y(e){x(e),t(!1)}(0,n.useEffect)(()=>{let e;return f(!0),null==N||N.scroll({top:0}),1!==l.pageIndex?e=setTimeout(()=>{c({...l,pageIndex:1,newsFeedGroupId:s,branchIds:j.currentBranch}),f(!1)},500):(f(!1),c({...l,branchIds:j.currentBranch,newsFeedGroupId:s})),()=>clearTimeout(e)},[j.currentBranch,s]),(0,n.useEffect)(()=>{if(l){var e,a;(null===(a=window)||void 0===a||null===(e=a.location)||void 0===e||!e.search||s)&&(0,m.Jx)(w.query.group)===s&&j.currentBranch&&!1==g&&er({...l},y,v,o,t)}},[l,g]);let b=(0,u.v9)(e=>e.user.information);return(0,a.jsxs)("div",{id:"news-scroll",className:"flex gap-[12px] mx-[-16px] px-[12px] pr-[8px] cc-news scrollable h-[calc(100vh-120px)]",children:[(0,a.jsxs)("div",{className:"min-w-[300px] flex-[3]",children:[!!s&&(0,a.jsx)("div",{className:"cc-news-container w1000:!mb-[16px]",children:(0,a.jsx)($,{groupId:s})}),((0,m.is)(b).admin||(0,m.is)(b).teacher||(0,m.is)(b).manager||(0,m.is)(b).academic)&&(0,a.jsx)("div",{className:"cc-news-container pb-[16px]",children:(0,a.jsx)(T,{onRefresh:()=>c({...l,pageIndex:1})})}),!s&&(0,a.jsx)("div",{className:"cc-new-mobile-group w-full",children:(0,a.jsx)("div",{className:"bg-[#fff] shadow-sm w-full rounded-[6px]",children:(0,a.jsx)(O,{})})}),e&&0==o.length&&(0,a.jsxs)("div",{className:"!ml-[2px]",children:[(0,a.jsx)(eZ,{}),(0,a.jsx)(eZ,{})]}),(!e||o.length>0)&&(0,a.jsx)(d.Z,{dataLength:o.length,next:()=>{e||(t(!0),c({...l,pageIndex:l.pageIndex+1}))},hasMore:o.length<p,loader:(0,a.jsx)("div",{className:"w-full mt-[16px] mb-[32px]",children:(0,a.jsx)(eZ,{})}),endMessage:(0,a.jsx)("div",{className:"h-[36px]"}),scrollableTarget:"news-scroll",className:"mx-[-8px] w1000:mx-0",children:(0,a.jsx)(i.ZP,{dataSource:o,renderItem:(e,t)=>(0,a.jsx)(e_,{onRefresh:()=>c({...l,pageIndex:1}),item:e,index:t},"new-item-".concat(e.Id))})})]}),(0,a.jsx)("div",{className:"min-w-[300px] cc-new-desktop-group flex-[1]",children:(0,a.jsx)("div",{className:"bg-[#fff] shadow-sm w-full rounded-[6px] cc-news-group",children:(0,a.jsx)(O,{})})})]})};function eD(){return(0,a.jsx)(p,{children:(0,a.jsx)(eS,{})})}eD.Layout=l.Zn;var eT=eD},57918:function(e){e.exports={newsItem:"styles_newsItem__R9f66"}},17331:function(e){e.exports={"chaos-btn-23":"styles_chaos-btn-23__JeXof","btn-transparent":"styles_btn-transparent__s41Zi","btn-create":"styles_btn-create__WFIrb","btn-save":"styles_btn-save__837yn","btn-edit":"styles_btn-edit__uvVO8","btn-delete":"styles_btn-delete__Tao4i","btn-export":"styles_btn-export__3IPju","btn-warning":"styles_btn-warning__po0oc","btn-purple":"styles_btn-purple__wMCn5","hover-opacity":"styles_hover-opacity__bpXH_","hover-scale-out":"styles_hover-scale-out__UXiwo","hover-scale-in":"styles_hover-scale-in__q1Szt",spin:"styles_spin__7snR9"}},83677:function(e){e.exports={container:"styles_container__JxAv7","btn-create":"styles_btn-create__zwQL9"}},13277:function(e){e.exports={container:"styles_container__proPV"}},4915:function(e){e.exports={container:"styles_container__RuLuz",close:"styles_close__qPDWn","btn-filter":"styles_btn-filter__ez8Sz"}},15637:function(e){e.exports={tag:"styles_tag__q2C27","blue-tag":"styles_blue-tag__fpf1A","red-tag":"styles_red-tag__NedIP","green-tag":"styles_green-tag__baHu5","yellow-tag":"styles_yellow-tag__TecTs","black-tag":"styles_black-tag__OEF5V","white-tag":"styles_white-tag__qJWk_","dark-tag":"styles_dark-tag__m3gMm","turquoise-tag":"styles_turquoise-tag__q00o1","teal-tag":"styles_teal-tag__pxduh","deeppurple-tag":"styles_deeppurple-tag__tC_wG","purple-tag":"styles_purple-tag__zPlGS"}}},function(e){e.O(0,[6130,4838,7909,8391,5970,6660,4396,4817,594,3365,4321,2961,509,7473,8460,9915,6565,653,6655,1607,6361,5009,4253,9872,1379,3604,4696,3718,6954,2888,9774,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);