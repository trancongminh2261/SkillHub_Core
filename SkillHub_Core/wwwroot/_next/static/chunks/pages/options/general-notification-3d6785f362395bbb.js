(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[821],{16654:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/options/general-notification",function(){return t(25871)}])},79930:function(e,a,t){"use strict";t.d(a,{X:function(){return l}});var s=t(59178);let l={uploadImage(e){let a=new FormData;return a.append("file",e),s.e.post("".concat("/api/Base","/Upload"),a,{})}}},82373:function(e,a,t){"use strict";var s=t(85893),l=t(67294),n=t(63237);a.Z=e=>{let{uri:a,className:t,disabled:i,isThumbnail:o,alt:r,resizedImage:c}=e,[d,u]=(0,l.useState)(""),[m,g]=(0,l.useState)(!1);function x(){!i&&(d||a)&&g(!m)}let h=o?"/default-thumbnail.png":"/default-avatar.png";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{onClick:x,onError:()=>u(h),alt:"avatar",src:d||c||a||h,className:t,style:{cursor:d||a?"pointer":"default",borderStyle:a?"solid":"none"}}),(0,s.jsx)(n.Z,{closable:!1,title:null,width:700,open:m,onCancel:x,footer:null,children:(0,s.jsx)("img",{onError:()=>u(h),alt:r||"avatar",src:d||a||h,style:{width:"100%",maxHeight:"70vh",objectFit:"cover"}})})]})}},82979:function(e,a,t){"use strict";t.d(a,{A:function(){return o}});let s="undo redo",l="bold italic underline strikethrough",n="forecolor backcolor",i="alignleft aligncenter alignright alignjustify";a.Z="".concat(s," | customInsertButton | link | ").concat(l," | ").concat(n," | image | ").concat("fontfamily fontsize blocks"," | ").concat(i," | lineheight | numlist bullist | table tabledelete | tableprops tablerowprops tablecellprops | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol'");let o="".concat(s," | fontsize | ").concat(l," | ").concat(i," | ").concat(n," | code | link media image")},8123:function(e,a,t){"use strict";var s=t(85893),l=t(34223),n=t(66946);t(67294),a.Z=function(e){return(0,s.jsxs)("div",{className:"pt-5 pb-5",children:[(null==e?void 0:e.loading)&&(0,s.jsx)("div",{style:{width:"90%"},children:(0,s.jsx)(l.Z,{round:!0,active:!0})}),!(null==e?void 0:e.loading)&&(0,s.jsx)(n.Z,{description:!1,children:(0,s.jsx)("div",{className:"disable",children:"Kh\xf4ng c\xf3 dữ liệu"})})]})}},55128:function(e,a,t){"use strict";t.d(a,{Z:function(){return u}});var s=t(85893),l=t(31379),n=t(67294),i=t(90918),o=t(79930),r=t(58416),c=t(82979),d=e=>{let{initialValue:a,value:t,placeholder:l,handleChangeDataEditor:d,customFieldProps:u,disableButton:m,height:g,disabled:x}=e,h=(0,n.useRef)(null),b=e=>{d&&d(e)};(0,n.useEffect)(()=>{let e=e=>{null!==e.target.closest(".tox-tinymce-aux, .moxman-window, .tam-assetmanager-root")&&e.stopImmediatePropagation()};return document.addEventListener("focusin",e),()=>document.removeEventListener("focusin",e)},[]);let[v,f]=(0,n.useState)(!0);async function p(){await (0,r.Dc)(1e3),f(!1)}return(0,n.useEffect)(()=>{p()},[]),(0,s.jsx)("div",{className:"w-full h-fit",children:!v&&(0,s.jsx)(i.M,{id:(null==e?void 0:e.id)?null==e?void 0:e.id:"editor",onInit:(e,a)=>h.current=a,initialValue:a,onChange:e=>{},disabled:x,value:t,onEditorChange:e=>{b(e)},init:{images_file_types:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp",paste_preprocess:function(e,a){a.content.indexOf("<img ")>-1&&(a.content=a.content.replace(/<img[^>\"']*(((\"[^\"]*\")|('[^']*'))[^\"'>]*)*>/g,""))},inline:!1,plugins:"preview importcss searchreplace autolink autosave save directionality visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons image code",placeholder:l,toolbar:c.A,height:g||600,content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",menubar:!1,toolbar_mode:"sliding",toolbar_location:"top",toolbar_sticky:!0,font_family_formats:"Arial=arial,helvetica,sans-serif;Comic Sans MS=comic sans ms,sans-serif; Georgia=georgia,palatino; Helvetica=helvetica;Tahoma=tahoma,arial,helvetica,sans-serif; Verdana=verdana,geneva;",image_title:!0,file_picker_types:"image",images_upload_handler:async function(e){new FormData().append("files[]",e.blob()),m&&m(!0);try{let a=await o.X.uploadImage(e.blob());if(200==a.status)return new Promise((e,t)=>{e(a.data.data)})}catch(e){(0,r.fr)("error",e.message);return}finally{m&&m(!1)}},relative_urls:0,remove_script_host:0,convert_urls:!1,...u}})})},u=function(e){let{customFieldProps:a,onChangeEditor:t,disableButton:i,id:o,height:r,className:c}=e,{label:u,name:m,isRequired:g,disabled:x,rules:h,initialValue:b,placeholder:v}=e,[f,p]=(0,n.useState)("");return(0,s.jsx)(l.Z.Item,{className:c,name:m,required:g,rules:h,label:u,children:(0,s.jsx)(d,{initialValue:b,value:f,placeholder:v,handleChangeDataEditor:e=>{t&&(t(e),p(e))},customFieldProps:a,disabled:x,disableButton:i,id:o,height:r||300})})}},44315:function(e,a,t){"use strict";var s=t(85893),l=t(31379),n=t(74253);t(67294),a.Z=e=>{let{style:a,label:t,isRequired:i,className:o,allowClear:r,placeholder:c,disabled:d,name:u,rules:m,onChange:g,value:x}=e;return(0,s.jsx)(l.Z.Item,{name:u,style:a,label:t,className:"".concat(o),required:i,rules:m,children:(0,s.jsx)(n.default,{className:"primary-input ".concat(o),allowClear:r,placeholder:c,disabled:d,onChange:e=>{g&&g(e)},value:x,defaultValue:x})})}},5965:function(e,a,t){"use strict";var s=t(85893),l=t(16655),n=t(31379);a.Z=e=>{let{style:a,label:t,onChangeSelect:i,optionList:o,isRequired:r,className:c,placeholder:d,disabled:u,name:m,rules:g,mode:x,isLoading:h,maxTagCount:b}=e,{Option:v}=l.default,f=e=>{i&&i(e)};return(0,s.jsx)(n.Z.Item,{name:m,style:a,label:t,className:"".concat(c),required:r,rules:g,children:(0,s.jsx)(l.default,{mode:x,className:"primary-input ".concat(c),showSearch:!0,allowClear:!0,maxTagCount:b,loading:h,style:a,placeholder:d,optionFilterProp:"children",disabled:u,onChange:e=>{f(e)},children:o&&o.map((e,a)=>(0,s.jsx)(v,{disabled:u,value:e.value,children:e.title},a))})})}},58759:function(e,a,t){"use strict";var s=t(85893);t(67294),a.Z=e=>{let{id:a,children:t,content:l,className:n}=e;return(0,s.jsx)("a",{className:n||"","data-tooltip-id":"primary-tooltip","data-tooltip-content":l,children:t},a)}},3027:function(e,a,t){"use strict";var s=t(85893),l=t(69361),n=t(92493),i=t(49367),o=t(8285),r=t(84295),c=t(92594),d=t(18644),u=t(92088),m=t(54425),g=t(75985),x=t(22101),h=t(48506);a.Z=e=>{let{background:a,children:t,icon:b,type:v="button",onClick:f,className:p,disable:j,loading:N,iconClassName:w,mobileIconOnly:y}=e,z=w||"",S=()=>{"button"==v&&!j&&f&&f()};return(0,s.jsxs)("button",{disabled:!!j||!!N,type:v,onClick:e=>{switch(b){case"upload":case"excel":break;default:e.stopPropagation()}j||S()},className:"font-medium none-selection gap-[8px] rounded-lg h-[36px] px-[10px] inline-flex items-center justify-center !flex-shrink-0 ".concat(j||N?"bg-[#cacaca] hover:bg-[#bababa] focus:bg-[#acacac] cursor-not-allowed":"green"==a?"bg-[#4CAF50] hover:bg-[#449a48] focus:bg-[#38853b]":"blue"==a?"bg-[#0A89FF] hover:bg-[#157ddd] focus:bg-[#1576cf]":"red"==a?"!bg-[#C94A4F] hover:!bg-[#b43f43] focus:!bg-[#9f3136]":"yellow"==a?"bg-[#FFBA0A] hover:bg-[#e7ab11] focus:bg-[#d19b10]":"black"==a?"bg-[#000] hover:bg-[#191919] focus:bg-[#313131]":"primary"==a?"bg-[#1b73e8] hover:bg-[#1369da] focus:bg-[#1b73e8]":"purple"==a?"bg-[#8E24AA] hover:bg-[#7B1FA2] focus:bg-[#8E24AA]":"disabled"==a?"bg-[#cacaca] hover:bg-[#bababa] focus:bg-[#acacac] cursor-not-allowed":"orange"==a?"bg-[#FF9800] hover:bg-[#f49302] focus:bg-[#f49302] cursor-not-allowed":"transparent"==a?"bg-[] hover:bg-[] focus:bg-[]":"white"===a?"bg-[#ffffff] border-[1px] border-[#D6DAE1] hover:bg-[#D6DAE1] focus:bg-[#D6DAE1]":void 0," ").concat(j||N?"text-white":"green"==a||"blue"==a||"red"==a?"text-white ":"yellow"==a?"text-black":"black"==a||"primary"==a||"purple"==a||"disabled"==a?"text-white":void 0," ").concat(p," transition-all duration-300"),children:[!!N&&(0,s.jsx)(l.Z,{className:"loading-base !ml-0 !mt-[1px]"}),!!b&&!N&&("sort"==b?(0,s.jsx)(r.roE,{size:18,className:z}):"add"==b?(0,s.jsx)(n.Z,{size:18,className:z}):"cart"==b?(0,s.jsx)(h.fhZ,{size:20,className:z}):"edit"==b?(0,s.jsx)(c.vPQ,{size:18,className:z}):"cancel"==b?(0,s.jsx)(c.$Rx,{size:18,className:z}):"save"==b?(0,s.jsx)(c.mW3,{size:18,className:z}):"remove"==b?(0,s.jsx)(c.Ybf,{size:18,className:z}):"check"==b?(0,s.jsx)(i.KP3,{size:18,className:z}):"exchange"==b?(0,s.jsx)(m.F7l,{size:22,className:z}):"eye"==b?(0,s.jsx)(i.Zju,{size:20,className:z}):"print"==b?(0,s.jsx)(i.s4T,{size:20,className:z}):"hide"==b?(0,s.jsx)(o.nJ9,{size:18,className:z}):"file"==b?(0,s.jsx)(i.Ehc,{size:18,className:z}):"download"==b?(0,s.jsx)(h.HXz,{size:22,className:z}):"upload"==b?(0,s.jsx)(h.S7F,{size:22,className:z}):"reset"==b?(0,s.jsx)(o.oAZ,{size:20,className:z}):"search"==b?(0,s.jsx)(o.wnI,{size:20,className:z}):"excel"==b?(0,s.jsx)(x.bBH,{size:18,className:z}):"power"==b?(0,s.jsx)(d.y1A,{size:20,className:z}):"enter"==b?(0,s.jsx)(d.Wem,{size:20,className:z}):"send"==b?(0,s.jsx)(c.LbG,{size:18,className:z}):"payment"==b?(0,s.jsx)(u.IDG,{size:18,className:z}):"arrow-up"==b?(0,s.jsx)(m.Tvk,{size:18,className:z}):"arrow-down"==b?(0,s.jsx)(m.ebp,{size:18,className:z}):"calculate"==b?(0,s.jsx)(m.eAe,{size:18,className:z}):"full-screen"==b?(0,s.jsx)(u.Mmr,{size:18,className:z}):"restore-screen"==b?(0,s.jsx)(u.nyS,{size:18,className:z}):"input"==b?(0,s.jsx)(g.j6p,{size:18,className:z}):"mic"==b?(0,s.jsx)(d.RU_,{size:25,className:z}):"exportPDF"===b?(0,s.jsx)(r.yRW,{size:16,className:z}):void 0),y?(0,s.jsx)("div",{className:"hidden w600:inline",children:t}):t]})}},64735:function(e,a,t){"use strict";var s=t(85893),l=t(67294),n=t(32655),i=t(62944),o=t(30833),r=t(78268),c=t(31181),d=t(80181),u=t(32941),m=t(49367),g=t(8285),x=t(65890),h=t(62914),b=t(78773),v=t(92594),f=t(85340),p=t(92088),j=t(54425),N=t(48506),w=t(43291),y=t(11583),z=t(58759);a.Z=e=>{let{tooltip:a,background:t,icon:S,type:I,onClick:F,className:C,color:Z,size:k,disabled:A,placementTooltip:P}=e;return(0,l.useRef)(null),(0,s.jsx)(z.Z,{className:"z-[100]",place:P||"top",content:a,id:"".concat(crypto.randomUUID()),children:(0,s.jsx)("button",{type:I,onClick:!A&&(e=>{"button"==I&&F&&F(e)}),className:"none-selection rounded-lg w-auto inline-flex items-center btn-icon cursor-pointer ".concat("green"==t?"bg-[#4CAF50] hover:bg-[#449a48] focus:bg-[#38853b]":"blue"==t?"bg-[#0A89FF] hover:bg-[#157ddd] focus:bg-[#1576cf]":"red"==t?"bg-[#C94A4F] hover:bg-[#b43f43] focus:bg-[#9f3136]":"yellow"==t?"bg-[#FFBA0A] hover:bg-[#e7ab11] focus:bg-[#d19b10]":"black"==t?"bg-[#000] hover:bg-[#191919] focus:bg-[#313131]":"primary"==t?"bg-[#ab1d38] hover:bg-[#9a1b33] focus:bg-[#85172c]":"purple"==t?"bg-[#800080] hover:bg-[#660066] focus:bg-[#4c004c]":"disabled"==t?"bg-[#cacaca] hover:bg-[#bababa] focus:bg-[#acacac] cursor-not-allowed":"bg-transparent"," ").concat("purple"==Z?"text-[#800080] hover:text-[#660066] focus:text-[#4c004c]":"white"==Z?"text-[#fff] hover:text-[#fff] focus:text-[#fff]":"green"==Z?"text-[#4CAF50] hover:text-[#449a48] focus:text-[#38853b]":"blue"==Z?"text-[#0A89FF] hover:text-[#157ddd] focus:text-[#1576cf]":"red"==Z?"text-[#C94A4F] hover:text-[#b43f43] focus:text-[#9f3136]":"yellow"==Z?"text-[#FFBA0A] hover:text-[#e7ab11] focus:text-[#d19b10]":"black"==Z?"text-[#000] hover:text-[#191919] focus:text-[#313131]":"primary"==Z?"text-[#ab1d38] hover:text-[#9a1b33] focus:text-[#85172c]":"disabled"==Z?"text-[#cacaca] hover:text-[#bababa] focus:text-[#acacac] cursor-not-allowed":"transparent"==Z?"text-transparent":void 0," ").concat(C),children:!!S&&("add"==S?(0,s.jsx)(h.DFN,{size:k||22}):"edit"==S?(0,s.jsx)(n.Z,{size:20}):"warning"==S?(0,s.jsx)(w.fB,{size:k||22}):"edit3"==S?(0,s.jsx)(i.Z,{size:20}):"remove"==S?(0,s.jsx)(o.Z,{size:20}):"check"==S?(0,s.jsx)(m.KP3,{size:k||22}):"eye"==S?(0,s.jsx)(m.Zju,{size:k||22}):"exchange"==S?(0,s.jsx)(j.F7l,{size:k||24}):"more"==S?(0,s.jsx)(v.$Pu,{size:k||22}):"document"==S?(0,s.jsx)(h.K46,{size:k||22}):"download"==S?(0,s.jsx)(N.HXz,{size:k||22}):"filter"==S?(0,s.jsx)(f.Yv7,{size:k||22}):"menu"==S?(0,s.jsx)(v.cur,{}):"upload"==S?(0,s.jsx)(N.S7F,{size:k||22}):"cancel"==S?(0,s.jsx)(p.xg7,{size:k||22}):"x"==S?(0,s.jsx)(r.Z,{className:"mt-[0.5px] mb-[-1px]",size:k||22}):"login"==S?(0,s.jsx)(c.Z,{className:"mt-[0.5px] mb-[-1px]",size:k||22}):"send"==S?(0,s.jsx)(v.LbG,{size:22}):"file"==S?(0,s.jsx)(d.Z,{className:"mt-[0.5px] mb-[-1px]",size:k||22}):"print"==S?(0,s.jsx)(v.ViN,{className:"mt-[0.5px] mb-[-1px]",size:k||22}):"user-group"==S?(0,s.jsx)(m.Zev,{size:k||22}):"book"==S?(0,s.jsx)(u.Z,{size:k||20}):"info"==S?(0,s.jsx)(m.ocf,{size:k||20}):"save"==S?(0,s.jsx)(v.mW3,{size:k||20}):"up-arrow"==S?(0,s.jsx)(v.OeJ,{size:k||20}):"down-arrow"==S?(0,s.jsx)(v.UJB,{size:k||20}):"tutoring"==S?(0,s.jsx)(b.FcZ,{size:k||20}):"reset"==S?(0,s.jsx)(g.oAZ,{size:k||20}):"study"==S?(0,s.jsx)(N.EW2,{size:k||20}):"note"==S?(0,s.jsx)(b.KPP,{size:k||19}):"hide"==S?(0,s.jsx)(y.m$g,{size:k||20}):"salary"==S?(0,s.jsx)(N.b2g,{size:k||20}):"history"==S?(0,s.jsx)(x.NbQ,{size:k||20}):void 0)})})}},52814:function(e,a,t){"use strict";var s=t(85893),l=t(96361),n=t(28210),i=t(67294),o=t(41570),r=t(8123),c=t(58416);a.Z=e=>{var a,t,d,u,m;let{title:g,extra:x,TitleCard:h,Extra:b,expandableProps:v={},uniqueIdKey:f="Id"}=e,[p,j]=(0,i.useState)({selectedRowKeys:[]}),[N,w]=(0,i.useState)([]),[y,z]=(0,i.useState)([{currentPage:1,listKeys:[]}]),[S,I]=(0,i.useState)(null),F=()=>{z([{currentPage:1,listKeys:[]}])},C=e=>{let a=[];a.indexOf(e.key)>=0?a.splice(a.indexOf(e.key),1):a.push(e.key),j({selectedRowKeys:a})},Z=(a,t)=>{if(y.some(e=>e.currentPage==a)||y.push({currentPage:a,listKeys:[]}),z([...y]),void 0===(null==e?void 0:e.getPagination))return a;null==e||e.getPagination(a,t)},k={selectedRowKeys:null==p?void 0:p.selectedRowKeys,onChange:(a,t)=>{(null==e?void 0:e.onSelectRow(t))&&(null==e||e.onSelectRow(t)),j({selectedRowKeys:a})},hideSelectAll:!1};(0,i.useEffect)(()=>{if((null==e?void 0:e.dataSource)&&(null==e?void 0:e.dataSource.length)>0){let a=[...null==e?void 0:e.dataSource];a.forEach((e,t)=>{a[t]={...e,key:t+"",uniqueId:e[f]}}),w(a)}else w([])},[null==e?void 0:e.dataSource]),(0,i.useEffect)(()=>{(null==e?void 0:e.closeAllExpand)&&F()},[null==e?void 0:e.closeAllExpand]),(0,i.useEffect)(()=>{(null==e?void 0:e.isResetKey)&&j({selectedRowKeys:[]})},[null==e?void 0:e.isResetKey]);let A=(null==e?void 0:e.height)||(null===(a=window)||void 0===a?void 0:a.innerHeight)-295;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"wrap-table table-expand",children:(0,s.jsxs)(l.Z,{className:"cardRadius ".concat((null==e?void 0:e.addClass)&&(null==e?void 0:e.addClass)," ").concat((null==e?void 0:e.Size)?null==e?void 0:e.Size:""),extra:x||b,title:g||h,style:null==e?void 0:e.cardStyle,children:[null==e?void 0:e.children,!!(null==e?void 0:e.sumPrice)&&(0,s.jsxs)("div",{className:"statistical-contain",children:[(0,s.jsxs)("div",{className:"item total-income",children:[(0,s.jsxs)("div",{className:"text",children:[(0,s.jsx)("div",{className:"name",children:"Tổng nợ"}),(0,s.jsxs)("div",{className:"number",children:[c.Jy.numberToPrice((null==e?void 0:null===(m=e.sumPrice)||void 0===m?void 0:m.sumDebt)||0),"₫"]})]}),(0,s.jsx)("div",{className:"icon",children:(0,s.jsx)(o.BUm,{})})]}),(0,s.jsxs)("div",{className:"item total-expense",children:[(0,s.jsxs)("div",{className:"text",children:[(0,s.jsx)("p",{className:"name",children:"Tổng thanh to\xe1n"}),(0,s.jsxs)("p",{className:"number",children:[c.Jy.numberToPrice((null==e?void 0:e.sumPrice.sumPaid)||0),"₫"]})]}),(0,s.jsx)("div",{className:"icon",children:(0,s.jsx)(o.CtB,{})})]}),(0,s.jsxs)("div",{className:"item total-revenue",children:[(0,s.jsxs)("div",{className:"text",children:[(0,s.jsx)("p",{className:"name",children:"Tổng tiền"}),(0,s.jsxs)("p",{className:"number",children:[c.Jy.numberToPrice((null==e?void 0:e.sumPrice.sumtotalPrice)||0),"₫"]})]}),(0,s.jsx)("div",{className:"icon",children:(0,s.jsx)(o.gnI,{})})]})]}),0==N.length&&(0,s.jsx)(r.Z,{loading:(null==e?void 0:null===(t=e.loading)||void 0===t?void 0:t.status)||(null==e?void 0:e.loading)==!0}),N.length>0&&(0,s.jsx)(n.Z,{loading:(null==e?void 0:null===(d=e.loading)||void 0===d?void 0:d.type)=="GET_ALL"&&(null==e?void 0:null===(u=e.loading)||void 0===u?void 0:u.status)||(null==e?void 0:e.loading)==!0,bordered:null!=e&&!!e.haveBorder&&(null==e?void 0:e.haveBorder),scroll:{x:"max-content",y:(A<300?300:A)||200},columns:((null==e?void 0:e.columns)||[]).filter(e=>!(null==e?void 0:e.hidden)),dataSource:N||[],size:"middle",onChange:(null==e?void 0:e.onChange)?null==e?void 0:e.onChange:()=>{},pagination:{pageSize:30,pageSizeOptions:["30"],onShowSizeChange:(a,t)=>{(null==e?void 0:e.onChangePageSize)&&(null==e||e.onChangePageSize(a,t))},total:(null==e?void 0:e.totalPage)?null==e?void 0:e.totalPage:1,showTotal:()=>(0,s.jsxs)("div",{className:"font-weight-black",children:["Tổng cộng: ",(null==e?void 0:e.totalPage)||1]}),onChange:(e,a)=>Z(e,a),current:(null==e?void 0:e.currentPage)&&(null==e?void 0:e.currentPage)},rowKey:"uniqueId",rowClassName:(e,a)=>a==S?"table-row-active":a%2==0?"table-row-light":"table-row-dark",onRow:(e,a)=>({onClick:()=>{C(e),I(a)}}),rowSelection:(null==e?void 0:e.rowSelection)?null==e?void 0:e.rowSelection:(null==e?void 0:e.isSelect)?k:null,onExpand:(a,t)=>{void 0!==(null==e?void 0:e.handleExpand)&&(null==e||e.handleExpand(t))},expandable:{expandedRowRender:null==e?void 0:e.expandable,rowExpandable:e=>"Not Expandable"!==e.name,...v}})]})})})}},28719:function(e,a,t){"use strict";t.d(a,{e:function(){return d}});var s=t(78551),l=t(9473),n=t(58416),i=t(25773),o=t(62811),r=t(42006);let c=async(e,a)=>{if((0,r.is)(a).student||(0,r.is)(a).parent)return[];try{let a=await i.Z.getAll({pageSize:9999});if(200==a.status)return e((0,o.t)(a.data.data)),a.data.data}catch(e){return(0,n.fr)("error",e.message),[]}};function d(){var e;let a=(0,l.I0)(),t=(0,l.v9)(e=>{var a;return null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.information}),n=(0,s.a)({queryKey:["USE_BRANCH"],queryFn:()=>c(a,t),enabled:!0});return{...n,branches:(null==n?void 0:n.data)||[],selectBranches:(e=n.data)?e.map(e=>({value:null==e?void 0:e.Id,title:null==e?void 0:e.Name})):[]}}},39292:function(e,a,t){"use strict";t.d(a,{I:function(){return s}});let s=30},17298:function(e,a,t){"use strict";t.d(a,{i:function(){return s},l:function(){return l}});let s=[{required:!0,message:"Kh\xf4ng được để trống"}],l=[{required:!1}]},25871:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return D}});var s=t(85893),l=t(67294),n=t(26674),i=t(30381),o=t.n(i),r=t(30653),c=t(59178);let d="/api/GeneralNotification",u={getAll:e=>c.e.get(d,{params:e}),getReceiverById:e=>c.e.get("".concat(d,"/receiver/").concat(e)),add:e=>c.e.post(d,e)};var m=t(31379),g=t(96361),x=t(78449),h=t(16655),b=t(75714),v=t(9542),f=t(88291),p=t(28719),j=t(17298),N=t(58416),w=t(42006),y=t(55128),z=t(44315),S=t(5965),I=t(3027),F=e=>{var a;let{getAllGeneralNotifications:t}=e,[n]=m.Z.useForm(),[i,o]=(0,l.useState)([]),[r,c]=(0,l.useState)([]),[d,F]=(0,l.useState)(!1),[C,Z]=(0,l.useState)(!1),[k,A]=(0,l.useState)(!1),P=(0,b.qo)("roleIds",n);console.log("branchIds",(0,b.qo)("branchIds",n));let E="";d&&(E="Đang tải dữ liệu..."),(null==P?void 0:P.length)===0&&(E="Vui l\xf2ng chọn chức vụ trước");let{selectBranches:_,branches:T}=(0,p.e)(),R=async()=>{try{let e=await v.p.getRolePermission();if(200===e.status){let a=(0,w.vn)(e.data.data,"Name","Id");o(a)}204===e.status&&o([])}catch(e){(0,N.fr)("error",e.message)}};(0,l.useEffect)(()=>{R()},[]),(0,l.useEffect)(()=>{if(T){let e=_.map(e=>e.value);n.setFieldsValue({branchIds:e})}},[T]),(0,l.useEffect)(()=>{if(C){let e=null==r?void 0:r.map(e=>e.value);n.setFieldsValue({UserIds:e})}else n.setFieldsValue({UserIds:[]})},[C]);let B=async(e,a)=>{var t,s,l,i;if(console.log("name, value",e,a),Z(!1),(null===(t=n.getFieldValue("branchIds"))||void 0===t?void 0:t.length)>0&&(null===(s=n.getFieldValue("roleIds"))||void 0===s?void 0:s.length)>0){F(!0),n.setFieldValue("UserIds",[]);try{let e={branchIds:n.getFieldValue("branchIds").join(","),roleIds:n.getFieldValue("roleIds").join(",")},a=await f.sy.getAll(e);if(200===a.status){let e=null==a?void 0:null===(i=a.data)||void 0===i?void 0:null===(l=i.data)||void 0===l?void 0:l.map(e=>({label:"".concat(null==e?void 0:e.UserCode,"  - ").concat(null==e?void 0:e.FullName),value:null==e?void 0:e.UserInformationId}));c(e)}204===a.status&&c([])}catch(e){(0,N.fr)("error",e.message)}F(!1)}else c([]),n.setFieldValue("UserIds",[])},D=async e=>{A(!0);try{let a={Content:e.Content,Title:e.Title,UserIds:e.UserIds.length>0?e.UserIds.join(","):"",IsSendMail:e.IsSendMail},s=await u.add(a);200===s.status&&(Z(!1),n.resetFields(),t(),(0,N.fr)("success",s.data.message))}catch(e){(0,N.fr)("error",e.message)}finally{A(!1)}};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(g.Z,{title:"Tạo th\xf4ng b\xe1o",children:(0,s.jsxs)(m.Z,{scrollToFirstError:!0,layout:"vertical",form:n,onFinish:D,initialValues:{IsSendMail:!1},children:[(0,s.jsxs)("div",{className:"grid gap-4 grid-cols-2",children:[(0,s.jsx)(S.Z,{className:"col-span-1 antd-custom-wrap",label:"Trung t\xe2m ".concat((null===(a=window)||void 0===a?void 0:a.innerWidth)<767?"":"(Mặc định tất cả)"),name:"branchIds",mode:"multiple",optionList:_,onChangeSelect:e=>B("branchIds",e)}),(0,s.jsx)(S.Z,{className:"col-span-1 antd-custom-wrap",mode:"multiple",name:"roleIds",label:"Chức vụ",optionList:i,onChangeSelect:e=>B("roleIds",e)})]}),(0,s.jsx)(m.Z.Item,{rules:j.i,extra:(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("span",{className:"mr-2",children:"Chọn tất cả"}),(0,s.jsx)(x.Z,{checked:C,onChange:e=>{Z(e)}})]}),label:(0,s.jsx)("div",{className:"antd-custom-wrap ant-form-item-label flex items-center justify-between",children:(0,s.jsx)("span",{children:"T\xe0i khoản"})}),name:"UserIds",children:(0,s.jsx)(h.default,{className:"primary-input",mode:"multiple",allowClear:!0,placeholder:E,loading:d,options:r})}),(0,s.jsx)(z.Z,{name:"Title",label:"Ti\xeau đề"}),(0,s.jsx)(y.Z,{name:"Content",label:"Nội dung",onChangeEditor:e=>n.setFieldsValue({Content:e})}),(0,s.jsxs)("div",{className:"antd-custom-wrap ant-form-item-label flex items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)(m.Z.Item,{name:"IsSendMail",children:[(0,s.jsx)(x.Z,{onChange:e=>n.setFieldsValue({IsSendMail:e})}),(0,s.jsx)("label",{className:"!ml-2",children:"Gửi mail"})]})}),(0,s.jsx)(I.Z,{background:"blue",type:"submit",icon:"save",disable:k,loading:k,children:"Tạo ngay"})]})]})})})},C=t(26334),Z=t(63237),k=t(82373),A=t(64735),P=e=>{let{dataRow:a}=e,[t]=m.Z.useForm(),[n,i]=(0,l.useState)(!1),[o,r]=(0,l.useState)([]),c=()=>{i(!1)},d=async e=>{try{let a=await u.getReceiverById(e);200===a.status&&r(a.data.data),204===a.status&&r([])}catch(e){(0,N.fr)("error",e.message)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.Z,{color:"blue",tooltip:"Danh s\xe1ch người nhận",onClick:()=>{d(null==a?void 0:a.Id),i(!0)},icon:"eye",type:"button"}),(0,s.jsx)(Z.Z,{title:"Danh s\xe1ch người nhận",open:n,onCancel:c,footer:(0,s.jsx)("button",{onClick:c,className:"btn btn-primary",children:"Đ\xf3ng"}),width:800,children:(0,s.jsx)("div",{className:"max-h-[600px] scrollable grid grid-cols-3 gap-2 pr-2",children:null==o?void 0:o.map(e=>(0,s.jsxs)("div",{className:"p-2 rounded bg-[#f0f0f080] flex gap-3",children:[(0,s.jsx)(k.Z,{alt:"",uri:null==e?void 0:e.Avatar,className:"h-12 w-12 object-cover rounded-full"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium",children:null==e?void 0:e.FullName}),(0,s.jsx)(C.Z,{color:"blue",className:"rounded",children:null==e?void 0:e.UserCode})]})]},e.id))})})]})},E=t(52814),_=t(39292);let T=1;var R=()=>{let e={pageSize:_.I,pageIndex:1},[a,t]=(0,l.useState)(e),[n,i]=(0,l.useState)(!1),[c,d]=(0,l.useState)(1),[m,g]=(0,l.useState)([]),[x,h]=(0,l.useState)(0),b=async()=>{i(!0);try{let a=await u.getAll(e);200===a.status&&(g(a.data.data),h(a.data.totalRow)),204===a.status&&g([])}catch(e){(0,N.fr)("error",e.message)}finally{i(!1)}};(0,l.useEffect)(()=>{b()},[a]);let v=[{title:"Ng\xe0y gửi th\xf4ng b\xe1o",dataIndex:"CreatedOn",render:e=>(0,s.jsx)("p",{className:"font-weight-black",children:o()(e).format("HH:mm DD/MM/YYYY")})},{title:"Ti\xeau đề",dataIndex:"Title"},{title:"Người gửi",className:"min-w-[90px]",dataIndex:"CreatedBy"},{title:"Chức năng",width:100,align:"center",render:e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(P,{dataRow:e})})}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{getAllGeneralNotifications:b}),(0,s.jsx)("div",{style:{marginTop:"24px"},children:(0,s.jsx)(E.Z,{currentPage:c,loading:n,columns:v,dataSource:m,totalPage:x,title:"Lịch sử th\xf4ng b\xe1o",getPagination:(e,s)=>{s||(s=10),T=e,d(e),t({...a,pageIndex:T,pageSize:s})},expandable:(e,a)=>(0,s.jsxs)("div",{className:"pt-2 pb-2",children:[(0,s.jsx)("span",{className:"weight-600",children:"Nội dung:"})," ",(0,r.ZP)(null==e?void 0:e.Content)]})})})]})};let B=()=>(0,s.jsx)(R,{});B.Layout=n.C;var D=B}},function(e){e.O(0,[6130,4838,7909,8391,5970,6660,4396,4817,594,3365,8151,1653,4321,2961,4738,648,8127,8460,9915,6565,653,6655,1607,6361,5009,4253,9872,1379,861,8675,8210,1178,9137,6954,2888,9774,179],function(){return e(e.s=16654)}),_N_E=e.O()}]);