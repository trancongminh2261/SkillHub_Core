(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1466,391],{2347:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/finance/payment",function(){return n(46976)}])},4854:function(e,t,n){"use strict";n.d(t,{n:function(){return s}});var l=n(59178);let a="/api/PaymentMethod",s={getAll:e=>l.e.get(a,{params:e}),getByID:e=>l.e.get("".concat(a,"/").concat(e)),update:e=>l.e.put(a,e,{})}},97382:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var l=n(59178);let a="/api/PaymentSession",s="/api/PaymentSession/v2",i={keyGetPaymentSessionBill:"GET /api/PaymentSession/get_paymentSession_billId",getAll:e=>l.e.get(a,{params:e}),getAllV2:e=>l.e.get(s,{params:e}),getByID:e=>l.e.get("".concat(a,"/").concat(e)),add:e=>l.e.post(a,e),update:e=>l.e.put(a,e),delete:e=>l.e.delete("".concat(a,"/").concat(e)),addV2:e=>l.e.post(s,e),updateV2:e=>l.e.put(s,e),getPaymentSessionBill:e=>l.e.get("".concat(a,"/get_paymentSession_billId"),{params:e})}},67359:function(e,t,n){"use strict";var l=n(85893),a=n(84969),s=n(29726),i=n(78551),r=n(69361),c=n(67294),d=n(3516),o=n(42006);let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new Set([...t]);for(let t of e)n.has(t.value)&&n.delete(t.value);return Array.from(n)};t.Z=e=>{var t;let{fetchFn:n,queryKey:x,fetchActivelyFn:h,value:m,...p}=e,[v,g]=(0,c.useState)(""),[f,j]=(0,c.useState)(""),y=(0,c.useMemo)(()=>(0,o.vE)(500),[]),{data:b,fetchNextPage:N,hasNextPage:w,isFetching:S,isLoading:I,isFetchingNextPage:P}=(0,s.N)({queryKey:[...x,f],queryFn:e=>{let{pageParam:t}=e;return n({pageParam:t,textSearchDebounced:f})},initialPageParam:1,getNextPageParam:(e,t,n)=>{var l;let a=null==t?void 0:null===(l=t[0])||void 0===l?void 0:l.totalRow;if(!(t.flatMap(e=>(null==e?void 0:e.data)||[]).length>=a))return n+1}}),C=(0,c.useMemo)(()=>{var e;return(null==b?void 0:null===(e=b.pages)||void 0===e?void 0:e.flatMap(e=>(null==e?void 0:e.data)||[]))||[]},[b,null==b?void 0:null===(t=b.pages)||void 0===t?void 0:t.length]),_=(0,c.useMemo)(()=>u(C,Array.isArray(m)?m:[m]),[C,m]),{data:D,isLoading:T}=(0,i.a)({queryKey:[...x,"detail",_],queryFn:()=>h(_),enabled:!!(_.length>0&&h&&m)}),Z=async e=>{let t=e.target,n=t.scrollTop+t.offsetHeight===t.scrollHeight;!(S||P||I)&&n&&w&&N()},F=0===_.length?C:[...D||[],...C];return console.log("currentOptions",F),(0,l.jsx)(d.Z,{showSearch:!0,filterOption:!1,value:m,searchValue:v,onSearch:e=>{g(e),y(()=>{j(e)})},onPopupScroll:Z,notFoundContent:I?(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsx)(r.Z,{})}):void 0,loading:I||T,options:F,dropdownRender:e=>(0,l.jsxs)(l.Fragment,{children:[e,P&&(0,l.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,l.jsx)(r.Z,{indicator:(0,l.jsx)(a.Z,{style:{color:"black",fontSize:"12px"},spin:!0})}),(0,l.jsx)("span",{className:"font-medium",children:"Đang tải..."})]})]}),optionFilterProp:"label",...p})}},82373:function(e,t,n){"use strict";var l=n(85893),a=n(67294),s=n(63237);t.Z=e=>{let{uri:t,className:n,disabled:i,isThumbnail:r,alt:c,resizedImage:d}=e,[o,u]=(0,a.useState)(""),[x,h]=(0,a.useState)(!1);function m(){!i&&(o||t)&&h(!x)}let p=r?"/default-thumbnail.png":"/default-avatar.png";return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("img",{onClick:m,onError:()=>u(p),alt:"avatar",src:o||d||t||p,className:n,style:{cursor:o||t?"pointer":"default",borderStyle:t?"solid":"none"}}),(0,l.jsx)(s.Z,{closable:!1,title:null,width:700,open:x,onCancel:m,footer:null,children:(0,l.jsx)("img",{onError:()=>u(p),alt:c||"avatar",src:o||t||p,style:{width:"100%",maxHeight:"70vh",objectFit:"cover"}})})]})}},22471:function(e,t,n){"use strict";var l=n(85893),a=n(67294),s=n(72548),i=n(48895),r=n(39292),c=n(58416),d=n(42006);t.Z=e=>{let{bill:t}=e,[n,o]=a.useState(1),[u,x]=a.useState(null),[h,m]=a.useState({PageSize:r.I,PageIndex:1,Search:""});async function p(){try{let e=await s.Z.getByID("Bill/detail",null==t?void 0:t.Id);200==e.status?(x(e.data.data),o(e.data.totalRow)):(x(null),o(1))}catch(e){c.Gu.error(null==e?void 0:e.message)}}(0,a.useEffect)(()=>{p()},[]);let v=[{title:"Gi\xe1 tiền",dataIndex:"Price",width:116,render:(e,t)=>(0,l.jsx)("p",{className:"font-[600] text-[#000]",children:(0,d.HP)(e)})},{title:"Tổng số tiền",dataIndex:"TotalPrice",width:116,render:(e,t)=>(0,l.jsx)("p",{className:"font-[600] text-[#000]",children:(0,d.HP)(e)})},{title:"Số lượng",dataIndex:"Quantity",width:126}];console.log("bill?.Type: ",null==t?void 0:t.Type);let g=(null==t?void 0:t.Type)==6?[{title:"Gi\xe1 tiền",dataIndex:"Price",width:116,render:(e,t)=>(0,l.jsx)("p",{className:"font-[600] text-[#000]",children:(0,d.HP)(e)})},{title:"Lớp cũ",dataIndex:"OldClassName",width:126},{title:"Lớp mới",dataIndex:"NewClassName",width:126}]:(null==t?void 0:t.Type)==1?[{title:"Lớp",dataIndex:"ClassName",width:130,render:(e,t)=>(0,l.jsx)("p",{className:"font-[600] text-[#1E88E5]",children:e})},{title:"Chương tr\xecnh học",dataIndex:"ProgramName",width:130,render:(e,t)=>(0,l.jsx)("p",{className:"font-[600] text-[#1E88E5]",children:e})},...v]:(null==t?void 0:t.Type)==2?[{title:"Sản phẩm",dataIndex:"ProductName",width:130,render:(e,t)=>(0,l.jsx)("p",{className:"font-[600] text-[#1E88E5]",children:e})},...v]:[{title:"Gi\xe1o tr\xecnh",dataIndex:"CurriculumName",width:130,render:(e,t)=>(0,l.jsx)("p",{className:"font-[600] text-[#1E88E5]",children:e})},{title:"Chương tr\xecnh học",dataIndex:"ProgramName",width:130,render:(e,t)=>(0,l.jsx)("p",{className:"font-[600] text-[#1E88E5]",children:e})},...v];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"font-[600]",children:"Ghi ch\xfa:"})," ",null==t?void 0:t.Note,(null==t?void 0:t.Type)!==4&&(0,l.jsx)("div",{className:"w-[1200px] !ml-[-10px]",children:(0,l.jsx)(i.Z,{current:h.PageIndex,total:n&&n,onChangePage:e=>m({...h,PageIndex:e}),data:u,columns:(null==t?void 0:t.Type)==5?[{title:"Lớp",dataIndex:"ClassName",width:80,render:(e,t,n)=>(0,l.jsx)("div",{className:"min-w-[80px] text-[#1b73e8] font-[600]",children:e})},{title:"Gi\xe1 tiền",dataIndex:"Price",width:116,render:(e,t)=>(0,l.jsx)("p",{className:"font-[600] text-[#000]",children:(0,d.HP)(e)})},{title:"Tổng số tiền",dataIndex:"TotalPrice",width:116,render:(e,t)=>(0,l.jsx)("p",{className:"font-[600] text-[#000]",children:(0,d.HP)(e)})},{title:"Số th\xe1ng",dataIndex:"Quantity",width:126}]:g})})]})}},46916:function(e,t,n){"use strict";var l=n(85893),a=n(31379),s=n(57333);t.Z=e=>{let{style:t,label:n,isRequired:i,className:r,placeholder:c,disabled:d,name:o,rules:u,max:x,onChange:h,onValueChange:m,allowNegative:p,type:v,value:g}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(a.Z.Item,{name:o,style:t,label:n,className:"".concat(r),required:i,rules:u,children:(0,l.jsx)(s.h3,{onChange:h,onValueChange:m,placeholder:c,disabled:d,thousandSeparator:!0,allowNegative:p||!1,className:"w-full is-error px-[11px] py-[4px] primary-input ".concat(r),isAllowed:e=>{if(!x)return!0;{let{formattedValue:t,floatValue:n}=e;return""===t||n<=x}}})})})}},52814:function(e,t,n){"use strict";var l=n(85893),a=n(96361),s=n(28210),i=n(67294),r=n(41570),c=n(8123),d=n(58416);t.Z=e=>{var t,n,o,u,x;let{title:h,extra:m,TitleCard:p,Extra:v,expandableProps:g={},uniqueIdKey:f="Id"}=e,[j,y]=(0,i.useState)({selectedRowKeys:[]}),[b,N]=(0,i.useState)([]),[w,S]=(0,i.useState)([{currentPage:1,listKeys:[]}]),[I,P]=(0,i.useState)(null),C=()=>{S([{currentPage:1,listKeys:[]}])},_=e=>{let t=[];t.indexOf(e.key)>=0?t.splice(t.indexOf(e.key),1):t.push(e.key),y({selectedRowKeys:t})},D=(t,n)=>{if(w.some(e=>e.currentPage==t)||w.push({currentPage:t,listKeys:[]}),S([...w]),void 0===(null==e?void 0:e.getPagination))return t;null==e||e.getPagination(t,n)},T={selectedRowKeys:null==j?void 0:j.selectedRowKeys,onChange:(t,n)=>{(null==e?void 0:e.onSelectRow(n))&&(null==e||e.onSelectRow(n)),y({selectedRowKeys:t})},hideSelectAll:!1};(0,i.useEffect)(()=>{if((null==e?void 0:e.dataSource)&&(null==e?void 0:e.dataSource.length)>0){let t=[...null==e?void 0:e.dataSource];t.forEach((e,n)=>{t[n]={...e,key:n+"",uniqueId:e[f]}}),N(t)}else N([])},[null==e?void 0:e.dataSource]),(0,i.useEffect)(()=>{(null==e?void 0:e.closeAllExpand)&&C()},[null==e?void 0:e.closeAllExpand]),(0,i.useEffect)(()=>{(null==e?void 0:e.isResetKey)&&y({selectedRowKeys:[]})},[null==e?void 0:e.isResetKey]);let Z=(null==e?void 0:e.height)||(null===(t=window)||void 0===t?void 0:t.innerHeight)-295;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"wrap-table table-expand",children:(0,l.jsxs)(a.Z,{className:"cardRadius ".concat((null==e?void 0:e.addClass)&&(null==e?void 0:e.addClass)," ").concat((null==e?void 0:e.Size)?null==e?void 0:e.Size:""),extra:m||v,title:h||p,style:null==e?void 0:e.cardStyle,children:[null==e?void 0:e.children,!!(null==e?void 0:e.sumPrice)&&(0,l.jsxs)("div",{className:"statistical-contain",children:[(0,l.jsxs)("div",{className:"item total-income",children:[(0,l.jsxs)("div",{className:"text",children:[(0,l.jsx)("div",{className:"name",children:"Tổng nợ"}),(0,l.jsxs)("div",{className:"number",children:[d.Jy.numberToPrice((null==e?void 0:null===(x=e.sumPrice)||void 0===x?void 0:x.sumDebt)||0),"₫"]})]}),(0,l.jsx)("div",{className:"icon",children:(0,l.jsx)(r.BUm,{})})]}),(0,l.jsxs)("div",{className:"item total-expense",children:[(0,l.jsxs)("div",{className:"text",children:[(0,l.jsx)("p",{className:"name",children:"Tổng thanh to\xe1n"}),(0,l.jsxs)("p",{className:"number",children:[d.Jy.numberToPrice((null==e?void 0:e.sumPrice.sumPaid)||0),"₫"]})]}),(0,l.jsx)("div",{className:"icon",children:(0,l.jsx)(r.CtB,{})})]}),(0,l.jsxs)("div",{className:"item total-revenue",children:[(0,l.jsxs)("div",{className:"text",children:[(0,l.jsx)("p",{className:"name",children:"Tổng tiền"}),(0,l.jsxs)("p",{className:"number",children:[d.Jy.numberToPrice((null==e?void 0:e.sumPrice.sumtotalPrice)||0),"₫"]})]}),(0,l.jsx)("div",{className:"icon",children:(0,l.jsx)(r.gnI,{})})]})]}),0==b.length&&(0,l.jsx)(c.Z,{loading:(null==e?void 0:null===(n=e.loading)||void 0===n?void 0:n.status)||(null==e?void 0:e.loading)==!0}),b.length>0&&(0,l.jsx)(s.Z,{loading:(null==e?void 0:null===(o=e.loading)||void 0===o?void 0:o.type)=="GET_ALL"&&(null==e?void 0:null===(u=e.loading)||void 0===u?void 0:u.status)||(null==e?void 0:e.loading)==!0,bordered:null!=e&&!!e.haveBorder&&(null==e?void 0:e.haveBorder),scroll:{x:"max-content",y:(Z<300?300:Z)||200},columns:((null==e?void 0:e.columns)||[]).filter(e=>!(null==e?void 0:e.hidden)),dataSource:b||[],size:"middle",onChange:(null==e?void 0:e.onChange)?null==e?void 0:e.onChange:()=>{},pagination:{pageSize:30,pageSizeOptions:["30"],onShowSizeChange:(t,n)=>{(null==e?void 0:e.onChangePageSize)&&(null==e||e.onChangePageSize(t,n))},total:(null==e?void 0:e.totalPage)?null==e?void 0:e.totalPage:1,showTotal:()=>(0,l.jsxs)("div",{className:"font-weight-black",children:["Tổng cộng: ",(null==e?void 0:e.totalPage)||1]}),onChange:(e,t)=>D(e,t),current:(null==e?void 0:e.currentPage)&&(null==e?void 0:e.currentPage)},rowKey:"uniqueId",rowClassName:(e,t)=>t==I?"table-row-active":t%2==0?"table-row-light":"table-row-dark",onRow:(e,t)=>({onClick:()=>{_(e),P(t)}}),rowSelection:(null==e?void 0:e.rowSelection)?null==e?void 0:e.rowSelection:(null==e?void 0:e.isSelect)?T:null,onExpand:(t,n)=>{void 0!==(null==e?void 0:e.handleExpand)&&(null==e||e.handleExpand(n))},expandable:{expandedRowRender:null==e?void 0:e.expandable,rowExpandable:e=>"Not Expandable"!==e.name,...g}})]})})})}},48895:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var l=n(85893),a=n(96361),s=n(28210),i=n(67294),r=n(8123),c=e=>{let{record:t,visible:n,x:a,y:s,menuContext:r}=e,c=(0,i.useMemo)(()=>r.map(e=>{let t=e.components;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t,{}),e.text]})}),[r]);return n&&(0,l.jsx)("ul",{className:"context-menu-table",style:{left:"".concat(a,"px"),top:"".concat(s,"px")},children:c.map(e=>(0,l.jsx)("li",{className:"menu-context-item",children:e}))})},d=e=>{let t;let{columns:n,children:d,TitleCard:o,Extra:u,className:x,rowSelection:h,keySelection:m="",loading:p,bordered:v}=e,{total:g,current:f,expand:j,data:y,onExpand:b,onChangePage:N,menuContext:w,pageSize:S}=e,[I,P]=(0,i.useState)([]),[C,_]=(0,i.useState)([{currentPage:1,listKeys:[]}]),[D,T]=(0,i.useState)(1),[Z,F]=(0,i.useState)(null),[k,E]=(0,i.useState)({record:null,visible:!1,x:0,y:0}),z=(e,t)=>{if(T(e),C.some(t=>t.currentPage==e)||C.push({currentPage:e,listKeys:[]}),_([...C]),void 0===N)return e;N(e,t)};return(0,i.useEffect)(()=>{if(y){let e=JSON.parse(JSON.stringify(y));e.forEach((e,t)=>{let n=t.toString();m&&(n=(null==e?void 0:e[m])||"NOT_FOUND"),e.key=n}),P(e)}},[y]),(0,l.jsx)("div",{className:"wrap-table",children:(0,l.jsxs)(a.Z,{className:"".concat(x&&x),title:o,extra:u,children:[d,0==I.length&&(0,l.jsx)(r.Z,{loading:p}),I.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Z,{loading:p,bordered:v,rowSelection:h,scroll:{x:"max-content",y:window.innerHeight-295},columns:n,dataSource:I,size:"middle",pagination:{pageSize:S||30,pageSizeOptions:["30"],total:g&&g,current:f&&f,showTotal:()=>g&&(0,l.jsxs)("div",{className:"font-weight-black",children:["Tổng cộng: ",g]}),onChange:(e,t)=>z(e,t)},rowClassName:(e,t)=>t==Z?"active":t%2==0?"row-light":"row-dark",onRow:(e,t)=>({onContextMenu:t=>{if(!w)return null;t.preventDefault(),k.visible||document.addEventListener("click",function e(){E({...k,visible:!1}),document.removeEventListener("click",e)}),E({...k,record:e,visible:!0,x:t.clientX,y:t.clientY})},onClick:()=>F(t)}),expandable:C[0].listKeys.length>0&&j,expandedRowRender:j?(e,t,n,l)=>l?j:null:void 0,onExpandedRowsChange:e=>{if(F(parseInt(e[e.length-1])),C.some(e=>e.currentPage==D)){let t=C.findIndex(e=>e.currentPage==D);C[t].listKeys=e}_([...C])},onExpand:(e,t)=>{void 0!==b&&b(t)},expandedRowKeys:(t=null,(t=C.some(e=>e.currentPage==D)?C.find(e=>e.currentPage===D).listKeys:[]).length>1&&t.splice(t.length-2,1),t)}),w&&(0,l.jsx)(c,{...k,menuContext:w})]})]})})}},82771:function(e,t,n){"use strict";n.d(t,{Jj:function(){return r},t7:function(){return s},zP:function(){return d},LA:function(){return u},sR:function(){return h}});var l=n(85893);n(67294);var a=n(85340),s=e=>{let{className:t,onClick:n,onBlur:s,size:i}=e;return(0,l.jsx)("div",{onClick:function(){n&&n()},onBlur:function(){n&&s()},className:"".concat(t||""," ").concat("text-[#FB8C00] hover:text-[#F57C00] active:text-[#FB8C00] cursor-pointer none-selection"),children:(0,l.jsx)(a.Vvo,{size:i||22})})},i=n(62914),r=e=>{let{className:t,onClick:n,onBlur:a,size:s}=e;return(0,l.jsx)("div",{onClick:function(){n&&n()},onBlur:function(){n&&a()},className:"".concat(t||""," ").concat("text-[#1E88E5] hover:text-[#1976D2] active:text-[#1E88E5] cursor-pointer none-selection"),children:(0,l.jsx)(i.suf,{size:s||26})})},c=n(92088),d=e=>{let{className:t,onClick:n,onBlur:a,size:s}=e;return(0,l.jsx)("div",{onClick:function(){n&&n()},onBlur:function(){n&&a()},className:"".concat(t||""," ").concat("text-[#9000ff] hover:text-[#7517bd] active:text-[#9000ff] cursor-pointer none-selection"),children:(0,l.jsx)(c.Swe,{size:s||21})})},o=n(48506),u=e=>{let{className:t,onClick:n,onBlur:a,size:s}=e;return(0,l.jsx)("div",{onClick:function(){n&&n()},onBlur:function(){n&&a()},className:"".concat(t||""," ").concat("text-[#9000ff] hover:text-[#7517bd] active:text-[#9000ff] cursor-pointer none-selection"),children:(0,l.jsx)(o.b2g,{size:s||22})})},x=n(30833),h=e=>{let{className:t,onClick:n,onBlur:a,size:s}=e;return(0,l.jsx)("div",{onClick:function(){n&&n()},onBlur:function(){n&&a()},className:"".concat(t||""," ").concat("text-[#C94A4F] hover:text-[#b43f43] active:text-[#C94A4F] cursor-pointer none-selection"),children:(0,l.jsx)(x.Z,{size:s||22})})}},36054:function(e,t,n){"use strict";n.d(t,{Fn:function(){return l.Fn},Py:function(){return l.Py},S_:function(){return l.S_},UM:function(){return l.UM},Vq:function(){return l.Vq},X7:function(){return l.X7},Zn:function(){return a.Z},fU:function(){return l.fU}});var l=n(37379),a=n(26674)},17298:function(e,t,n){"use strict";n.d(t,{i:function(){return l},l:function(){return a}});let l=[{required:!0,message:"Kh\xf4ng được để trống"}],a=[{required:!1}]},37379:function(e,t,n){"use strict";n.d(t,{Vq:function(){return f},fU:function(){return _},Fn:function(){return v},X7:function(){return p},S_:function(){return O},Py:function(){return E},UM:function(){return B}});var l=n(85893),a=n(67294),s=n(17331),i=n.n(s),r=n(78773),c=n(92594),d=n(85340),o=n(18644),u=n(92088),x=n(74931),h=n(48506),m=n(43291);let p=e=>{let{size:t,color:n}=e;return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:t+"px",height:t+"px",x:"0",y:"0",viewBox:"0 0 469.341 469.341",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:"M437.337 384.007H362.67c-47.052 0-85.333-38.281-85.333-85.333s38.281-85.333 85.333-85.333h74.667a10.66 10.66 0 0 0 10.667-10.667v-32c0-22.368-17.35-40.559-39.271-42.323l-61.26-107c-5.677-9.896-14.844-16.969-25.813-19.906-10.917-2.917-22.333-1.385-32.104 4.302L79.553 128.007H42.67c-23.531 0-42.667 19.135-42.667 42.667v256c0 23.531 19.135 42.667 42.667 42.667h362.667c23.531 0 42.667-19.135 42.667-42.667v-32a10.66 10.66 0 0 0-10.667-10.667zM360.702 87.411l23.242 40.596h-92.971l69.729-40.596zm-238.749 40.596L300.295 24.184c4.823-2.823 10.458-3.573 15.844-2.135 5.448 1.458 9.99 4.979 12.813 9.906l.022.039-164.91 96.013h-42.111z",fill:n,opacity:"1","data-original":"#000000"}),(0,l.jsx)("path",{d:"M437.337 234.674H362.67c-35.292 0-64 28.708-64 64s28.708 64 64 64h74.667c17.646 0 32-14.354 32-32v-64c0-17.646-14.354-32-32-32zm-74.667 85.333c-11.76 0-21.333-9.573-21.333-21.333 0-11.76 9.573-21.333 21.333-21.333 11.76 0 21.333 9.573 21.333 21.333.001 11.76-9.572 21.333-21.333 21.333z",fill:n,opacity:"1","data-original":"#000000"})]})})},v=e=>{let{size:t,color:n}=e;return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:t+"px",height:t+"px",x:"0",y:"0",viewBox:"0 0 32 32",children:(0,l.jsx)("g",{children:(0,l.jsxs)("g",{"data-name":"Layer 2",children:[(0,l.jsx)("path",{d:"M21.75 20.32v1.76a.917.917 0 0 1 0-1.76ZM23.25 23.92a.917.917 0 0 1 0 1.76Z",fill:n,opacity:"1","data-original":"#000000"}),(0,l.jsx)("path",{d:"m25.95 18.63 1.93-4.25a.753.753 0 0 0-.19-.88.768.768 0 0 0-.89-.07 2.657 2.657 0 0 1-1.17.38c-.15 0-.18-.02-.35-.14a1.876 1.876 0 0 0-1.22-.42 1.922 1.922 0 0 0-1.22.42c-.16.12-.19.14-.34.14a.456.456 0 0 1-.35-.14 1.982 1.982 0 0 0-2.44 0c-.16.12-.19.14-.34.14a2.58 2.58 0 0 1-1.17-.38.768.768 0 0 0-.89.07.753.753 0 0 0-.19.88l1.93 4.25a8.503 8.503 0 0 0-3.71 6.12 6.656 6.656 0 0 0 1.01 3.77 2.357 2.357 0 0 0 2.08 1.23h8.14a2.357 2.357 0 0 0 2.08-1.23 6.658 6.658 0 0 0 1.01-3.77 8.504 8.504 0 0 0-3.71-6.12Zm-.54 6.17a2.624 2.624 0 0 1-2.16 2.45v.25a.75.75 0 0 1-1.5 0v-.25a2.624 2.624 0 0 1-2.16-2.45.75.75 0 0 1 1.5 0 1.036 1.036 0 0 0 .66.88v-2.03a2.624 2.624 0 0 1-2.16-2.45 2.624 2.624 0 0 1 2.16-2.45v-.25a.75.75 0 0 1 1.5 0v.25a2.624 2.624 0 0 1 2.16 2.45.75.75 0 0 1-1.5 0 1.036 1.036 0 0 0-.66-.88v2.03a2.624 2.624 0 0 1 2.16 2.45ZM15.81 29.5H7a2.006 2.006 0 0 1-2-2 2.015 2.015 0 0 1 2-2h7.34a8.302 8.302 0 0 0 1.13 3.49 3.477 3.477 0 0 0 .34.51ZM15.83 20.5a8.708 8.708 0 0 0-1.47 4H6a2.006 2.006 0 0 1-2-2 2.015 2.015 0 0 1 2-2Z",fill:n,opacity:"1","data-original":"#000000"}),(0,l.jsx)("path",{d:"M17.81 18.32a10.912 10.912 0 0 0-1.21 1.18H8a2.006 2.006 0 0 1-2-2 2.015 2.015 0 0 1 2-2h8.53ZM24.795 2.387l-5.035.629a1.072 1.072 0 0 0-.625 1.822l1.108 1.108-4.04 2.835a.536.536 0 0 1-.648-.025l-4.319-3.545a1.072 1.072 0 0 0-1.414.047L3.291 11.39a1.072 1.072 0 0 0 .09 1.64l.833.624a1.072 1.072 0 0 0 1.376-.075l4.584-4.289a.536.536 0 0 1 .696-.031l4.362 3.398a1.072 1.072 0 0 0 1.29.02l6.045-4.408.973.974a1.072 1.072 0 0 0 1.822-.625l.63-5.035a1.072 1.072 0 0 0-1.197-1.196Z",fill:n,opacity:"1","data-original":"#000000"})]})})})},g=e=>{let{size:t}=e;return(0,l.jsx)("svg",{"enable-background":"new 0 0 32 32",height:t+"px",viewBox:"0 0 32 32",width:t+"px",xmlns:"http://www.w3.org/2000/svg",id:"fi_7941498",children:(0,l.jsxs)("g",{id:"Layer_13",children:[(0,l.jsxs)("g",{children:[(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"m2.001 21.223c-.23 0-.46-.088-.636-.264-.352-.351-.352-.921 0-1.272l2.862-2.862c.352-.352.921-.352 1.272 0 .352.351.352.921 0 1.272l-2.862 2.862c-.175.176-.405.264-.636.264z"})}),(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"m4.318 28.583c-.23 0-.46-.088-.636-.264-.352-.351-.352-.921 0-1.272l5.384-5.384c.352-.352.921-.352 1.272 0 .352.351.352.921 0 1.272l-5.384 5.385c-.176.176-.406.263-.636.263z"})}),(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"m11.678 30.9c-.23 0-.46-.088-.636-.264-.352-.351-.352-.921 0-1.272l2.862-2.862c.352-.352.921-.352 1.272 0 .352.351.352.921 0 1.272l-2.862 2.862c-.175.176-.405.264-.636.264z"})})]}),(0,l.jsx)("path",{d:"m27.473 2.084-23.504 7.01c-1.775.529-1.899 2.995-.187 3.7l10.092 4.159c.044-.107.108-.207.195-.293l5.161-5.161c.352-.352.921-.352 1.272 0 .352.351.352.921 0 1.272l-5.161 5.161c-.087.087-.187.152-.294.196l4.161 10.097c.704 1.709 3.166 1.585 3.694-.187l7.012-23.513c.446-1.494-.946-2.886-2.441-2.441z"})]})})},f=e=>{let{className:t,children:n,type:a="button",style:s,hover:p="opacity",customIcon:v,hideTitleOnMobile:f=!1}=e,{background:j="blue",icon:y,loading:b=!1,disabled:N=!1,onClick:w,hideIcon:S=!1,iconSize:I}=e,P="".concat(function(e){switch(e){case"opacity":default:return i()["hover-opacity"];case"scale-out":return i()["hover-scale-out"];case"scale-in":return i()["hover-scale-in"]}}(p)," ").concat(function(e){switch(e){case"red":return i()["btn-delete"];case"green":return i()["btn-create"];case"blue":return i()["btn-save"];case"light-blue":return i()["btn-edit"];case"orange":return i()["btn-export"];case"yellow":return i()["btn-warning"];case"purple":return i()["btn-purple"];case"transparent":return i()["btn-transparent"];default:return""}}(j)),C={type:a,className:"".concat(i()["chaos-btn-23"]," ").concat(P," ").concat(N?"opacity-50":""," ").concat(t||""),style:s||{},disabled:b||N,onClick:b||N?()=>{}:w};return(0,l.jsxs)("button",{...C,children:[b&&(0,l.jsxs)("svg",{className:"animate-spin w-[15px] h-[15px] mr-[2px]",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!b&&!S&&(0,l.jsx)(l.Fragment,{children:function(e,t,n){if(t)return t;if(!e)return"";switch(e){case"create":return(0,l.jsx)(c.O9D,{size:n||16});case"history":return(0,l.jsx)(r.ceS,{size:n||15});case"save":return(0,l.jsx)(u.tfk,{size:n||18});case"edit":return(0,l.jsx)(r.fmQ,{size:n||18});case"delete":return(0,l.jsx)(r.lp8,{size:n||15});case"import":return(0,l.jsx)(h._iA,{size:n||18});case"export":return(0,l.jsx)(x.WUQ,{size:n||18});case"notification":return(0,l.jsx)(o.IZE,{size:n||18});case"close":return(0,l.jsx)(o.bjh,{size:n||18});case"download":return(0,l.jsx)(d.H_7,{size:n||18});case"drop-down":return(0,l.jsx)(m.dbR,{size:n||18});case"send":return(0,l.jsx)(g,{size:n||18});default:return null}}(y,v,I)}),f?(0,l.jsx)("div",{className:"desk-text",children:n}):n]})};var j=n(14522),y=n(30381),b=n.n(y),N=n(30286),w=n(63237),S=n(83677),I=n.n(S);function P(e){let t=new Date(e);return t.setHours(0,0,0,0),new Date(t).getTime()}function C(e){let t=new Date(e);return t.setHours(23,59,59,0),new Date(t).getTime()}let _=e=>{let{onSubmit:t,useISOString:n,showYesterday:s=!0,showToday:i=!0,showPast7Days:r=!0,showSelected:c=!0}=e,[d,o]=(0,a.useState)(0),[u,x]=(0,a.useState)(!1),[h,m]=(0,a.useState)([{startDate:new Date,endDate:new Date,key:"selection"}]);function p(){var e,t,n,l,a;return b()(null===(e=h[0])||void 0===e?void 0:e.startDate).format("DD/MM/YYYY")==b()(null===(t=h[0])||void 0===t?void 0:t.endDate).format("DD/MM/YYYY")?b()(null===(a=h[0])||void 0===a?void 0:a.startDate).format("DD/MM/YYYY"):"".concat(b()(null===(n=h[0])||void 0===n?void 0:n.startDate).format("DD/MM/YYYY")," - ").concat(b()(null===(l=h[0])||void 0===l?void 0:l.endDate).format("DD/MM/YYYY"))}function v(e){if(t){if(!(null==e?void 0:e.start)){t({start:null,end:null,timestamp:new Date().getTime()});return}n?t({start:new Date((null==e?void 0:e.start)+252e5).toISOString(),end:new Date((null==e?void 0:e.end)+252e5).toISOString(),timestamp:new Date().getTime()}):t({...e,timestamp:new Date().getTime()}),m([{startDate:new Date(null==e?void 0:e.start),endDate:new Date(null==e?void 0:e.end),key:"selection"}])}}function g(e){switch(e){case"all":default:o(0),v({start:null,end:null});break;case"toDay":o(1),v({start:P(new Date().getTime()),end:C(new Date().getTime())});break;case"yesterday":o(2);let t=function(){let e=new Date,t=new Date(e);return t.setDate(e.getDate()-1),t}();v({start:P(t),end:C(new Date(t).getTime())});break;case"thisWeek":o(3);let n=function(){let e=new Date,t=new Date(e);return t.setDate(e.getDate()-7),{currentDate:new Date(e).getTime(),past7DaysDate:new Date(t).getTime()}}();v({start:P(null==n?void 0:n.past7DaysDate),end:C(null==n?void 0:n.currentDate)});break;case"range":var l,a;o(4),x(!1),v({start:P(null===(l=h[0])||void 0===l?void 0:l.startDate),end:C(null===(a=h[0])||void 0===a?void 0:a.endDate)})}}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:I().container,children:[(0,l.jsx)("div",{onClick:()=>g("all"),className:"item ".concat(0==d?"active":""),children:(0,l.jsx)("div",{children:"Tất cả"})}),i&&(0,l.jsx)("div",{onClick:()=>g("toDay"),className:"item ".concat(1==d?"active":""),children:(0,l.jsx)("div",{children:"H\xf4m nay"})}),s&&(0,l.jsx)("div",{onClick:()=>g("yesterday"),className:"item ".concat(2==d?"active":""),children:(0,l.jsx)("div",{children:"H\xf4m qua"})}),r&&(0,l.jsxs)("div",{onClick:()=>g("thisWeek"),className:"item ".concat(3==d?"active":""),children:[(0,l.jsx)("div",{className:"block w400:hidden",children:"7 ng\xe0y"}),(0,l.jsx)("div",{className:"hidden w400:block",children:"7 ng\xe0y qua"})]}),(0,l.jsx)("div",{onClick:()=>x(!0),className:"item ".concat(4==d?"active":""),children:(0,l.jsx)("div",{children:"Tuỳ chỉnh"})})]}),0!==d&&c&&(0,l.jsxs)("div",{className:"text-[12px] mt-[4px] text-[#1b73e8]",children:["Đang xem: ",p()]})]}),(0,l.jsx)(w.Z,{open:u,width:360,title:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:"Chọn khoảng thời gian"}),(0,l.jsxs)("div",{className:"text-[12px] opacity-70 text-[#1b73e8]",children:["Đ\xe3 chọn: ",p()]})]}),closable:!1,footer:(0,l.jsxs)("div",{className:"w-full flex items-center justify-center gap-[8px]",children:[(0,l.jsx)(f,{icon:"close",background:"red",onClick:()=>x(!1),children:"Đ\xf3ng"}),(0,l.jsx)(f,{icon:"save",background:"blue",onClick:()=>g("range"),children:"\xc1p dụng"})]}),children:(0,l.jsx)("div",{className:"mt-[-24px] mb-[-24px] mx-[-10px]",children:(0,l.jsx)(N.C0,{locale:j.vi,showDateDisplay:!1,editableDateInputs:!1,onChange:e=>m([e.selection]),moveRangeOnFirstSelection:!1,ranges:h})})})]})};var D=n(77024),T=n(84295),Z=n(4915),F=n.n(Z);let k=e=>{let{size:t,color:n}=e;return(0,l.jsx)("svg",{stroke:n||"black",fill:n||"black","stroke-width":"0",viewBox:"0 0 576 512",height:t+"px",width:t+"px",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M3.9 22.9C10.5 8.9 24.5 0 40 0H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L396.4 195.6C316.2 212.1 256 283 256 368c0 27.4 6.3 53.4 17.5 76.5c-1.6-.8-3.2-1.8-4.7-2.9l-64-48c-8.1-6-12.8-15.5-12.8-25.6V288.9L9 65.3C-.7 53.4-2.8 36.8 3.9 22.9zM432 224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zm59.3 107.3c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L432 345.4l-36.7-36.7c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6L409.4 368l-36.7 36.7c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L432 390.6l36.7 36.7c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6L454.6 368l36.7-36.7z"})})},E=e=>{let{style:t,children:n,isButton:s,onClickButton:i,visible:r,isHiddenCloseBtn:c=!1}=e,d=(0,a.useRef)();if(s)return(0,l.jsx)(D.Z,{ref:d,id:"filters-".concat(b()(new Date).format("HHDDMMYYYY")),placement:"right",title:r?"Đ\xf3ng":"Bộ lọc",children:(0,l.jsx)("div",{onClick:()=>{d.current&&d.current.close(),i&&i()},className:F()["btn-filter"],children:r?(0,l.jsx)(k,{size:18,color:"#de2842"}):(0,l.jsx)(T.ulB,{size:16,color:"#1b73e8"})})});if(!r)return(0,l.jsx)(l.Fragment,{});let u={className:F().container,style:t||{}};return(0,l.jsxs)("div",{...u,children:[!c&&(0,l.jsx)("button",{onClick:()=>!!i&&i(),className:F().close,children:(0,l.jsx)(o.bjh,{size:20})}),n]})};var z=n(15637),M=n.n(z);let B=e=>{let{key:t,children:n,background:a="blue",onClick:s,isButton:i}=e,r={key:t||"$tag-".concat(new Date().getTime()),className:function(e){switch(e){case"red":return M()["red-tag"];case"green":return M()["green-tag"];case"blue":default:return M()["blue-tag"];case"yellow":return M()["yellow-tag"];case"black":return M()["black-tag"];case"white":return M()["white-tag"];case"dark":return M()["dark-tag"];case"turquoise":return M()["turquoise-tag"];case"teal":return M()["teal-tag"];case"deeppurple":return M()["deeppurple-tag"];case"purple":return M()["purple-tag"]}}(a),style:{cursor:i?"pointer":"default"}};return(0,l.jsx)("div",{...r,onClick:()=>!!s&&s(),children:n})};var A=n(16655),H=n(13277),R=n.n(H);let{Option:Y}=A.default,O=e=>{let{onChange:t,placeholder:n,style:a}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(A.default,{style:a||{},className:R().container,placeholder:n||"Sắp xếp",onChange:function(e,n){switch(t&&t(n),e){case 1:t({sort:1,sortType:!0});break;case 2:default:t({sort:0,sortType:!1});break;case 3:t({sort:0,sortType:!0});break;case 4:t({sort:1,sortType:!1})}},size:"large",children:[(0,l.jsx)(Y,{value:1,children:"T\xean A - Z"},1),(0,l.jsx)(Y,{value:4,children:"T\xean Z - A"},4),(0,l.jsx)(Y,{value:2,children:"Mới đến cũ"},2),(0,l.jsx)(Y,{value:3,children:"Cũ đến mới"},3)]})})}},13722:function(e,t,n){"use strict";n.r(t);var l=n(85893),a=n(67294),s=n(16655),i=n(11163),r=n(9473),c=n(25773),d=n(88291),o=n(72833);t.default=e=>{let{filters:t,setFilter:n,statusSelected:u,handleSelecStatus:x,billStatus:h}=e;(0,r.v9)(e=>e.user.information),(0,i.useRouter)();let m=(0,r.v9)(e=>e.user.currentBranch),[p,v]=(0,a.useState)([]),[g,f]=(0,a.useState)([]);(0,a.useEffect)(()=>{j(),y()},[]);let j=async()=>{try{let e=await c.Z.getAll({pageIndex:1,pageSize:99999});200==e.status?v(e.data.data):v([])}catch(e){(0,o.xZ)(e)}},y=async()=>{try{let e=await d.sy.getByRole({roleId:3,branchId:m});200==e.status?f(e.data.data):f([])}catch(e){(0,o.xZ)(e)}};return(0,l.jsxs)("div",{className:"grid grid-cols-2 w900:grid-cols-4 gap-[12px] w400:gap-[16px] w-full",children:[(0,l.jsxs)("div",{className:"col-span-2 w600:col-span-1 flex flex-col",children:[(0,l.jsx)("div",{className:"mb-[4px] mt-[-3px] font-[600]",children:"Loại thanh to\xe1n"}),(0,l.jsx)(s.default,{className:"primay-input w-full !h-[36px]",placeholder:"Loại thanh to\xe1n",value:u,optionLabelProp:"children",onChange:e=>x(e),children:h.map((e,t)=>(0,l.jsx)(s.default.Option,{value:null==e?void 0:e.id,children:null==e?void 0:e.title},null==e?void 0:e.id))})]}),(0,l.jsxs)("div",{className:"col-span-2 w600:col-span-1 flex flex-col",children:[(0,l.jsx)("div",{className:"mb-[4px] mt-[-3px] font-[600]",children:"Học vi\xean"}),(0,l.jsxs)(s.default,{value:t.studentIds,showSearch:!0,placeholder:"Chọn học vi\xean",className:"primay-input !h-[36px] w-full",optionFilterProp:"children",onChange:e=>n({...t,studentIds:e}),children:[(0,l.jsx)(s.default.Option,{value:null,children:"Tất cả"},null),g.map(e=>(0,l.jsxs)(s.default.Option,{value:e.UserInformationId,children:["[",null==e?void 0:e.UserCode,"] - ",null==e?void 0:e.FullName]},e.UserInformationId))]})]}),(0,l.jsxs)("div",{className:"col-span-1 flex flex-col",children:[(0,l.jsx)("div",{className:"mb-[4px] mt-[-3px] font-[600]",children:"Trạng th\xe1i"}),(0,l.jsxs)(s.default,{value:t.status,placeholder:"Chọn trạng th\xe1i",className:"primay-input !h-[36px] w-full",onChange:e=>n({...t,status:e}),children:[(0,l.jsx)(s.default.Option,{value:null,children:"Tất cả"},null),(0,l.jsx)(s.default.Option,{value:1,children:"Chưa thanh to\xe1n hết"},"1"),(0,l.jsx)(s.default.Option,{value:2,children:"Đ\xe3 thanh to\xe1n hết"},"2")]})]})]})}},47871:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var l=n(85893),a=n(98302),s=n(30381),i=n.n(s),r=n(67294),c=n(78773),d=n(63237),o=n(69759),u=e=>{let{title:t,value:n}=e;return(0,l.jsxs)("div",{className:"class-info-item",children:[t,": ",(0,l.jsx)("div",{className:"info-value",children:n||""})]})},x=n(58416),h=n(42006),m=n(11780),p=e=>{let{data:t,getPaymentSessions:n,defaultGetPaymentSessionsParams:s}=e,[p,v]=(0,r.useState)("INFO"),[g,f]=(0,r.useState)(!1);function j(){x.cM.Yellow("data",t),f(!g)}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Yx,{id:"i-pay-".concat(null==t?void 0:t.Code),place:"left",content:"Th\xf4ng tin",children:(0,l.jsx)("div",{onClick:j,className:"px-[4px] cursor-pointer text-[#F41E92] active:text-[#cf187d]",children:(0,l.jsx)(c.DAO,{size:20})})}),(0,l.jsxs)(d.Z,{open:g,onCancel:j,title:(0,l.jsxs)("div",{children:["M\xe3 đơn: ",null==t?void 0:t.Code]}),footer:null,children:[(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsxs)("div",{className:"flex mb-3 border overflow-x-auto items-center p-1 space-x-1 rtl:space-x-reverse text-sm text-gray-600 bg-gray-500/5 rounded-xl",children:[(0,l.jsx)("button",{role:"tab",type:"button",onClick:()=>v("INFO"),className:" ".concat("INFO"===p?"text-primary shadow":""," flex whitespace-nowrap items-center h-8 px-5 font-medium rounded-lg    hover:text-[#6b6b6b]  "),children:"Th\xf4ng tin"}),(0,l.jsx)("button",{role:"tab",type:"button",onClick:()=>v("SESSION"),className:" ".concat("SESSION"===p?"text-primary shadow":""," flex whitespace-nowrap items-center h-8 px-5 font-medium rounded-lg    hover:text-[#6b6b6b]  "),children:"Lịch sử thanh to\xe1n"})]})})}),"SESSION"===p&&(0,l.jsx)(m.default,{data:t,getPaymentSessions:n,defaultGetPaymentSessionsParams:s}),"INFO"===p&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u,{title:"Tổng tiền",value:(0,h.HP)(null==t?void 0:t.TotalPrice)}),(0,l.jsx)(u,{title:"Đ\xe3 thanh to\xe1n",value:(0,h.HP)(null==t?void 0:t.Paid)}),(0,l.jsx)(u,{title:"Chưa thanh to\xe1n",value:(0,h.HP)(null==t?void 0:t.Debt)}),(0,l.jsx)(a.Z,{className:"ant-divider-16"}),!!(null==t?void 0:t.DiscountCode)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u,{title:"M\xe3 giảm gi\xe1",value:null==t?void 0:t.DiscountCode}),(0,l.jsx)(u,{title:"Giảm gi\xe1",value:(0,h.HP)(null==t?void 0:t.Reduced)}),(0,l.jsx)(a.Z,{className:"ant-divider-16"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-[42px] h-[42px] bg-[#e1e1e1] flex items-center justify-center rounded-full shadow-sm mr-[16px]",children:(0,l.jsx)(c.Xws,{size:20})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(u,{title:"Người thanh to\xe1n",value:null==t?void 0:t.FullName}),(0,l.jsx)(u,{title:"M\xe3",value:null==t?void 0:t.UserCode})]})]}),(0,l.jsx)(a.Z,{className:"ant-divider-16"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-[42px] h-[42px] bg-[#e1e1e1] flex items-center justify-center rounded-full shadow-sm mr-[16px]",children:(0,l.jsx)(c.Bj$,{size:23})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(u,{title:"Ngưởi tạo",value:null==t?void 0:t.CreatedBy}),(0,l.jsx)(u,{title:"Ng\xe0y tạo",value:i()(null==t?void 0:t.CreatedOn).format("HH:mm DD/MM/YYYY")})]})]}),(0,l.jsx)(a.Z,{className:"ant-divider-16"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-[42px] h-[42px] bg-[#e1e1e1] flex items-center justify-center rounded-full shadow-sm mr-[16px]",children:(0,l.jsx)(c.dfI,{size:23})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(u,{title:"Cập nhật gần nhất",value:null==t?void 0:t.ModifiedBy}),(0,l.jsx)(u,{title:"Thời gian",value:i()(null==t?void 0:t.ModifiedOn).format("HH:mm DD/MM/YYYY")})]})]})]})]})]})}},11780:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var l=n(85893),a=n(78559),s=n(30381),i=n.n(s),r=n(67294),c=n(8285),d=n(78773),o=n(84295),u=n(9732),x=n(48506),h=e=>{let{Icon:t,className:n=""}=e;return(0,l.jsx)("div",{className:"p-2 bg-[rgb(243 244 246)] hover:bg-[rgb(229 231 235)] cursor-pointer w-fit rounded-full border border-gray-400 ".concat(n),children:t})},m=e=>{let{myIconFillProps:t,className:n="",Title:a,Description:s}=e;return(0,l.jsxs)("div",{className:"flex gap-2 items-center ".concat(n),children:[(0,l.jsx)(h,{...t}),(0,l.jsxs)("div",{children:[a&&(0,l.jsx)("p",{style:{fontSize:14,fontWeight:500,lineHeight:"16px",letterSpacing:"0.02em",color:"#777777"},children:a}),(0,l.jsx)("p",{className:"text-sm text-gray-800",children:s})]})]})},p=n(34223),v=n(66946),g=n(58533),f=n(72833),j=e=>{let{data:t,setData:n,scrollId:a,fetchApiFunction:s,fetchParams:i,children:c,maxHeight:d,endMessage:o}=e,[u,x]=(0,r.useState)({pageIndex:1,pageSize:10}),[h,m]=(0,r.useState)(0),[j,y]=(0,r.useState)(!1),[b,N]=(0,r.useState)(!1),w=document.getElementById(a);async function S(){try{y(!0);let e=await s({pageIndex:1,pageSize:u.pageSize,...i});200==e.status?(n(e.data.data),m(e.data.totalRow),console.log(e.data.totalRow,"hehehuu"),x({...u,pageIndex:1}),null==w||w.scroll({top:0})):n([])}catch(e){(0,f.xZ)(e)}finally{y(!1)}}async function I(){try{let e=await s({...u,...i});200==e.status?(n([...t,...e.data.data]),m(e.data.totalRow)):n([])}catch(e){(0,f.xZ)(e)}finally{N(!1)}}return(0,r.useEffect)(()=>{x({...u,pageIndex:1}),S()},[]),console.log(t.length,h,"length"),(0,r.useEffect)(()=>{1!==u.pageIndex&&I()},[u]),(0,l.jsxs)("div",{id:a,style:{maxHeight:d||"calc(100vh - 300px)"},className:"scrollable pr-2",children:[(null==t?void 0:t.length)>0&&!j&&(0,l.jsx)(g.Z,{dataLength:null==t?void 0:t.length,next:function(){console.log("length run n\xe8"),j||b||0===t.length||(N(!0),x({...u,pageIndex:u.pageIndex+1}))},hasMore:(null==t?void 0:t.length)<h,loader:(0,l.jsx)("div",{className:"w-full mt-[16px] mb-[32px] text-center flex items-center gap-2",children:(0,l.jsx)(p.Z,{active:!0})}),endMessage:(0,l.jsx)("div",{className:"",children:o}),scrollableTarget:a,children:(0,l.jsx)("div",{className:"my-2",children:c})}),(null==t?void 0:t.length)==0&&!j&&(0,l.jsx)("div",{className:"my-2",children:(0,l.jsx)(v.Z,{description:(0,l.jsx)("p",{className:"text-center",children:"Kh\xf4ng t\xecm thấy dữ liệu."})})}),j&&(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsx)(p.Z,{})})]})},y=n(58416),b=e=>{let{data:t,getPaymentSessions:n,defaultGetPaymentSessionsParams:s}=e,[h,p]=(0,r.useState)([]);return(0,l.jsx)("div",{className:"pt-1",children:(0,l.jsx)(j,{data:h,setData:p,fetchApiFunction:n,fetchParams:s,scrollId:"paymentSessionScroll_".concat(null==t?void 0:t.Id),children:(0,l.jsx)(a.Z,{mode:"left",children:h.map(e=>(0,l.jsxs)(a.Z.Item,{children:[(0,l.jsxs)("p",{children:["Thanh to\xe1n l\xfac: ",i()(e.CreatedOn).format("DD/MM/YYYY HH:mm")]}),(0,l.jsxs)("div",{className:"grid border shadow-sm grid-cols-2 gap-2 p-3 bg-[#fff] rounded-2xl",children:[(0,l.jsx)(m,{className:"",Title:"Gi\xe1 trị",myIconFillProps:{Icon:(0,l.jsx)(o.IsJ,{size:20})},Description:(0,l.jsxs)("div",{className:"font-[600] ".concat((null==e?void 0:e.Type)==1?"text-tw-green":"text-tw-red"),children:[(null==e?void 0:e.Type)==1?"+":"-",y.Jy.numberToPrice(e.Value)," VND"]})}),(0,l.jsx)(m,{className:"",Title:"Loại",myIconFillProps:{Icon:(0,l.jsx)(c.Qns,{size:20})},Description:e.TypeName}),(0,l.jsx)(m,{className:"",Title:"Phương thức",myIconFillProps:{Icon:(0,l.jsx)(x.lTV,{size:20})},Description:e.PaymentMethodName}),(0,l.jsx)(m,{className:"",Title:"Người tạo",myIconFillProps:{Icon:(0,l.jsx)(d.BKo,{size:20})},Description:e.CreatedBy}),(0,l.jsx)(m,{className:"col-span-2 !items-start",Title:"Ghi ch\xfa",myIconFillProps:{Icon:(0,l.jsx)(u.y_C,{size:20})},Description:(0,l.jsx)("p",{className:"whitespace-pre-wrap",children:e.Note||"Kh\xf4ng c\xf3"})})]})]}))})})})}},6401:function(e,t,n){"use strict";n.r(t);var l=n(85893),a=n(31379),s=n(96361),i=n(16655),r=n(74253),c=n(67294),d=n(92088),o=n(72548),u=n(4854),x=n(25773),h=n(63237),m=n(69759),p=n(82373),v=n(46916),g=n(57844),f=n(82771),j=n(17298),y=n(58416),b=n(42006),N=n(31339);let w="Refund";t.default=e=>{let{isEdit:t,onRefresh:n,item:S}=e,[I]=a.Z.useForm(),[P,C]=(0,c.useState)(!1),[_,D]=(0,c.useState)(!1),[T,Z]=(0,c.useState)([]),[F,k]=(0,c.useState)(null),[E,z]=(0,c.useState)("");function M(){D(!_)}(0,c.useEffect)(()=>{_&&(O(),H())},[_]);let[B,A]=(0,c.useState)(!1),H=async()=>{if(!F){A(!0);try{let e=await x.Z.getAll({pageIndex:1,pageSize:99999});200==e.status&&k(e.data.data)}catch(e){y.Gu.error(null==e?void 0:e.message)}finally{I.setFieldValue("BranchId",null==S?void 0:S.BranchId),A(!1)}}},[R,Y]=(0,c.useState)(!1),O=async()=>{if(0==T.length){Y(!0);try{let e=await u.n.getAll();200==e.status&&Z(e.data.data),204==e.status&&Z([])}catch(e){y.Gu.error(null==e?void 0:e.message)}finally{Y(!1)}}};async function G(e){try{let t=await o.Z.post(w,e);200==t.status&&(y.Gu.success("Th\xe0nh c\xf4ng"),n&&n(),D(!1),I.resetFields())}catch(e){y.Gu.error(null==e?void 0:e.message)}finally{C(!1)}}async function L(e){try{let t=await o.Z.post(w,{...e,Id:null==S?void 0:S.Id});200==t.status&&(y.Gu.success("Th\xe0nh c\xf4ng"),n&&n(),D(!1),I.resetFields())}catch(e){y.Gu.error(null==e?void 0:e.message)}finally{C(!1)}}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.Yx,{id:"class-refund-".concat(null==S?void 0:S.Id),place:"left",content:"Ho\xe0n tiền",children:(0,l.jsx)(f.LA,{onClick:function(){var e;D(!_),I.setFieldValue("Price",(e=null==S?void 0:S.Debt)<0?-1*e:e)},className:"ml-[16px]"})}),(0,l.jsxs)(h.Z,{width:500,title:"Ho\xe0n tiền",open:_,onCancel:M,footer:(0,l.jsx)(g.Z,{loading:P,onCancel:M,onOK:function(){z(""),I.submit()}}),children:[(0,l.jsx)(s.Z,{className:"mb-[16px] card-min-padding",children:(0,l.jsxs)("div",{className:"flex relative",children:[(0,l.jsx)(p.Z,{uri:null==S?void 0:S.Avatar,className:"w-[64px] h-[64px] rounded-full shadow-sm border-[1px] border-solid border-[#f4f4f4]"}),(0,l.jsxs)("div",{className:"flex-1 ml-[16px]",children:[(0,l.jsx)("div",{className:"w-full in-1-line font-[600] text-[16px]",children:null==S?void 0:S.FullName}),(0,l.jsxs)("div",{className:"w-full in-1-line font-[400] text-[14px]",children:[(0,l.jsx)("div",{className:"font-[600] inline-flex",children:"M\xe3:"})," ",null==S?void 0:S.UserCode]}),(0,l.jsxs)("div",{className:"w-full in-1-line font-[400] text-[14px]",children:[(0,l.jsx)("div",{className:"font-[600] inline-flex",children:"Số tiền đăng k\xfd:"})," ",(0,b.HP)(null==S?void 0:S.Price)]})]}),(0,l.jsx)(m.Yx,{className:"top-[-4px] right-[-4px] absolute w-[28px] h-[18px]",id:"view-in-new-".concat(null==S?void 0:S.Id),place:"right",content:"Xem th\xf4ng tin",children:(0,l.jsx)("div",{onClick:()=>{window.open("/info-course/student/detail"+"/?StudentID=".concat(null==S?void 0:S.StudentId),"_blank")},className:"btn-open-in-new-tab text-[#1976D2]",children:(0,l.jsx)(d.jhj,{size:16})})})]})}),(0,l.jsxs)(a.Z,{form:I,className:"grid grid-cols-2 gap-x-4",layout:"vertical",initialValues:{remember:!0},onFinish:function(e){var n;if(parseInt((0,N.T7)(null==e?void 0:e.Price))>((n=null==S?void 0:S.Debt)<0?-1*n:n))return z("Số tiền kh\xf4ng lớn hơn số tiền chưa thanh to\xe1n"),!1;C(!0);let l={...e,BillId:null==S?void 0:S.Id,Price:(0,N.T7)(null==e?void 0:e.Price),Type:4,StudentId:null==S?void 0:S.StudentId};console.log("-- DATA_SUBMIT",l),t||G(l),t&&L(l)},autoComplete:"on",children:[(0,l.jsx)(a.Z.Item,{className:"col-span-2",name:"BranchId",label:"Trung t\xe2m thanh to\xe1n",rules:j.i,children:(0,l.jsx)(i.default,{loading:B,disabled:P,className:"style-input",showSearch:!0,optionFilterProp:"children",allowClear:!0,placeholder:"Chọn trung t\xe2m",children:null==F?void 0:F.map((e,t)=>(0,l.jsx)(i.default.Option,{value:e.Id,children:e.Name},t))})}),(0,l.jsx)(a.Z.Item,{className:"col-span-1",name:"PaymentMethodId",label:"Phương thức thanh to\xe1n",rules:j.i,children:(0,l.jsx)(i.default,{loading:R,disabled:P,placeholder:"Chọn phương thức",className:"primary-input",children:T.map(e=>(0,l.jsx)(i.default.Option,{value:e.Id,children:null==e?void 0:e.Name},e.Id))})}),(0,l.jsx)(v.Z,{disabled:P,onChange:e=>I.setFieldValue("Price",e.target.value),label:"Số tiền",name:"Price",placeholder:"Nhập số tiền",className:"col-span-1"}),!!E&&(0,l.jsx)("div",{className:"col-span-2 text-[red] mb-[16px] mt-[-4px]",children:E}),(0,l.jsx)(a.Z.Item,{className:"col-span-2",label:"Ghi ch\xfa",name:"Note",rules:j.l,children:(0,l.jsx)(r.default.TextArea,{rows:5,placeholder:"",disabled:P})})]})]})]})}},46976:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return et}});var l=n(85893),a=n(30381),s=n.n(a),i=n(9008),r=n.n(i),c=n(11163),d=n(67294),o=n(8285),u=n(43291),x=n(9473),h=n(72548),m=n(25773),p=n(88291),v=n(53265),g=n(36054),f=n(31379),j=n(16655),y=n(74253),b=n(63222),N=n(61687),w=n(67359),S=n(39292),I=e=>{let{branchId:t,...n}=e,{currentBranchId:a}=(0,N.Z)(),s=t||a,i=async e=>{var t,n;let{pageParam:l,textSearchDebounced:a}=e,i=await p.sy.getAll({pageSize:S.I,pageIndex:l,roleIds:b.td,search:a,branchIds:s});return{data:(null==i?void 0:null===(n=i.data)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.map(e=>({label:"".concat(null==e?void 0:e.FullName," - ").concat(null==e?void 0:e.UserCode),value:Number(null==e?void 0:e.UserInformationId)})))||[],totalRow:i.data.totalRow}},r=async e=>{var t,n;let l=await p.sy.getAll({StudentIds:null==e?void 0:e.join(","),branchIds:s});return(null==l?void 0:null===(n=l.data)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.map(e=>({label:"".concat(null==e?void 0:e.FullName," - ").concat(null==e?void 0:e.UserCode),value:Number(null==e?void 0:e.UserInformationId)})))||[]};return(0,l.jsx)(w.Z,{fetchFn:i,fetchActivelyFn:r,queryKey:[p.sy.keyGetAll,s],...n})},P=n(63237),C=n(17298),_=n(58416),D=n(72833),T=n(31339),Z=n(46916),F=n(57844),k=n(3027),E=e=>{let{isEdit:t,onRefresh:n,item:a}=e,[s]=f.Z.useForm(),[i,r]=(0,d.useState)(!1),[c,o]=(0,d.useState)(!1),[u,p]=(0,d.useState)(null),[v,g]=(0,d.useState)(!1),b=(0,x.v9)(e=>e.user.currentBranch);function N(){o(!c)}(0,d.useEffect)(()=>{c&&w(),s.setFieldValue("StudentId",null)},[c,b]);let w=async()=>{g(!0);try{let e=await m.Z.getAll({pageIndex:1,pageSize:99999});200==e.status&&p(e.data.data)}catch(e){(0,D.xZ)(e)}finally{s.setFieldValue("BranchId",null==a?void 0:a.BranchId),g(!1)}};async function S(e){try{let t=await h.Z.post("Bill/v2",e);200==t.status&&(_.Gu.success("Th\xe0nh c\xf4ng"),n&&n(),o(!1),s.resetFields())}catch(e){(0,D.xZ)(e)}finally{r(!1)}}return(0,d.useEffect)(()=>{(null==u?void 0:u.length)>0&&s.setFieldValue("BranchId",b)},[u]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k.Z,{mobileIconOnly:!0,onClick:N,background:"green",icon:"add",type:"button",children:"Th\xeam"}),(0,l.jsx)(P.Z,{width:500,title:"Tạo phi\xean thanh to\xe1n",open:c,onCancel:N,footer:(0,l.jsx)(F.Z,{loading:i,onCancel:N,onOK:function(){s.submit()}}),children:(0,l.jsxs)(f.Z,{form:s,className:"grid grid-cols-2 gap-x-4",layout:"vertical",initialValues:{remember:!0},onFinish:function(e){r(!0);let n={...e,Price:(0,T.T7)(null==e?void 0:e.Price),Type:4,details:[]};console.log("-- DATA_SUBMIT",n),t||S(n)},autoComplete:"on",children:[(0,l.jsx)(f.Z.Item,{className:"col-span-2",name:"StudentId",label:"Học vi\xean",rules:C.i,children:(0,l.jsx)(I,{})}),(0,l.jsx)(f.Z.Item,{className:"col-span-1",name:"BranchId",label:"Trung t\xe2m thanh to\xe1n",rules:C.i,children:(0,l.jsx)(j.default,{loading:v,disabled:!0,className:"style-input",showSearch:!0,optionFilterProp:"children",allowClear:!0,placeholder:"Chọn trung t\xe2m",children:null==u?void 0:u.map((e,t)=>(0,l.jsx)(j.default.Option,{value:e.Id,children:e.Name},t))})}),(0,l.jsx)(Z.Z,{rules:C.i,disabled:i,onChange:e=>s.setFieldValue("Price",e.target.value),label:"Số tiền",name:"Price",placeholder:"Nhập số tiền",className:"col-span-1"}),(0,l.jsx)(f.Z.Item,{className:"col-span-2",label:"Ghi ch\xfa",name:"Note",rules:C.l,children:(0,l.jsx)(y.default.TextArea,{rows:5,placeholder:"",disabled:i})})]})})]})},z=n(58759),M=n(18644),B=e=>{let{onRefresh:t,defaultData:n}=e,[a,s]=(0,d.useState)(!1),[i,r]=(0,d.useState)(!1);async function c(){s(!0);try{let e=await h.Z.delete("Bill",null==n?void 0:n.Id);200==e.status&&(t&&t(),r(!1),_.Gu.success("Th\xe0nh c\xf4ng"))}catch(e){_.Gu.error(null==e?void 0:e.message)}s(!1)}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(z.Z,{id:"pay-".concat(null==n?void 0:n.Code),place:"left",content:"X\xf3a",children:(0,l.jsx)("div",{onClick:()=>r(!0),className:"ml-[16px] mb-[-1px] text-[#C94A4F] all-center hover:opacity-70 cursor-pointer",children:(0,l.jsx)(M.bjh,{size:26})})}),(0,l.jsx)(P.Z,{width:500,title:"X\xf3a thanh to\xe1n",open:i,onCancel:()=>r(!1),footer:(0,l.jsx)(k.Z,{loading:a,onClick:c,background:"red",icon:"remove",type:"button",children:"X\xf3a"}),children:(0,l.jsxs)("p",{children:["Bạn c\xf3 muốn x\xf3a m\xe3: ",(0,l.jsx)("span",{className:"text-[red] font-[700]",children:(null==n?void 0:n.Code)||""})]})})]})},A=n(30202),H=n(33959),R=n(96369),Y=n(78773),O=n(4854);let G="bill";var L=e=>{let{isEdit:t,onRefresh:n,defaultData:a}=e,[s]=f.Z.useForm(),i=(0,A.NL)(),[r,c]=(0,d.useState)(!1),[o,u]=(0,d.useState)(!1),[x,m]=(0,d.useState)([]);(0,d.useEffect)(()=>{o&&g()},[o]);let[p,v]=(0,d.useState)(!1),g=async()=>{if(0==x.length){v(!0);try{let e=await O.n.getAll();200==e.status&&m(e.data.data),204==e.status&&m([])}catch(e){_.Gu.error(null==e?void 0:e.message)}finally{v(!1)}}};function b(){u(!o)}async function N(e){try{let t=await h.Z.post(G,e);200==t.status&&(_.Gu.success("Th\xe0nh c\xf4ng"),n&&n(),u(!1),s.resetFields(),i.invalidateQueries({predicate:e=>"GET/api/PaymentSession"===e.queryKey[0],type:"active"}))}catch(e){_.Gu.error(null==e?void 0:e.message)}finally{c(!1)}}async function w(e){try{let t=await h.Z.post(G+"/payment",{...e,Id:null==a?void 0:a.Id});200==t.status&&(_.Gu.success("Th\xe0nh c\xf4ng"),n&&n(),u(!1),s.resetFields(),i.invalidateQueries({predicate:e=>"GET/api/PaymentSession"===e.queryKey[0]}))}catch(e){_.Gu.error(null==e?void 0:e.message)}finally{c(!1)}}let[S,I]=(0,d.useState)(!1),D=(e,t)=>{let n=s.getFieldValue("PaymentAppointmentDate");"NextPaymentAppointmentDate"===t&&e&&n&&e.isBefore(n)?(I(!0),H.ZP.warning("Ng\xe0y tiếp theo kh\xf4ng được nhỏ hơn ng\xe0y trước")):I(!1),s.setFieldsValue({[t]:e})},T=e=>{let t=s.getFieldValue("PaymentAppointmentDate");return!t||e.isAfter(t)};return(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)(z.Z,{id:"payForm-".concat(null==a?void 0:a.Code),place:"left",content:"Thanh to\xe1n",children:(0,l.jsx)("div",{onClick:function(){u(!o)},className:"px-[4px] cursor-pointer text-[#1E88E5] active:text-[#186fbc]",children:(0,l.jsx)(Y.Gi7,{size:22,className:"ml-[16px]"})})}),(0,l.jsx)(P.Z,{width:500,title:"Thanh to\xe1n",open:o,onCancel:b,footer:(0,l.jsx)(F.Z,{loading:r,onCancel:b,onOK:function(){s.submit()}}),children:(0,l.jsxs)(f.Z,{form:s,className:"grid grid-cols-2 gap-x-4",layout:"vertical",initialValues:{remember:!0},onFinish:function(e){c(!0);let n={...e,Paid:e.Paid.replace(/,/g,"")};console.log("-- DATA_SUBMIT",n),t||N(n),t&&w(n)},autoComplete:"on",children:[(0,l.jsx)(Z.Z,{disabled:r,onChange:e=>s.setFieldValue("Paid",e.target.value),label:"Số tiền thanh to\xe1n",name:"Paid",placeholder:"Số tiền thanh to\xe1n",className:"col-span-1",rules:C.i}),(0,l.jsx)(f.Z.Item,{className:"col-span-1",name:"PaymentMethodId",label:"Phương thức thanh to\xe1n",rules:C.i,children:(0,l.jsx)(j.default,{loading:p,disabled:r,placeholder:"Chọn phương thức",className:"primary-input",children:x.map(e=>(0,l.jsx)(j.default.Option,{value:e.Id,children:null==e?void 0:e.Name},e.Id))})}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.Z.Item,{className:"col-span-2",name:"PaymentDate",label:"Ng\xe0y thanh to\xe1n",rules:C.i,children:(0,l.jsx)(R.default,{disabled:r,placeholder:"Chọn ng\xe0y thanh to\xe1n",className:"style-input",onChange:e=>D(e,"PaymentDate")})}),(0,l.jsx)(f.Z.Item,{className:"col-span-2",name:"PaymentAppointmentDate",label:"Ng\xe0y thanh to\xe1n tiếp theo",rules:C.i,children:(0,l.jsx)(R.default,{disabled:r,placeholder:"Chọn ng\xe0y thanh to\xe1n tiếp theo",className:"style-input",onChange:e=>D(e,"PaymentAppointmentDate"),disabledDate:e=>!T(e)})}),S&&(0,l.jsx)("p",{style:{color:"red"},children:"Ng\xe0y tiếp theo phải lớn hơn ng\xe0y bắt đầu!!!"})]}),(0,l.jsx)(f.Z.Item,{className:"col-span-2",label:"Ghi ch\xfa",name:"Note",rules:C.l,children:(0,l.jsx)(y.default.TextArea,{disabled:r,rows:5,placeholder:""})})]})})]})},V=n(52814),K=n(42006),U=n(22471),q=n(13722),J=n(47871),X=n(6401),Q=n(97382);let W={pageSize:S.I,branchIds:null,pageIndex:1,search:"",fromDate:null,toDate:null,type:0,studentIds:null,status:null},$=[1,4,5],ee=e=>{let[t,n]=d.useState(!0),[a,i]=d.useState(1),[f,j]=d.useState([]),[y,b]=d.useState(null),[N,w]=d.useState(W),[S,I]=(0,d.useState)([]),[P,C]=(0,d.useState)(0),T=(0,x.v9)(e=>e.user.information),Z=(0,x.v9)(e=>e.user.currentBranch),F=(0,c.useRouter)();async function z(e){n(!0);try{let n=await h.Z.get("Bill",{...N,id:e||null,branchIds:Z});if(200==n.status){var t,l,a,s,r,c,d,o,u,x,m,p;j(n.data.data),i(n.data.totalRow),b(n.data),I([{id:0,title:"Tất cả"+" (".concat(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.typeAll,")"),value:null==n?void 0:null===(l=n.data)||void 0===l?void 0:l.typeAll},{id:1,title:"Đăng k\xfd học"+" (".concat(null==n?void 0:null===(a=n.data)||void 0===a?void 0:a.typeRegis,")"),value:null==n?void 0:null===(s=n.data)||void 0===s?void 0:s.typeRegis},{id:2,title:"Mua dịch vụ"+" (".concat(null==n?void 0:null===(r=n.data)||void 0===r?void 0:r.typeService,")"),value:null==n?void 0:null===(c=n.data)||void 0===c?void 0:c.typeService},{id:4,title:"Tạo thủ c\xf4ng"+" (".concat(null==n?void 0:null===(d=n.data)||void 0===d?void 0:d.typeManual,")"),value:null==n?void 0:null===(o=n.data)||void 0===o?void 0:o.typeManual},{id:5,title:"Học ph\xed h\xe0ng th\xe1ng"+" (".concat(null==n?void 0:null===(u=n.data)||void 0===u?void 0:u.typeMonthly,")"),value:null==n?void 0:null===(x=n.data)||void 0===x?void 0:x.typeMonthly},{id:6,title:"Ph\xed chuyển lớp"+" (".concat(null==n?void 0:null===(m=n.data)||void 0===m?void 0:m.typeClassChange,")"),value:null==n?void 0:null===(p=n.data)||void 0===p?void 0:p.typeClassChange}])}else j([]),i(1)}catch(e){(0,D.xZ)(e)}finally{n(!1)}}(0,d.useEffect)(()=>{if(null==F?void 0:F.asPath.includes("bill=")){var e,t;(null==F?void 0:null===(e=F.query)||void 0===e?void 0:e.bill)&&z(parseInt((0,K.Jx)(null==F?void 0:null===(t=F.query)||void 0===t?void 0:t.bill)+""))}else z()},[N,F,Z]);let M=[{title:"M\xe3 đơn",dataIndex:"Type",render:(e,t)=>1==e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"font-[600] mb-[4px]",children:["M\xe3: ",null==t?void 0:t.Code]}),(0,l.jsx)(g.UM,{background:"blue",children:null==t?void 0:t.TypeName})]}):2==e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"font-[600] mb-[4px]",children:["M\xe3: ",null==t?void 0:t.Code]}),(0,l.jsx)(g.UM,{background:"green",children:null==t?void 0:t.TypeName})]}):3==e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"font-[600] mb-[4px]",children:["M\xe3: ",null==t?void 0:t.Code]}),(0,l.jsx)(g.UM,{background:"yellow",children:null==t?void 0:t.TypeName})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"font-[600] mb-[4px]",children:["M\xe3: ",null==t?void 0:t.Code]}),(0,l.jsx)(g.UM,{background:"dark",children:null==t?void 0:t.TypeName})]})},{title:"Người thanh to\xe1n",dataIndex:"FullName",width:220,render:(e,t)=>e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"text-[#1E88E5] font-[600]",children:e}),(0,l.jsxs)("p",{className:"text-[#000]",children:["M\xe3: ",(0,l.jsx)("div",{className:"inline font-[600]",children:null==t?void 0:t.UserCode})]})]}):""},{title:"Thanh to\xe1n",dataIndex:"Paid",render:(e,t)=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{className:"text-[#000]",children:["Tổng: ",(0,l.jsx)("div",{className:"inline font-[700] text-[#1E88E5]",children:(0,K.HP)(null==t?void 0:t.TotalPrice)})]}),(0,l.jsxs)("p",{className:"text-[#000]",children:["Đ\xe3 thanh to\xe1n: ",(0,l.jsx)("div",{className:"inline font-[700] text-[#388E3C]",children:(0,K.HP)(e)})]}),(0,l.jsxs)("p",{className:"text-[#000]",children:["Chưa thanh to\xe1n: ",(0,l.jsx)("div",{className:"inline font-[700] text-[#E53935]",children:(0,K.HP)(null==t?void 0:t.Debt)})]})]})},{title:"Giảm gi\xe1",dataIndex:"Reduced",render:(e,t)=>(0,l.jsxs)("div",{className:"min-w-[120px]",children:[(null==t?void 0:t.DiscountCode)&&(0,l.jsxs)("p",{className:"text-[#000]",children:["M\xe3: ",(0,l.jsx)("div",{className:"inline font-[600]",children:null==t?void 0:t.DiscountCode})]}),!!(null==t?void 0:t.Reduced)&&(0,l.jsxs)("p",{className:"text-[#000]",children:["Số tiền: ",(0,l.jsx)("div",{className:"inline font-[600]",children:(0,K.HP)(null==t?void 0:t.Reduced)})]}),!!(null==t?void 0:t.UsedMoneyReserve)&&(0,l.jsxs)("p",{className:"text-[#000]",children:["Tiền bảo lưu: ",(0,l.jsx)("div",{className:"inline font-[600]",children:(0,K.HP)(null==t?void 0:t.UsedMoneyReserve)})]})]})},{title:"Kỳ tiếp theo",dataIndex:"PaymentAppointmentDate",width:130,render:(e,t)=>(0,l.jsx)("p",{children:e?s()(e).format("DD/MM/YYYY"):""})},{title:"Khởi tạo",dataIndex:"CreatedOn",render:(e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-weight-primary",children:null==t?void 0:t.CreatedBy}),(0,l.jsx)("div",{children:s()(null==t?void 0:t.CreatedOn).format("HH:mm DD/MM/YYYY")})]})}],A=(0,K.is)(T).admin||(0,K.is)(T).teacher||(0,K.is)(T).manager||(0,K.is)(T).accountant||(0,K.is)(T).academic?[...M,{title:"",dataIndex:"Type",fixed:"right",width:60,render:(e,t)=>(0,l.jsxs)("div",{className:"flex item-center",children:[(0,l.jsx)(J.default,{data:t,getPaymentSessions:async e=>await Q.v.getAll({...e}),defaultGetPaymentSessionsParams:{billId:t.Id}}),(0,l.jsx)(L,{isEdit:!0,defaultData:t,onRefresh:z}),(null==t?void 0:t.Debt)<0&&(0,l.jsx)(X.default,{onRefresh:z,item:t}),$.includes(Number(null==t?void 0:t.Type))&&(0,l.jsx)(B,{defaultData:t,onRefresh:z})]})}]:(0,K.is)(T).saler?[...M,{title:"",dataIndex:"Type",fixed:"right",width:60,render:(e,t)=>(0,l.jsx)("div",{className:"flex item-center",children:(0,l.jsx)(L,{isEdit:!0,defaultData:t,onRefresh:z})})}]:M,H=document.getElementById("tabcomp-custom-container-scroll-horizontal");null==H||H.addEventListener("wheel",e=>{e.preventDefault(),H.scrollLeft+=e.deltaY});let[R,Y]=(0,d.useState)([]),[O,G]=(0,d.useState)([]),[ee,et]=(0,d.useState)(!1);(0,d.useEffect)(()=>{en(),el()},[]);let en=async()=>{try{let e=await m.Z.getAll({pageIndex:1,pageSize:99999});200==e.status?Y(e.data.data):Y([])}catch(e){_.Gu.error(null==e?void 0:e.message)}},el=async()=>{try{let e=await p.sy.getByRole({roleId:3,branchId:Z});200==e.status?G(e.data.data):G([])}catch(e){_.Gu.error(null==e?void 0:e.message)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r(),{children:(0,l.jsxs)("title",{children:[v.Z.appName," | Quản l\xfd thanh to\xe1n"]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1  w650:grid-cols-3 w1000:grid-cols-4 gap-[8px] mb-[8px]",children:[(0,l.jsxs)("div",{className:"col-span-1 bg-[#fff] flex border-[1px] border-[#eaedf3] rounded-[8px] gap-[8px] p-[8px]",children:[(0,l.jsx)("div",{className:"w-[40px] h-[40px] w700:w-[50px] w700:h-[50px] rounded-[8px] flex items-center justify-center bg-[#E0F2F1]",children:(0,l.jsx)("div",{className:"scale-75 w700:scale-100",children:(0,l.jsx)(g.Fn,{color:"#009688",size:32})})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-[600] text-[12px] w700:text-[14px] text-[#000]",children:"Tổng tiền"}),(0,l.jsxs)("div",{className:"font-bold text-[16px] w700:text-[20px] text-[#009688] mt-[-2px]",children:[_.Jy.numberToPrice((null==y?void 0:y.sumtotalPrice)||0),"₫"]})]})]}),(0,l.jsxs)("div",{className:"col-span-1 bg-[#fff] flex border-[1px] border-[#eaedf3] rounded-[8px] gap-[8px] p-[8px]",children:[(0,l.jsx)("div",{className:"w-[40px] h-[40px] w700:w-[50px] w700:h-[50px] rounded-[8px] flex items-center justify-center bg-[#E3F2FD]",children:(0,l.jsx)("div",{className:"scale-75 w700:scale-100",children:(0,l.jsx)(g.X7,{size:26,color:"#1E88E5"})})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-[600] text-[12px] w700:text-[14px] text-[#000]",children:"Đ\xe3 thanh to\xe1n"}),(0,l.jsxs)("div",{className:"font-bold text-[16px] w700:text-[20px] text-[#1E88E5] mt-[-2px]",children:[_.Jy.numberToPrice((null==y?void 0:y.sumPaid)||0),"₫"]})]})]}),(0,l.jsxs)("div",{className:"col-span-1 bg-[#fff] flex border-[1px] border-[#eaedf3] rounded-[8px] gap-[8px] p-[8px]",children:[(0,l.jsx)("div",{className:"w-[40px] h-[40px] w700:w-[50px] w700:h-[50px] rounded-[8px] flex items-center justify-center bg-[#f9dc6870]",children:(0,l.jsx)("div",{className:"scale-75 w700:scale-100",children:(0,l.jsx)(o.tMd,{size:26,color:"#edc627"})})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-[600] text-[12px] w700:text-[14px] text-[#000]",children:"Khấu trừ khuyến m\xe3i"}),(0,l.jsxs)("div",{className:"font-bold text-[16px] w700:text-[20px] text-[#edc627] mt-[-2px]",children:[_.Jy.numberToPrice((null==y?void 0:y.sumReduced)||0),"₫"]})]})]}),(0,l.jsxs)("div",{className:"col-span-1 bg-[#fff] flex border-[1px] border-[#eaedf3] rounded-[8px] gap-[8px] p-[8px]",children:[(0,l.jsx)("div",{className:"w-[40px] h-[40px] w700:w-[50px] w700:h-[50px] rounded-[8px] flex items-center justify-center bg-[#FBE9E7]",children:(0,l.jsx)("div",{className:"scale-75 w700:scale-100",children:(0,l.jsx)(u.mVl,{color:"#E53935",size:32})})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-[600] text-[12px] w700:text-[14px] text-[#000]",children:"Tổng nợ"}),(0,l.jsxs)("div",{className:"font-bold text-[16px] w700:text-[20px] text-[#E53935] mt-[-2px]",children:[_.Jy.numberToPrice((null==y?void 0:y.sumDebt)||0),"₫"]})]})]})]}),(0,l.jsx)(g.Py,{visible:ee,style:{marginBottom:8},onClickButton:()=>et(!ee),children:(0,l.jsx)(q.default,{billStatus:S,statusSelected:P,filters:N,setFilter:w,handleSelecStatus:e=>{P!==e&&(C(e),w({...N,type:e,pageIndex:1}))}},"filter-v3")}),(0,l.jsx)(V.Z,{currentPage:N.pageIndex,totalPage:a&&a,getPagination:e=>w({...N,pageIndex:e}),loading:{type:"GET_ALL",status:t},dataSource:f,columns:A,TitleCard:(0,l.jsxs)("div",{className:"w-full flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-start gap-[8px]",children:[!!(null==F?void 0:F.asPath.includes("bill="))&&(0,K.is)(T).student&&(0,l.jsx)(l.Fragment,{children:"Th\xf4ng tin thanh to\xe1n"}),!!(null==F?void 0:F.asPath.includes("bill="))&&((0,K.is)(T).admin||(0,K.is)(T).teacher||(0,K.is)(T).manager||(0,K.is)(T).accountant||(0,K.is)(T).academic)&&(0,l.jsx)(k.Z,{type:"button",background:"green",icon:"file",onClick:()=>F.push("/finance/payment"),children:"Xem tất cả"}),!(null==F?void 0:F.asPath.includes("bill="))&&(0,l.jsx)(l.Fragment,{children:((0,K.is)(T).admin||(0,K.is)(T).teacher||(0,K.is)(T).manager||(0,K.is)(T).accountant||(0,K.is)(T).academic)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.fU,{useISOString:!0,showYesterday:!1,onSubmit:e=>w({...N,fromDate:null==e?void 0:e.start,toDate:null==e?void 0:e.end})}),(0,l.jsx)(g.Py,{isButton:!0,visible:ee,onClickButton:()=>et(!ee)})]})})]}),((0,K.is)(T).admin||(0,K.is)(T).teacher||(0,K.is)(T).manager||(0,K.is)(T).accountant||(0,K.is)(T).academic)&&!(null==F?void 0:F.asPath.includes("bill="))&&(0,l.jsx)(E,{onRefresh:z})]}),expandable:e=>(0,l.jsx)(U.Z,{bill:e})})]})};ee.Layout=g.Zn;var et=ee},17331:function(e){e.exports={"chaos-btn-23":"styles_chaos-btn-23__JeXof","btn-transparent":"styles_btn-transparent__s41Zi","btn-create":"styles_btn-create__WFIrb","btn-save":"styles_btn-save__837yn","btn-edit":"styles_btn-edit__uvVO8","btn-delete":"styles_btn-delete__Tao4i","btn-export":"styles_btn-export__3IPju","btn-warning":"styles_btn-warning__po0oc","btn-purple":"styles_btn-purple__wMCn5","hover-opacity":"styles_hover-opacity__bpXH_","hover-scale-out":"styles_hover-scale-out__UXiwo","hover-scale-in":"styles_hover-scale-in__q1Szt",spin:"styles_spin__7snR9"}},83677:function(e){e.exports={container:"styles_container__JxAv7","btn-create":"styles_btn-create__zwQL9"}},13277:function(e){e.exports={container:"styles_container__proPV"}},4915:function(e){e.exports={container:"styles_container__RuLuz",close:"styles_close__qPDWn","btn-filter":"styles_btn-filter__ez8Sz"}},15637:function(e){e.exports={tag:"styles_tag__q2C27","blue-tag":"styles_blue-tag__fpf1A","red-tag":"styles_red-tag__NedIP","green-tag":"styles_green-tag__baHu5","yellow-tag":"styles_yellow-tag__TecTs","black-tag":"styles_black-tag__OEF5V","white-tag":"styles_white-tag__qJWk_","dark-tag":"styles_dark-tag__m3gMm","turquoise-tag":"styles_turquoise-tag__q00o1","teal-tag":"styles_teal-tag__pxduh","deeppurple-tag":"styles_deeppurple-tag__tC_wG","purple-tag":"styles_purple-tag__zPlGS"}}},function(e){e.O(0,[6130,4838,7909,8391,5970,6660,4396,4817,594,3365,8151,1653,4321,2961,4738,648,8127,1698,8460,9915,6565,653,6655,1607,6361,5009,4253,9872,1379,861,8675,8210,3604,6369,7333,9415,6954,9759,2888,9774,179],function(){return e(e.s=2347)}),_N_E=e.O()}]);