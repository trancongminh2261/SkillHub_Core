(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7502],{13742:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/class/list-class",function(){return a(65834)}])},59105:function(e,t,a){"use strict";var l=a(85893),s=a(67294),n=a(63237),i=a(3027),r=a(64735);t.Z=e=>{let{handleDelete:t,text:a,title:c,setShowPop:d,disable:o}=e,[u,h]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),p=()=>{t&&(x(!0),t().then(e=>{(null==e?void 0:e.status)==200&&h(!1)}).finally(()=>x(!1)))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{className:"".concat(o?"opacity-30 mt-[-8px]":""),disabled:o,color:"primary",type:"button",icon:"remove",placementTooltip:"left",tooltip:c||"X\xf3a",onClick:function(){h(!0),d&&d("")}}),(0,l.jsx)(n.Z,{title:"X\xe1c nhận x\xf3a",open:u,onCancel:()=>h(!1),footer:(0,l.jsxs)("div",{className:"flex-all-center",children:[(0,l.jsx)(i.Z,{type:"button",icon:"cancel",background:"transparent",onClick:()=>h(!1),className:"mr-2 btn-outline",children:"Hủy"}),(0,l.jsx)(i.Z,{type:"button",icon:"remove",background:"red",onClick:()=>p(),disable:m,loading:m,children:"X\xf3a"})]}),children:(0,l.jsxs)("p",{className:"text-base text-center",children:["Bạn muốn x\xf3a ",(0,l.jsx)("span",{className:"text-[#f25767]",children:a}),"?"]})})]})}},22292:function(e,t,a){"use strict";var l=a(85893),s=a(67294),n=a(96369),i=a(31379),r=a(16655),c=a(74253),d=a(36070),o=a(64811),u=a(30381),h=a.n(u),m=a(58416),x=a(92088);t.Z=e=>{let{dataFilter:t}=e,{handleFilter:a,handleReset:u}=e,{RangePicker:p}=n.default,[v,j]=(0,s.useState)(t),[f,N]=(0,s.useState)(!1),[g]=i.Z.useForm(),{Option:y}=r.default,b="YYYY/MM/DD",I=()=>{j(v.map(e=>(e.value=null,e)))},C=(e,t)=>{v.every((a,l)=>a.name!=t||(a.value=e,!1)),j([...v])},S=(e,t,a)=>{switch(t){case"date-range":if(e.length>1){let t=h()(e[0].toDate()).format("YYYY/MM/DD"),a=h()(e[1].toDate()).format("YYYY/MM/DD");v.push({name:"fromDate",value:t},{name:"toDate",value:a}),j([...v])}else(0,m.fr)("error","Chưa chọn đầy đủ ng\xe0y");break;case"date-single":C(h()(e.toDate()).format("YYYY/MM/DD"),a);break;default:C(e,a)}},w=(e,t)=>{switch(e.type){case"select":var a;return(0,l.jsx)("div",{className:e.col,children:(0,l.jsx)(i.Z.Item,{name:e.name,label:e.title,children:(0,l.jsx)(r.default,{allowClear:!0,mode:e.mode,style:{width:"100%"},className:"primary-input",showSearch:!0,optionFilterProp:"children",onChange:t=>S(t,"select",e.name),placeholder:e.placeholder,children:null===(a=e.optionList)||void 0===a?void 0:a.map((e,t)=>(0,l.jsx)(y,{value:e.value,children:e.title},t))})})},t);case"text":return(0,l.jsx)("div",{className:e.col,children:(0,l.jsx)(i.Z.Item,{name:e.name,label:e.title,children:(0,l.jsx)(c.default,{placeholder:e.placeholder,className:"primary-input",onChange:t=>S(t.target.value,"text",e.name),allowClear:!0})})},t);case"date-range":return(0,l.jsx)("div",{className:e.col,children:(0,l.jsx)(i.Z.Item,{name:e.name,label:e.title,children:(0,l.jsx)(p,{placeholder:["Bắt đầu","Kết th\xfac"],className:"primary-input",format:b,onChange:t=>S(t,"date-range",e.name)})})},t);case"date-single":return(0,l.jsx)("div",{className:e.col,children:(0,l.jsx)(i.Z.Item,{name:e.name,label:e.title,children:(0,l.jsx)(n.default,{className:"primary-input",format:b,onChange:t=>S(t,"date-single",e.name)})})});default:return""}},T=(0,l.jsx)("div",{className:"wrap-filter small",children:(0,l.jsx)(i.Z,{form:g,layout:"vertical",onFinish:()=>{a(v),N(!1)},children:(0,l.jsxs)("div",{className:"row",children:[t.map((e,t)=>w(e,t)),(0,l.jsx)("div",{className:"col-md-12",children:(0,l.jsxs)(i.Z.Item,{className:"mb-0",children:[(0,l.jsxs)("button",{type:"button",className:"light btn btn-secondary",style:{marginRight:"10px"},onClick:()=>{u(),N(!1),I(),g.resetFields()},children:[(0,l.jsx)(x.TeN,{size:18,className:"mr-1"}),"Kh\xf4i phục"]}),(0,l.jsxs)("button",{type:"submit",className:"btn btn-primary",style:{marginRight:"10px"},children:[(0,l.jsx)(x.vU7,{size:18,className:"mr-1"}),"T\xecm kiếm"]})]})})]})})});return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(d.Z,{visible:f,placement:"bottomRight",content:T,trigger:"click",overlayClassName:"filter-popover",onVisibleChange:e=>{N(e)},children:(0,l.jsx)("button",{className:"btn btn-secondary light btn-filter",children:(0,l.jsx)(o.Z,{})})})})}},65834:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return A}});var l=a(85893),s=a(67294),n=a(26674),i=a(31379),r=a(96361),c=a(16655),d=a(98549),o=a(9473),u=a(6315),h=a(88291),m=a(26334),x=a(36070),p=a(77024),v=a(30381),j=a.n(v),f=a(41664),N=a.n(f),g=a(8285),y=a(65890),b=a(92594),I=a(85340),C=a(92088),S=a(54425),w=a(63237),T=a(58416),Z=a(42006),k=a(24746),O=a(59105),Y=a(3027),D=a(53190);let R=e=>{let{isLoading:t,dataSource:a,setTodoApi:n,listTodoApi:i,totalRow:r,todoApi:c,getAllClass:d}=e,[v,f]=(0,s.useState)([]),{information:R}=(0,o.v9)(e=>e).user,[E,_]=(0,s.useState)(!1),[P,F]=(0,s.useState)({id:null,open:null}),[M,z]=(0,s.useState)(""),A=(e,t)=>(0,l.jsx)("div",{className:"custom-tag-ant",children:(0,l.jsx)(m.Z,{color:"".concat(["gold","blue","default"][e-1]),children:t})}),B=e=>R?(null==R||R.RoleId,{pathname:"/class/list-class/detail",query:{class:null==e?void 0:e.Id,CurriculumId:null==e?void 0:e.CurriculumId,BranchId:null==e?void 0:e.BranchId}}):"",L=e=>R?(null==R||R.RoleId,{pathname:"/class/list-class/tutoring",query:{class:null==e?void 0:e.Id,CurriculumId:null==e?void 0:e.CurriculumId,BranchId:null==e?void 0:e.BranchId}}):"",Q=async()=>{try{let e=await h.sy.getAll({roleIds:"7"});if(200===e.status){let t=(0,Z.vn)(e.data.data,"FullName","UserInformationId");f(t)}204===e.status&&f([])}catch(e){(0,T.fr)("error",e.message)}},H=async e=>{_(!0);try{let t=await u.Q.deleteClass(e);200===t.status&&(n(i),F({id:e,open:!1}),d(),(0,T.fr)("success",t.data.message))}catch(e){(0,T.fr)("error",e.message)}finally{_(!1)}},U=async e=>{try{let t=await u.Q.checkExistStudentInClass(e);if(200===t.status)return!0===t.data.data?F({id:e,open:!0}):H(e),t}catch(e){(0,T.fr)("error",e.message)}};return(0,s.useEffect)(()=>{(null==R?void 0:R.RoleId)==1&&Q()},[]),(0,l.jsx)("div",{className:"content-class",children:null==a?void 0:a.map(e=>(0,l.jsx)("div",{className:"item",children:(0,l.jsxs)("div",{className:"inner-item",children:[(0,l.jsx)("div",{className:"header",children:(0,l.jsxs)("div",{className:"header-inner",children:[(0,l.jsx)("div",{className:"status",children:A(e.Status,e.StatusName)}),(0,l.jsx)("div",{className:"action",children:(0,l.jsx)(x.Z,{open:M==(null==e?void 0:e.Id),onOpenChange:t=>z(t?null==e?void 0:e.Id:""),placement:"left",trigger:"click",content:(0,l.jsxs)("div",{children:[(0,l.jsx)(D.Z,{getAllClass:d,setShowPop:z,dataRow:e,setTodoApi:n,listTodoApi:i,academic:v}),(0,l.jsx)(O.Z,{setShowPop:z,text:"".concat(e.Name),handleDelete:()=>U(e.Id)}),(0,l.jsx)(w.Z,{title:"X\xe1c nhận x\xf3a",open:e.Id===P.id&&P.open,onCancel:()=>F({...P,open:!1}),footer:(0,l.jsx)(Y.Z,{onClick:()=>H(e.Id),background:"blue",type:"button",icon:"remove",disable:E,loading:E,children:"X\xf3a"}),children:(0,l.jsxs)("p",{children:["Lớp học đang c\xf3 ",(0,l.jsx)("span",{className:"font-medium text-[#1b73e8]",children:e.TotalStudent})," học vi\xean. Bạn c\xf3 chắc muốn x\xf3a?"]})})]}),title:null,children:(0,l.jsx)("button",{children:(0,l.jsx)(g.Q81,{size:22,color:"#fff"})})})})]})}),(null==e?void 0:e.Type)!==3?(0,l.jsx)(N(),{href:B(e),children:(0,l.jsx)("div",{className:"image",children:(0,l.jsx)(k.Z,{url:e.Thumbnail,type:"class"})})}):(0,l.jsx)(N(),{href:L(e),children:(0,l.jsx)("div",{className:"image",children:(0,l.jsx)(k.Z,{url:e.Thumbnail,type:"class"})})}),(0,l.jsx)("div",{className:"content",children:(0,l.jsxs)("div",{className:"content-body",children:[(0,l.jsx)("div",{className:"title",children:(null==e?void 0:e.Type)!==3?(0,l.jsx)(N(),{href:B(e),children:(0,l.jsx)(p.Z,{title:null==e?void 0:e.Name,children:(0,l.jsx)("div",{className:"font-medium hover:underline",children:e.Name})})}):(0,l.jsx)(N(),{href:L(e),children:(0,l.jsx)(p.Z,{title:null==e?void 0:e.Name,children:(0,l.jsx)("div",{className:"font-medium hover:underline",children:e.Name})})})}),(0,l.jsxs)("div",{className:"inner-body",children:[(0,l.jsx)(p.Z,{title:"Chuy\xean m\xf4n",children:e.GradeName&&(0,l.jsxs)("div",{className:"i",children:[(0,l.jsx)("div",{className:"icn",children:(0,l.jsx)(C.Rlb,{})}),(0,l.jsx)("p",{children:e.GradeName})]})}),(0,l.jsx)(p.Z,{title:"H\xecnh thức",children:e.TypeName&&(0,l.jsxs)("div",{className:"i",children:[(0,l.jsx)("div",{className:"icn",children:(0,l.jsx)(b.yK7,{})}),(0,l.jsx)("p",{children:e.TypeName})]})}),(0,l.jsx)(p.Z,{title:"Chương tr\xecnh",children:e.ProgramName&&(0,l.jsxs)("div",{className:"i",children:[(0,l.jsx)("div",{className:"icn",children:(0,l.jsx)(S.QeY,{})}),(0,l.jsx)("p",{children:e.ProgramName})]})}),(0,l.jsx)(p.Z,{title:"Gi\xe1o tr\xecnh",children:e.CurriculumName&&(0,l.jsxs)("div",{className:"i",children:[(0,l.jsx)("div",{className:"icn",children:(0,l.jsx)(I.HBT,{})}),(0,l.jsx)("p",{children:e.CurriculumName})]})}),(0,l.jsx)(p.Z,{title:"Học ph\xed",children:R&&(null==R?void 0:R.RoleId)==1&&(0,l.jsxs)("div",{className:"i",children:[(0,l.jsx)("div",{className:"icn",children:(0,l.jsx)(C.DkQ,{})}),(0,l.jsxs)("p",{children:[(0,Z.HP)(e.Price)," VNĐ"]})]})}),(0,l.jsx)(p.Z,{title:"Học vụ",children:e.AcademicName&&(0,l.jsxs)("div",{className:"i",children:[(0,l.jsx)("div",{className:"icn",children:(0,l.jsx)(I.KBe,{})}),(0,l.jsx)("p",{children:e.AcademicName})]})})]}),(0,l.jsxs)("div",{className:"inner-body-top",children:[(0,l.jsxs)("p",{children:["Số buổi học: ",(0,l.jsx)("span",{children:e.TotalLesson})]}),(0,l.jsxs)("p",{children:["Số buổi đ\xe3 học: ",(0,l.jsx)("span",{children:e.LessonCompleted||0})]})]})]})}),(0,l.jsx)("div",{className:"line"}),(0,l.jsxs)("div",{className:"footer-s",children:[(0,l.jsx)(x.Z,{content:"Số học vi\xean",children:(0,l.jsxs)("div",{className:"item",children:[(0,l.jsx)("div",{className:"icon",children:(0,l.jsx)(I.Otr,{size:12})}),(0,l.jsxs)("p",{children:["".concat(e.TotalStudent||0),e.MaxQuantity&&(null==R?void 0:R.RoleId)==1&&"/".concat(e.MaxQuantity)]})]})}),(0,l.jsx)(x.Z,{content:"Thời gian bắt đầu - kết th\xfac",children:(0,l.jsxs)("div",{className:"item",children:[(0,l.jsx)("div",{className:"icon",children:(0,l.jsx)(y.N4h,{size:12})}),(0,l.jsx)("p",{children:"".concat(e.StartDay?j()(e.StartDay).format("DD/MM/YYYY"):"Trống"," - ").concat(e.EndDay?j()(e.EndDay).format("DD/MM/YYYY"):"Trống")})]})})]})]})}))})};var E=a(22292),_=a(39292);let P={name:null,status:null,branchIds:null,pageSize:_.I,pageIndex:1,sort:0,sortType:!1,studentId:null},F={pageIndex:1,pageSize:_.I,name:null,status:null,branchIds:null};var M=()=>{let[e]=i.Z.useForm(),[t,a]=(0,s.useState)([{name:"name",title:"T\xean lớp học",col:"col-md-6 col-12",type:"text",placeholder:"Nhập t\xean lớp học",value:null},{name:"status",title:"Trạng th\xe1i",col:"col-md-6 col-12",type:"select",placeholder:"Chọn trạng th\xe1i",value:null,optionList:[{value:1,title:"Sắp diễn ra"},{value:2,title:"Đang diễn ra"},{value:3,title:"Kết th\xfac"}]},{name:"branchIds",title:"Trung t\xe2m",col:"col-12",type:"select",mode:"multiple",placeholder:"Chọn trung t\xe2m",value:null,optionList:[]}]),[n,m]=(0,s.useState)(P),[x,p]=(0,s.useState)([]),[v,j]=(0,s.useState)(null),[f,N]=(0,s.useState)(!1),g=(0,o.v9)(e=>e),[y,b]=(0,s.useState)(1);(0,o.I0)();let[I,C]=(0,s.useState)(null),S=(0,o.v9)(e=>e.user.information),w=async()=>{N(!0);try{let e=await u.Q.getAll(n);200===e.status&&((null==S?void 0:S.RoleId)==="8"?n.studentId&&""!==n.studentId?(p(e.data.data),j(e.data.totalRow)):(p([]),j(0)):(p(e.data.data),j(e.data.totalRow))),204===e.status&&p([])}catch(e){(0,T.fr)("error",e.message)}finally{N(!1)}},[k,O]=(0,s.useState)({PageSize:9999,PageIndex:1,RoleIds:"3",parentIds:(null==S?void 0:S.RoleId)=="8"?S.UserInformationId.toString():""}),[Y,D]=(0,s.useState)([]),M=async e=>{try{let a=await h.sy.getAll(e);if(200==a.status){var t;let e=[];null===(t=a.data.data)||void 0===t||t.forEach(t=>{e.push({label:"".concat(null==t?void 0:t.FullName," - ").concat(t.UserCode),value:t.UserInformationId})}),D(e)}204==a.status&&D([])}catch(e){console.error(e)}finally{}};(0,s.useEffect)(()=>{(null==S?void 0:S.RoleId)==="8"&&M(k)},[]),(0,s.useEffect)(()=>{if(g.branch.Branch.length>0){let e=(0,Z.vn)(g.branch.Branch,"Name","Id");t[2].optionList=e,a([...t])}},[g]),(0,s.useEffect)(()=>{w()},[n]),(0,s.useEffect)(()=>{Y&&(null==Y?void 0:Y.length)>0&&(m({...n,studentId:Y[0].value}),e.setFieldValue("student",Y[0].value))},[Y]);let z=e=>{b(e),m({...n,pageIndex:e})},A=e=>{C(e),m({...n,status:e})};return(0,l.jsx)("div",{className:"wrapper-class",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("div",{className:"wrap-table",children:(0,l.jsx)(r.Z,{title:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"list-action-table",children:(0,l.jsx)(E.Z,{dataFilter:t,handleFilter:e=>{C(null);let t={...F};e.forEach((e,a)=>{let l=e.name;Object.keys(t).forEach(a=>{a==l&&(t[l]=e.value),"status"===l&&C(e.value)})}),m({...n,...t,branchIds:t.branchIds?t.branchIds.join(","):"",pageIndex:1})},handleReset:()=>{C(null),m({...P})}})}),(0,l.jsxs)("div",{className:"list-action-button",children:[(0,l.jsx)("div",{onClick:()=>A(1),className:"item ".concat(1==I?"active":""),children:"Sắp diễn ra"}),(0,l.jsx)("div",{onClick:()=>A(2),className:"item  ".concat(2==I?"active":""),children:"Đang diễn ra"}),(0,l.jsx)("div",{onClick:()=>A(3),className:"item  ".concat(3==I?"active":""),children:"Kết th\xfac"})]})]}),extra:(null==S?void 0:S.RoleId)==="8"?(0,l.jsx)(i.Z,{form:e,children:(0,l.jsx)(i.Z.Item,{name:"student",children:(0,l.jsx)(c.default,{allowClear:!0,className:"w-[200px]",onChange:e=>{e?m({...n,studentId:e}):m(P)},options:Y,placeholder:"Chọn học vi\xean"})})}):"",children:(0,l.jsxs)("div",{className:"course-list-content",children:[(0,l.jsx)(R,{totalRow:v,isLoading:f,dataSource:x,setTodoApi:m,listTodoApi:P,todoApi:n,getAllClass:w}),(0,l.jsx)("div",{className:"custom-pagination",children:(0,l.jsx)(d.Z,{size:"small",current:y,onChange:e=>z(e),total:v,pageSize:_.I,showTotal:()=>v&&(0,l.jsxs)("div",{className:"font-weight-black",children:["Tổng cộng: ",v]})})})]})})})})})})};let z=()=>(0,l.jsx)(M,{});z.Layout=n.C;var A=z},92703:function(e,t,a){"use strict";var l=a(50414);function s(){}function n(){}n.resetWarningCache=s,e.exports=function(){function e(e,t,a,s,n,i){if(i!==l){var r=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:s};return a.PropTypes=a,a}},45697:function(e,t,a){e.exports=a(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},64811:function(e,t,a){"use strict";var l=a(67294),s=a(45697),n=a.n(s);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e}).apply(this,arguments)}var r=(0,l.forwardRef)(function(e,t){var a=e.color,s=e.size,n=void 0===s?24:s,r=function(e,t){if(null==e)return{};var a,l,s=function(e,t){if(null==e)return{};var a,l,s={},n=Object.keys(e);for(l=0;l<n.length;l++)a=n[l],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(l=0;l<n.length;l++)a=n[l],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}(e,["color","size"]);return l.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:void 0===a?"currentColor":a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r),l.createElement("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}))});r.propTypes={color:n().string,size:n().oneOfType([n().string,n().number])},r.displayName="Filter",t.Z=r}},function(e){e.O(0,[6130,4838,7909,8391,5970,6660,4396,4817,594,3365,8151,1653,4321,2961,4738,648,8460,9915,6565,653,6655,1607,6361,5009,4253,9872,1379,6369,4696,6297,6954,9427,2888,9774,179],function(){return e(e.s=13742)}),_N_E=e.O()}]);