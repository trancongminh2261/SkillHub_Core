(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1120],{65320:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});var l=n(59178);let s="/api/DoingTest",i={getAll:e=>l.e.get(s,{params:e}),getDraft:e=>l.e.get(s+"/draft",{params:e}),getByID:e=>l.e.get("".concat(s,"/").concat(e)),getQuestionGroup:e=>l.e.get("".concat(s,"/ielts-question-group"),{params:e}),getRemainingQuestion:e=>l.e.get("".concat(s,"/total-question-uncompleted/").concat(e)),getRemainingQuestionInSkill:e=>l.e.get("".concat(s,"/total-question-uncompleted-skill"),{params:e}),post:e=>l.e.post(s,e),saveCurrentSection:e=>l.e.post(s+"/current-section",e),insertDetail:e=>l.e.post(s+"/insert-or-update-details",e),put:e=>l.e.put(s,e),delete:e=>l.e.delete(s+"/"+e)}},34617:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});var l=n(59178);let s="/api/IeltsExam",i={getAll:e=>l.e.get(s,{params:e}),getOptions:()=>l.e.get(s+"/option"),getByID:e=>l.e.get("".concat(s,"/").concat(e)),getQuestions:e=>l.e.get("".concat(s,"/ielts-question-in-section"),{params:e}),post:e=>l.e.post(s,e),put:e=>l.e.put(s,e),delete:e=>l.e.delete(s+"/"+e),getOverview:e=>l.e.get("".concat(s,"/overview"),{params:{ieltsExamId:e}}),addQuestionGroupToExam:e=>l.e.post(s+"/add-questions-group-to-exam",e)}},79930:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var l=n(59178);let s={uploadImage(e){let t=new FormData;return t.append("file",e),l.e.post("".concat("/api/Base","/Upload"),t,{})}}},78160:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var l=n(85893),s=n(67294),i=n(90918),o=n(34223),a=e=>{let{hidden:t}=e;return t?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)("div",{className:"editor-loading absolute top-0 left-0",children:[(0,l.jsxs)("div",{className:"editor-loading-header",children:[(0,l.jsx)("div",{className:"editor-loading-left-item",children:(0,l.jsx)(o.Z,{active:!0,round:!0,paragraph:!1,style:{width:30}})}),(0,l.jsx)("div",{className:"editor-loading-right-item",children:(0,l.jsx)(o.Z,{active:!0,round:!0,paragraph:!1,style:{width:30}})}),(0,l.jsx)("div",{className:"editor-loading-left-item",children:(0,l.jsx)(o.Z,{active:!0,round:!0,paragraph:!1,style:{width:20}})}),(0,l.jsx)("div",{className:"editor-loading-right-item",children:(0,l.jsx)(o.Z,{active:!0,round:!0,paragraph:!1,style:{width:30}})}),(0,l.jsx)("div",{className:"editor-loading-right-item",style:{paddingLeft:16},children:(0,l.jsx)(o.Z,{active:!0,round:!0,paragraph:!1,style:{width:50}})})]}),(0,l.jsxs)("div",{style:{padding:16},children:[(0,l.jsx)(o.Z,{active:!0,paragraph:!1,style:{width:"30%"}}),(0,l.jsx)(o.Z,{active:!0,paragraph:!1,style:{width:"80%",marginTop:8}}),(0,l.jsx)(o.Z,{active:!0,paragraph:!1,style:{width:"60%",marginTop:8}}),(0,l.jsx)(o.Z,{active:!0,paragraph:!1,style:{width:"90%",marginTop:8}})]})]})},d=["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","lineheight","lists","table","paste"],r=n(82979),c=n(41480),u=n.n(c),v=n(42474),m=n.n(v),h=n(9473),x=n(68660),f=n(79930),g=n(58416),p=e=>{let{initialValue:t,height:n,id:o,inline:c,skin:v,menubar:p,apiKey:I,init:b,ref:j,noFullscreen:w}=e,{onInit:N,onChange:y,onBlur:C,isFillInBlank:A}=e,k=(0,s.useRef)(null),[D,R]=(0,s.useState)(!0),T=(0,h.v9)(e=>e.createQuestion.Questions),E=(0,h.I0)();return(0,l.jsxs)("div",{className:u().ccEditor,children:[(0,l.jsx)(a,{hidden:!D}),(0,l.jsx)(i.M,{id:o||"the-cc-editor",onInit:function(e,t){k.current=t,R(!1),N&&N()},initialValue:t||"",onEditorChange:function(){var e,t;y&&y(k.current.getContent());let n=null===(e=k.current)||void 0===e?void 0:e.dom.doc.getElementsByClassName("b-in");if(n.length==T.length)return;if(n&&n.length>0)for(let e=0;e<n.length;e++)n[e].placeholder="(".concat(e+1,")");let l=null===(t=k.current)||void 0===t?void 0:t.dom.doc.getElementsByClassName("b-in");E((0,x.d9)([...l]))},onBlur:function(){C&&C()},init:{...b,paste_preprocess:function(e,t){t.content.indexOf("<img ")>-1&&(t.content=t.content.replace(/<img[^>\"']*(((\"[^\"]*\")|('[^']*'))[^\"'>]*)*>/g,""))},toolbar_mode:"sliding",skin:v||"oxide",content_css:"writer cc-main-editor",inline:c||!1,height:n||500,menubar:p||!1,plugins:d,toolbar:"fullscreen ".concat(r.Z),quickBar:!1,contextmenu:!1,content_style:"".concat(".b-in {border: 0px; text-align: center; background: #d3d3d3; max-width: 80px; width: auto; border-radius: 6px; font-size: 16px; padding: 2px 8px; outline: none !important; margin: 2px 4px !important;}"," ").concat(".idx-b {color: #fff; margin-left: 4px; width: 20px; height: 20px; display: inline-flex; align-items: center; justify-content: center; background: #1890ff; border-radius: 999px;}"," ").concat("body { font-family: 'Arial'; font-size: 12pt; }"),setup:function(e){A&&e.ui.registry.addButton("customInsertButton",{icon:"comment-add",tooltip:"Th\xeam c\xe2u hỏi",onAction:()=>{let t=new Date().getTime(),n=' <input class="b-in" disabled id="ip-'.concat(m().createHash("md5").update(t.toString()).digest("hex").substring(0,6),'"></input>');e.insertContent(n)}})},image_title:!0,file_picker_types:"file image media",images_upload_handler:async function(e){new FormData().append("files[]",e.blob());try{let t=await f.X.uploadImage(e.blob());if(200==t.status)return new Promise((e,n)=>{e(t.data.data)})}catch(e){(0,g.fr)("error",e.message);return}},relative_urls:0,remove_script_host:0,convert_urls:!1}})]})}},82979:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});let l="undo redo",s="bold italic underline strikethrough",i="forecolor backcolor",o="alignleft aligncenter alignright alignjustify";t.Z="".concat(l," | customInsertButton | link | ").concat(s," | ").concat(i," | image | ").concat("fontfamily fontsize blocks"," | ").concat(o," | lineheight | numlist bullist | table tabledelete | tableprops tablerowprops tablecellprops | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol'");let a="".concat(l," | fontsize | ").concat(s," | ").concat(o," | ").concat(i," | code | link media image")},2621:function(e,t,n){"use strict";var l=n(85893),s=n(31379),i=n(33653),o=n(74253),a=n(67294),d=n(78268),r=n(92594),c=n(57333),u=n(9473),v=n(63237),m=n(78160),h=n(3027),x=n(17298),f=n(4644),g=n(45827);t.Z=e=>{let{isEdit:t,defaultData:n,isChangeInfo:p,onOpen:I,section:b}=e,j=(0,u.I0)(),w=(0,u.v9)(e=>e.globalState.currentExerciseForm),[N]=s.Z.useForm(),[y,C]=(0,a.useState)(!1),[A,k]=(0,a.useState)(!1),[D,R]=(0,a.useState)([]),[T,E]=(0,a.useState)("");function S(){R([]),N.resetFields(),k(!1),C(!1)}async function Z(e){let t=[];w.forEach(n=>{n.Id?n.Id==e.Id?t.push(e):t.push(n):(null==n?void 0:n.timestamp)==(null==e?void 0:e.timestamp)?t.push(e):t.push(n)}),j((0,f.Cc)(t)),S()}async function M(e){console.log("DATA_SUBMIT: ",e);let t=[],n=1;w.forEach(e=>{t.push(e),!1!==e.Enable&&n++}),t.push({...e,Index:n}),j((0,f.Cc)(t)),S()}async function P(){N.setFieldsValue({...n}),R(null==n?void 0:n.IeltsAnswers),k(!0)}async function q(){k(!0)}async function F(e){C(!0),E("");let t=await function(){if(!N.getFieldValue("Content"))return"Vui l\xf2ng th\xeam nội dung c\xe2u hỏi";if(0==D.length)return"Vui l\xf2ng th\xeam đ\xe1p \xe1n";let e=!1;return(D.forEach(t=>{t.Correct&&!1!==t.Enable&&(e=!0)}),e)?"":"Vui l\xf2ng th\xeam \xedt nhất một đ\xe1p \xe1n đ\xfang"}();if(t)C(!1),E(t);else{let t={...e,IeltsAnswers:D};n?Z({...n,...t,IeltsAnswers:D}):M({...t,Id:0,timestamp:new Date().getTime()})}}return(0,a.useEffect)(()=>{A&&I&&I()},[A]),(0,a.useEffect)(()=>{console.log(D,"answers")},[D]),(0,l.jsxs)(l.Fragment,{children:[!t&&!p&&(0,l.jsx)(h.Z,{onClick:q,icon:"add",background:"green",type:"button",children:"Th\xeam c\xe2u hỏi"}),!!t&&(0,l.jsxs)("div",{onClick:P,className:"cc-update-group-button",children:[(0,l.jsx)(r.vPQ,{size:18,className:"mr-2 mt-[-2px]"}),"Cập nhật"]}),(0,l.jsx)(v.Z,{centered:!0,title:t?"Cập nhật c\xe2u hỏi":"Th\xeam c\xe2u hỏi",width:700,open:A,onCancel:()=>!y&&k(!1),footer:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{disable:y,onClick:()=>k(!1),background:"red",icon:"cancel",type:"button",children:"Huỷ"}),(0,l.jsx)(h.Z,{loading:y,onClick:function(){if(!N.getFieldValue("Point")){let e=document.getElementById("input-point");e&&e.focus()}N.submit()},className:"ml-2",background:"blue",icon:"save",type:"button",children:"Lưu"})]}),children:(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-x-4",children:[(0,l.jsxs)(s.Z,{form:N,onFinish:F,layout:"vertical",className:"col-span-4 grid grid-cols-4 gap-x-4",children:[(0,l.jsx)(s.Z.Item,{label:"Điểm",name:"Point",className:"col-span-4",required:!0,rules:x.i,children:(0,l.jsx)(c.h3,{id:"input-point",onChange:e=>N.setFieldValue("Point",e.target.value),className:"primary-input px-2 w-full",thousandSeparator:!0})}),(0,l.jsx)(s.Z.Item,{className:"col-span-4",name:"Content",label:"Nội dung c\xe2u hỏi",required:!0,rules:x.i,children:(0,l.jsx)(m.Z,{id:"quest-content-".concat(new Date().getTime()),height:250,initialValue:(null==n?void 0:n.Content)||"",onChange:e=>N.setFieldValue("Content",e)})})]}),!!T&&(0,l.jsx)("div",{className:"col-span-4 text-danger mb-[10px]",children:T}),(0,l.jsx)("div",{className:"col-span-4 inline-flex mt-2",children:(0,l.jsx)(h.Z,{onClick:function(){E("");let e={Id:0,Content:"",Correct:!1,isAdd:!0,Type:1,timestamp:new Date().getTime()},t=[...D];t.push(e),R([...t])},type:"button",background:"yellow",icon:"add",className:"!pr-2",children:"Th\xeam đ\xe1p \xe1n"})}),D.map((e,t)=>(0,l.jsx)(l.Fragment,{children:(null==e?void 0:e.Enable)!=!1&&(0,l.jsxs)("div",{className:"w800:col-span-2 col-span-4 mt-4 inline-flex items-center",children:[(0,l.jsx)(i.Z,{defaultChecked:null==e?void 0:e.Correct,onChange:e=>{var n;let l;return n=e.target.checked,l=[],void(D.forEach((e,s)=>{t==s?l.push({...e,Correct:n}):l.push(e)}),R(l))},className:"mr-3 h-[36px] custom-checkbox"}),(0,l.jsx)(o.default,{onChange:e=>{var n;let l;return n=e.target.value,l=[],void(D.forEach((e,s)=>{t==s?l.push({...e,Content:n}):l.push(e)}),R(l))},value:null==e?void 0:e.Content,disabled:y,className:"primary-input"}),(0,l.jsx)(h.Z,{onClick:()=>{(0,g.O)(D,e,e=>R(e))},className:"!text-[red] hover:!text-[#d00d0d]",type:"button",background:"transparent",children:(0,l.jsx)(d.Z,{})})]})}))]})})]})}},69594:function(e,t,n){"use strict";var l=n(85893);n(67294);var s=n(15948);t.Z=e=>{let{children:t,title:n,onDragEnd:i,name:o}=e;return(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)(s.bK,{droppableId:o,direction:"horizontal",children:(e,n)=>(0,l.jsx)("div",{ref:e.innerRef,className:"",children:(0,l.jsxs)("div",{className:"p-[8px] min-h-[80px] bg-[#f0f0f0] border-[1px] border-dashed rounded-[8px] gap-[8px] flex flex-wrap flex-grow-0 flex-row",children:[t,e.placeholder]})})})})}},75546:function(e,t,n){"use strict";var l=n(85893),s=n(33653),i=n(11163),o=n.n(i),a=n(67294),d=n(9473),r=n(65320),c=n(1578),u=n(83446),v=n(58416),m=n(72833);t.Z=e=>{var t,n,i,h;let{data:x,type:f,isDoing:g,setCurrentQuestion:p,setCurGroup:I,indexInExam:b,isResult:j}=e,{questionsInSection:w,setNotSetCurrentQuest:N,setQuestionsInSection:y,setLoadingUpdate:C,loadingUpdate:A}=(0,c._O)(),[k,D]=(0,a.useState)(!0);function R(e){return!g&&!!x.IeltsAnswerResults[e].Correct}function T(e){var t,n,l,s;return!g&&!j&&null!=x&&!!x.IeltsAnswers&&null!=x&&null!==(t=x.IeltsAnswers[e])&&void 0!==t&&!!t.Correct||(j?null==x?void 0:null===(n=x.IeltsAnswerResults[e])||void 0===n?void 0:n.MyChoice:!!g&&((null==x?void 0:x.DoingTestDetails)?(null==x?void 0:null===(l=x.DoingTestDetails[0])||void 0===l?void 0:l.IeltsAnswerId)==(null===(s=x.IeltsAnswers[e])||void 0===s?void 0:s.Id):null))}(0,a.useEffect)(()=>{D(!1)},[x]);let[E,S]=(0,a.useState)(!0);async function Z(){S(!1),await (0,v.Dc)(50),S(!0)}async function M(e){var t,n,l,s,i;console.log("first"),D(!0),C(!0);let a=[];if(null==x?void 0:x.DoingTestDetails){let e=document.getElementById("check-box-".concat(null===(l=x.DoingTestDetails[0])||void 0===l?void 0:l.IeltsAnswerId));e&&e.click(),a.push({...null==x?void 0:x.DoingTestDetails[0],Enable:!1})}let d=null==x?void 0:null===(t=x.DoingTestDetails)||void 0===t?void 0:t.find(t=>(null==t?void 0:t.IeltsAnswerId)==(null==e?void 0:e.Id));if((0,m.Gv)(d)&&a.push({Id:0,IeltsAnswerId:null==e?void 0:e.Id,IeltsAnswerContent:"",Type:0,Index:0,Enable:!0}),null===o()||void 0===o()?void 0:null===(n=o().query)||void 0===n?void 0:n.exam){console.log("-------- PUT items: ",a);try{let e=await r.J.insertDetail({DoingTestId:parseInt((null===o()||void 0===o()?void 0:null===(s=o().query)||void 0===s?void 0:s.exam)+""),IeltsQuestionId:x.Id,Items:[...a]});if(200==e.status){I(null===(i=e.data)||void 0===i?void 0:i.data);let t=w.findIndex(e=>(null==e?void 0:e.IeltsQuestionId)==(null==x?void 0:x.Id));if(t>-1){N(!0),p(w[t]);let e=[...w];e[t].IsDone=!!(0,m.Gv)(d),y([...e])}}}catch(e){(0,m.xZ)(e)}finally{Z(),C(!1)}}}let P=(0,d.v9)(e=>{var t;return null===(t=e.takeAnExam)||void 0===t?void 0:t.curGroup});function q(e){return T(e)&&R(e)?"check-true-true":T(e)&&!R(e)?"check-false":!T(e)&&R(e)?"check-true":""}let F=k||!g||j||A;return(0,l.jsxs)("div",{onClick:function(){p&&!o().asPath.includes("/questions")&&p({...x,IeltsQuestionId:null==x?void 0:x.Id,IeltsQuestionGroupId:null==P?void 0:P.Id})},className:"flex items-start mb-[8px] pl-[4px] min-h-[37px]",children:[(0,l.jsxs)("div",{id:"cauhoi-".concat(x.Id),className:"flex flex-1 mt-1",children:[!o().asPath.includes("questions")&&"edit"!=f&&(0,l.jsxs)("span",{className:"flex-shrink-0 inline font-[600] mr-[8px]",children:[(0,l.jsx)("div",{id:"quest-num-".concat(x.Id),className:"ex-quest-tf",children:b}),(0,l.jsx)("div",{className:"bg-[#e9e9e9] h-[26px] px-[8px] rounded-full text-[14px] inline-flex items-center justify-center",children:(0,l.jsxs)("div",{children:["Point: ",null==x?void 0:x.Point]})})]}),(0,u.Z)(null==x?void 0:x.Content)]}),!j&&(0,l.jsxs)("div",{className:"flex items-center mr-[2px] true-false-checkbox",children:[(0,l.jsxs)("div",{className:"w-[50px] all-center",children:[T(0)&&(0,l.jsx)(l.Fragment,{children:E&&(0,l.jsx)(s.Z,{disabled:F,id:"check-box-".concat((null==x?void 0:x.Id)||""),defaultChecked:T(0),onClick:e=>!j&&M(x.IeltsAnswers[0])})}),!T(0)&&(0,l.jsx)(s.Z,{disabled:F,id:"check-box-".concat((null==x?void 0:x.Id)||""),defaultChecked:T(0),onClick:e=>{var t;return!j&&(null===(t=e.target)||void 0===t?void 0:t.checked)&&M(x.IeltsAnswers[0])}})]}),(0,l.jsxs)("div",{className:"w-[50px] all-center",children:[T(1)&&(0,l.jsx)(l.Fragment,{children:E&&(0,l.jsx)(s.Z,{disabled:F,id:"check-box-".concat((null==x?void 0:x.Id)||""),defaultChecked:T(1),onClick:e=>!j&&M(x.IeltsAnswers[1])})}),!T(1)&&(0,l.jsx)(s.Z,{disabled:F,id:"check-box-".concat((null==x?void 0:x.Id)||""),defaultChecked:T(1),onClick:e=>{var t;return!j&&(null===(t=e.target)||void 0===t?void 0:t.checked)&&M(x.IeltsAnswers[1])}})]}),(0,l.jsxs)("div",{className:"w-[88px] all-center",children:[T(2)&&(0,l.jsx)(l.Fragment,{children:E&&(0,l.jsx)(s.Z,{disabled:F,id:"check-box-".concat((null==x?void 0:x.Id)||""),defaultChecked:T(2),onClick:e=>!j&&M(x.IeltsAnswers[2])})}),!T(2)&&(0,l.jsx)(s.Z,{disabled:F,id:"check-box-".concat((null==x?void 0:x.Id)||""),defaultChecked:T(2),onClick:e=>{var t;return!j&&(null===(t=e.target)||void 0===t?void 0:t.checked)&&M(x.IeltsAnswers[2])}})]})]}),j&&(0,l.jsxs)("div",{className:"flex items-center mr-[2px] true-false-checkbox",children:[(0,l.jsx)("div",{className:"w-[50px] all-center",children:(0,l.jsx)(s.Z,{disabled:F,id:"check-box-".concat((null==x?void 0:x.IeltsAnswer)?null==x?void 0:null===(t=x.IeltsAnswers[0])||void 0===t?void 0:t.Id:null==x?void 0:null===(n=x.IeltsAnswerResults[0])||void 0===n?void 0:n.Id),defaultChecked:T(0)||R(0),className:"".concat(q(0)),onClick:e=>{var t;return!j&&(null===(t=e.target)||void 0===t?void 0:t.checked)&&M(x.IeltsAnswers[0])}})}),(0,l.jsx)("div",{className:"w-[50px] all-center",children:(0,l.jsx)(s.Z,{disabled:F,id:"check-box-".concat((null==x?void 0:x.IeltsAnswer)?null==x?void 0:null===(i=x.IeltsAnswers[0])||void 0===i?void 0:i.Id:null==x?void 0:null===(h=x.IeltsAnswerResults[0])||void 0===h?void 0:h.Id),defaultChecked:T(1)||R(1),className:"".concat(q(1)),onClick:e=>{var t;return!j&&(null===(t=e.target)||void 0===t?void 0:t.checked)&&M(x.IeltsAnswers[1])}})}),(0,l.jsx)("div",{className:"w-[88px] all-center",children:(0,l.jsx)(s.Z,{disabled:F,id:"check-box-".concat((null==x?void 0:x.Id)||""),defaultChecked:T(2)||R(2),className:"".concat(q(2)),onClick:e=>{var t;return!j&&(null===(t=e.target)||void 0===t?void 0:t.checked)&&M(x.IeltsAnswers[2])}})})]})]})}},45827:function(e,t,n){"use strict";function l(e,t,n){let l=[];e.forEach(e=>{(null==e?void 0:e.Id)?e.Id==t.Id?l.push({...e,Enable:!1}):l.push({...e}):e.timestamp!==t.timestamp&&l.push({...e})}),n(l)}function s(e,t,n){let l=[];return e.IeltsQuestions?null==e||e.IeltsQuestions.forEach((e,t)=>{let n=e.IeltsAnswers||e.Answers;l.push({...e,Index:t+1,IeltsAnswers:n})}):e.IeltsQuestions.forEach((e,t)=>{let n={...e};l.push({...n,Index:t+1,IeltsAnswers:e.Answers})}),t?{...e,IeltsQuestions:l,ExamSectionId:(null==n?void 0:n.Id)||null}:{...e,IeltsQuestions:l}}n.d(t,{K:function(){return s},O:function(){return l}})},1120:function(e,t,n){"use strict";n.d(t,{Z:function(){return eT}});var l=n(85893),s=n(77889),i=n(11163),o=n.n(i),a=n(74776),d=n(1578),r=n(75546),c=n(41818),u=n(33653),v=n(67294),m=n(2621),h=n(65320),x=n(83446),f=e=>{let{showDivide:t=!0}=e;return(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)("div",{className:"h-[1px] bg-[#00000015] w-full mt-[8px] mb-[14px]"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"bg-[#1890ff] w-[16px] h-[16px] rounded-[4px] mr-[4px]"}),(0,l.jsx)("div",{className:"font-[600]",children:"Đ\xe1p \xe1n đ\xfang"})]}),(0,l.jsxs)("div",{className:"flex items-center ml-[16px]",children:[(0,l.jsx)("div",{className:"bg-[#0baa0e] w-[16px] h-[16px] rounded-[4px] mr-[4px]"}),(0,l.jsx)("div",{className:"font-[600]",children:"Chọn đ\xfang"})]}),(0,l.jsxs)("div",{className:"flex items-center ml-[16px]",children:[(0,l.jsx)("div",{className:"bg-[#e00e0e] w-[16px] h-[16px] rounded-[4px] mr-[4px]"}),(0,l.jsx)("div",{className:"font-[600]",children:"Chọn sai"})]})]})]})},g=n(72833),p=e=>{let{data:t,index:n,indexInExam:i,showEdit:a,isDoing:r,isResult:p}=e,{questionsInSection:I,setCurrentQuestion:b,setQuestionsInSection:j,setNotSetCurrentQuest:w,setLoadingUpdate:N,loadingUpdate:y}=(0,d._O)(),C=(e,t)=>{if(r&&"single"==t){var n;E({Id:null===(n=e.target)||void 0===n?void 0:n.value})}};function A(){if(null==t?void 0:t.CorrectAmount)return(null==t?void 0:t.CorrectAmount)>1?"multiple":"single";let e=0;return(p||t.IeltsAnswers.forEach(t=>{t.Correct&&e++}),p&&t.IeltsAnswerResults.forEach(t=>{t.Correct&&e++}),e>1)?"multiple":"single"}function k(e,n){let s=[],i=[];if(p||e.forEach(e=>{(null==e?void 0:e.Enable)===!1||(s.push({value:e.Id?e.Id:e.ficaID,label:e.Content}),r||(null==e?void 0:e.Correct)!=!0||i.push(e.Id?e.Id:e.ficaID))}),p&&e.forEach(e=>{var t;s.push({value:e.Id?e.Id:e.ficaID,label:(0,l.jsx)("span",{className:"".concat(null===(t=D(e.IeltsAnswerId))||void 0===t?void 0:t.class),children:e.IeltsAnswerContent})}),(null==e?void 0:e.MyChoice)==!0&&i.push(e.Id?e.Id:e.ficaID)}),r&&(null==t?void 0:t.DoingTestDetails))for(let e=0;e<(null==t?void 0:t.DoingTestDetails.length);e++){let n=null==t?void 0:t.DoingTestDetails[e];i.push(null==n?void 0:n.IeltsAnswerId)}return{option:s,checked:i}}function D(e){if(p){var n;let l=null===(n=t.IeltsAnswerResults)||void 0===n?void 0:n.find(t=>t.IeltsAnswerId==e);if(l){if(null==l?void 0:l.Correct)return(null==l?void 0:l.MyChoice)?{color:"#0baa0e",class:"check-true-true"}:{color:"#1890ff",class:"check-true"};if(null==l?void 0:l.MyChoice)return{color:"#e00e0e",class:"check-false"}}}}let[R,T]=(0,v.useState)(null);async function E(e){var l,s,i,a;if(!r)return;let d=[];if("single"==A())R&&R.forEach(e=>{d.push({...e,Enable:!1})}),d.push({Id:0,IeltsAnswerId:null==e?void 0:e.Id,IeltsAnswerContent:null==e?void 0:e.Content,Type:0,Index:0,Enable:!0});else if(R){R.forEach(t=>{(null==e?void 0:e.find(e=>e==(null==t?void 0:t.IeltsAnswerId)))?d.push({...t}):d.push({...t,Enable:!1})});for(let t=0;t<e.length;t++)-1==d.findIndex(n=>(null==n?void 0:n.IeltsAnswerId)==e[t])&&d.push({Id:0,IeltsAnswerId:e[t],IeltsAnswerContent:"",Type:0,Index:0,Enable:!0})}else for(let t=0;t<e.length;t++)-1==d.findIndex(n=>(null==n?void 0:n.IeltsAnswerId)==e[t])&&d.push({Id:0,IeltsAnswerId:e[t],IeltsAnswerContent:"",Type:0,Index:0,Enable:!0});if(null===o()||void 0===o()?void 0:null===(l=o().query)||void 0===l?void 0:l.exam){console.log("-------- PUT ANSWER items: ",d),N(!0);try{let e=await h.J.insertDetail({DoingTestId:parseInt((null===o()||void 0===o()?void 0:null===(s=o().query)||void 0===s?void 0:s.exam)+""),IeltsQuestionId:t.Id,Items:[...d]});if(200==e.status){let l=null===(a=e.data.data)||void 0===a?void 0:null===(i=a.IeltsQuestions[n])||void 0===i?void 0:i.DoingTestDetails;T(l);let s=I.findIndex(e=>(null==e?void 0:e.IeltsQuestionId)==(null==t?void 0:t.Id));if(s>-1){w(!0);let e=[...I];e[s].IsDone=!(0,g.Gv)(l),j([...e])}}}catch(e){(0,g.xZ)(e)}finally{N(!1)}}}return(0,v.useEffect)(()=>{T(null==t?void 0:t.DoingTestDetails)},[t]),(0,l.jsxs)("div",{onClick:function(){o().asPath.includes("/questions")||b({...t,IeltsQuestionId:null==t?void 0:t.Id,IeltsQuestionResultId:null==t?void 0:t.Id})},id:"question-"+(null==t?void 0:t.Id),className:"cc-choice-warpper shadow-sm border-[1px] border-[#fff]",style:{marginTop:0==n?8:0},children:[(0,l.jsxs)("div",{className:"exam-quest-wrapper none-selection",children:[(0,l.jsxs)("div",{id:"cauhoi-".concat(t.Id),className:"cc-choice-number",children:[!o().asPath.includes("questions")&&i&&(0,l.jsx)("div",{id:"quest-num-".concat(t.Id),className:"ex-quest-tf",children:i}),(0,l.jsx)("div",{className:"bg-[#e9e9e9] h-[26px] px-[8px] rounded-full text-[14px] inline-flex items-center justify-center",children:(0,l.jsxs)("div",{children:["Point: ",null==t?void 0:t.Point]})}),!!a&&(0,l.jsx)("div",{className:"mx-[8px]",children:(0,l.jsx)(m.Z,{isEdit:!0,defaultData:t,onRefresh:function(){}})}),!!p&&(0,l.jsx)("div",{className:"ml-[8px] ",children:(0,l.jsx)(f,{showDivide:!1})})]}),(0,l.jsx)("div",{className:"font-[600]",children:(0,x.Z)(null==t?void 0:t.Content)})]}),"single"==A()&&(0,l.jsx)(c.ZP.Group,{disabled:!r&&(!r||void 0),className:"mt-2",defaultValue:function(){if(!r&&!p)for(let e=0;e<t.IeltsAnswers.length;e++){let n=t.IeltsAnswers[e];if(null==n?void 0:n.Correct)return null==n?void 0:n.Id}if(!r&&p)for(let e=0;e<t.IeltsAnswerResults.length;e++){let n=t.IeltsAnswerResults[e];if(null==n?void 0:n.MyChoice)return null==n?void 0:n.Id}if(r&&(null==t?void 0:t.DoingTestDetails)){var e;return null==t?void 0:null===(e=t.DoingTestDetails[0])||void 0===e?void 0:e.IeltsAnswerId}return""}(),onChange:e=>C(e,"single"),children:(0,l.jsxs)(s.Z,{direction:"vertical",children:[!p&&t.IeltsAnswers.map(e=>(0,l.jsx)(c.ZP,{disabled:y,checked:null==e?void 0:e.Correct,className:"none-selection",value:parseInt(e.Id+""),children:e.Content},"choice-"+n+"-"+e.Id)),!!p&&t.IeltsAnswerResults.map(e=>{var t;return(0,l.jsx)(c.ZP,{checked:null==e?void 0:e.MyChoice,className:"none-selection",value:parseInt(e.Id+""),children:(0,l.jsx)("span",{style:{color:null===(t=D(e.IeltsAnswerId))||void 0===t?void 0:t.color},children:e.IeltsAnswerContent})},"choice-"+n+"-"+e.Id)})]})}),"single"!==A()&&(0,l.jsx)("div",{className:"custom-check-group",children:(0,l.jsx)(u.Z.Group,{disabled:!!p||y,className:"none-selection exam-checkbox",options:k(p?t.IeltsAnswerResults:t.IeltsAnswers).option,defaultValue:k(p?t.IeltsAnswerResults:t.IeltsAnswers,1).checked,onChange:e=>E(e)})})]},"question-"+(null==t?void 0:t.Id))},I=n(46565),b=n(49367),j=()=>(0,l.jsx)("div",{className:"bg-[rgba(0,0,0,0.1)] all-center rounded-[6px] absolute top-0 left-0 w-full h-full",children:(0,l.jsx)("div",{className:"text-[#000] font-[500]",children:"Đang xử l\xfd..."})}),w=e=>{let{Index:t,Content:n,question:s}=e;return(0,l.jsx)("div",{id:"cauhoi-".concat(s.Id),className:"question-mind-d ques-id-d_".concat(s.Id," the-mind-question border-t-[1px] px-[8px] py-[5px] border-[#ffffff] min-h-[46px] flex items-center bg-[#f8f8f8] min-w-[110px]"),children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("div",{className:"inline-flex items-center justify-center mr-[8px]",children:[!o().asPath.includes("questions")&&t&&(0,l.jsx)("div",{id:"quest-num-".concat(s.Id),className:"ex-quest-tf",children:t}),(0,l.jsx)("div",{className:"bg-[#e9e9e9] h-[26px] px-[8px] rounded-full text-[14px] inline-flex items-center justify-center",children:(0,l.jsxs)("div",{children:["Point: ",(null==s?void 0:s.Point)||0]})})]}),(0,l.jsx)("div",{className:"max-w-[235px]",children:(0,x.Z)(n)})]})})},N=e=>{let{answers:t,getSelectedAns:n,exercise:s,isResult:i,onClick:a}=e;return(0,l.jsx)("div",{className:"ex-mind-checkbox",children:(0,l.jsx)("div",{className:"inline-flex",children:t.map((e,t)=>{var d,r,c,v;let m=null===(d=n(s,i?null==e?void 0:e.IeltsAnswerId:null==e?void 0:e.Id))||void 0===d?void 0:d.checked,h=(null===(c=n(s,null==e?void 0:e.IeltsAnswerId))||void 0===c?void 0:null===(r=c.correct)||void 0===r?void 0:r.IeltsAnswerId)==(null==e?void 0:e.IeltsAnswerId),x=!1;return i&&(x=!!m||!!h),(0,l.jsx)("div",{className:"".concat(0!==t?"antd-mind-check-border":""," checkBox-mind-d check-id-d_").concat(null==s?void 0:s.Id," antd-mind-check"),children:(0,l.jsx)(u.Z,{onClick:()=>!i&&a(s,null==e?void 0:e.Id),checked:i?x:null===(v=n(s,null==e?void 0:e.Id))||void 0===v?void 0:v.checked,disabled:o().asPath.includes("exam/detail"),id:"mind-".concat(null==s?void 0:s.Id,"-").concat(null==e?void 0:e.Id),className:"".concat(i?m?h?"mind-correct":"mind-incorrect":h?"mind-corr-ans":"":"")})})})})})},y=e=>{let{answer:t,index:n}=e;return(0,l.jsx)("div",{className:"ex-mind-ans ".concat(0!=n?"ex-mind-ans-border":""),children:(0,l.jsx)("div",{className:"ex-mind-ans-content px-1",children:(0,x.Z)((null==t?void 0:t.Content)||(null==t?void 0:t.IeltsAnswerContent))})})},C=n(58416);function A(e,t){if(o().asPath.includes("questions"))return null;let n=e.findIndex(e=>(null==e?void 0:e.IeltsQuestionId)==(null==t?void 0:t.Id));return -1!==n?e[n]:""}function k(e,t){if(o().asPath.includes("questions"))return null;let n=e.findIndex(e=>(null==e?void 0:e.IeltsQuestionResultId)==(null==t?void 0:t.Id));return -1!==n?e[n]:""}var D=e=>{var t,n;let{dataSource:s,isResult:i,setCurGroup:a}=e,{questionsInSection:r,setQuestionsInSection:c,setNotSetCurrentQuest:u,setCurrentQuestion:m,setLoadingUpdate:x}=(0,d._O)(),[p,D]=(0,v.useState)(!0),[R,T]=(0,v.useState)([]);(0,v.useRef)(null);let E=(0,v.useRef)(null),[S,Z]=(0,v.useState)(!1),[M,P]=(0,v.useState)([]),q=(0,v.useRef)(null),F=(0,v.useRef)(null);function Q(e){for(let t=0;t<3;t++)for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return D(!1),e}function B(e,t){var n;if((null==e?void 0:e.DoingTestDetails)&&(null===(n=e.DoingTestDetails[0])||void 0===n?void 0:n.IeltsAnswerId)==t)return{checked:!0};if(i&&e.IeltsAnswerResults){let n=null;for(let t=0;t<e.IeltsAnswerResults.length;t++){let l=e.IeltsAnswerResults[t];(null==l?void 0:l.Correct)&&(n=l)}return(null==e?void 0:e.AnswerOfMindmap)==t?{correct:n,checked:!0}:{correct:n,checked:!1}}return{checked:!1}}(0,v.useEffect)(()=>{(p||!o().asPath.includes("take-an-exam"))&&function(){let e=[];if(!i)for(let t=0;t<(null==s?void 0:s.IeltsQuestions.length);t++){let n=null==s?void 0:s.IeltsQuestions[t];for(let t=0;t<(null==n?void 0:n.IeltsAnswers.length);t++){let l=null==n?void 0:n.IeltsAnswers[t];e.push({...l,question:n})}}if(i)for(let t=0;t<(null==s?void 0:s.IeltsQuestionResults.length);t++){let n=null==s?void 0:s.IeltsQuestionResults[t];for(let t=0;t<(null==n?void 0:n.IeltsAnswerResults.length);t++){let l=null==n?void 0:n.IeltsAnswerResults[t];e.push({...l,question:n})}}o().asPath.includes("take-an-exam")?(T(Q(e)),console.log("random đi",Q(e))):T(e)}()},[s,o().asPath]);let[_,L]=(0,v.useState)(!1);async function z(e,t){var n,l,s;x(!0);let i=[];if((null==e?void 0:e.DoingTestDetails)&&i.push({...null==e?void 0:e.DoingTestDetails[0],Enable:!1}),i.push({Id:0,IeltsAnswerId:t,IeltsAnswerContent:"",Type:0,Index:0,Enable:!0}),null===o()||void 0===o()?void 0:null===(n=o().query)||void 0===n?void 0:n.exam){console.log("-------- PUT Mindmap items: ",i);try{let t=await h.J.insertDetail({DoingTestId:parseInt((null===o()||void 0===o()?void 0:null===(l=o().query)||void 0===l?void 0:l.exam)+""),IeltsQuestionId:null==e?void 0:e.Id,Items:[...i]});if(200==t.status){a(null===(s=t.data)||void 0===s?void 0:s.data);let n=r.findIndex(t=>(null==t?void 0:t.IeltsQuestionId)==(null==e?void 0:e.Id));if(n>-1){u(!0),m(r[n]);let e=[...r];e[n].IsDone=!0,c([...e])}}}catch(e){(0,g.xZ)(e)}finally{x(!1)}}L(!1)}let U=i?null==s?void 0:s.IeltsQuestionResults:null==s?void 0:s.IeltsQuestions;(0,v.useEffect)(()=>{var e;let t,n;e=i?null==s?void 0:s.IeltsQuestionResults:null==s?void 0:s.IeltsQuestions,t=[],n=1,e.forEach(e=>{!1!=e.Enable&&t.push({...e,Index:n}),n++}),P(t)},[s]);let G=async()=>{await (0,C.Dc)(200);let e=document.querySelectorAll(".question-mind-d"),t=document.querySelectorAll(".checkBox-mind-d");q.current&&(q.current.style.height="".concat(Math.max(F.current.offsetHeight),"px"));for(let n=0;n<(null==e?void 0:e.length);n++){let l=e[n],s=l.offsetHeight,i=l.className.match(/ques-id-d_(\d+)/)[1];for(let e=0;e<t.length;e++){let n=t[e];n&&n.className.match(/check-id-d_(\d+)/)[1]==i&&(n.style.height="".concat(s,"px"))}}};return(0,v.useEffect)(()=>{G()},[s,M,S,E]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"cc-choice-warpper ex23-mind",children:[(0,l.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,l.jsxs)("div",{onClick:()=>Z(!0),className:"ex-23-btn-change-skill !mr-0 mb-[8px]",children:[(0,l.jsx)(b.vju,{size:20}),(0,l.jsx)("div",{className:"ml-[4px] font-[600]",children:"To\xe0n m\xe0n h\xecnh"})]})}),(0,l.jsx)("div",{className:"exam-quest-wrapper no-select",children:(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsxs)("div",{className:"mindmap-scroll flex flex-row",children:[(0,l.jsxs)("div",{className:"ex23-mind-quest-wrapper",children:[(0,l.jsx)("div",{ref:q,className:"h-[46px]"}),M.map((e,t)=>{let n=i?k(r,e):A(r,e);return(0,l.jsx)(w,{Index:null==n?void 0:n.Index,Content:null==e?void 0:e.Content,question:e})})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{ref:F,className:"flex items-stretch min-h-[46px]",children:R.map((e,t)=>(0,l.jsx)(y,{answer:e,index:t}))}),(0,l.jsx)("div",{ref:E,children:M.map(e=>(0,l.jsx)(N,{answers:R,exercise:e,isResult:i,onClick:z,getSelectedAns:B}))})]})]})})}),i&&(0,l.jsx)(f,{}),_&&(0,l.jsx)(j,{})]}),S&&(0,l.jsx)(I.Z,{width:"90%",footer:null,title:"C\xe2u: ".concat(i?null===(n=k(r,U[0]))||void 0===n?void 0:n.Index:null===(t=A(r,U[0]))||void 0===t?void 0:t.Index," - ").concat(function(){var e,t;let n=U.length;return i?null===(t=k(r,U[n-1]))||void 0===t?void 0:t.Index:null===(e=A(r,U[n-1]))||void 0===e?void 0:e.Index}()),open:S,onCancel:()=>Z(!1),children:(0,l.jsxs)("div",{className:"cc-choice-warpper ex23-mind",children:[(0,l.jsx)("div",{className:"exam-quest-wrapper no-select",children:(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsxs)("div",{className:"mindmap-scroll flex flex-row",children:[(0,l.jsxs)("div",{className:"ex23-mind-quest-wrapper",children:[(0,l.jsx)("div",{ref:q,className:"h-[46px]"}),M.map((e,t)=>{let n=i?k(r,e):A(r,e);return(0,l.jsx)(w,{Index:null==n?void 0:n.Index,Content:null==e?void 0:e.Content,question:e})})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{ref:F,className:"flex items-stretch min-h-[46px]",children:R.map((e,t)=>(0,l.jsx)(y,{answer:e,index:t}))}),(0,l.jsx)("div",{ref:E,className:"pb-[1px]",children:M.map(e=>(0,l.jsx)(N,{answers:R,exercise:e,isResult:i,onClick:z,getSelectedAns:B}))})]})]})})}),i&&(0,l.jsx)(f,{}),_&&(0,l.jsx)(j,{})]})})]})},R=n(93967),T=n.n(R),E=n(15948),S=n(69594),Z=n(73935),M=n(3027);let P=(e,t,n)=>{let l=Array.from(e),[s]=l.splice(t,1);return l.splice(n,0,s),l},q=()=>{let e=(0,v.useRef)({}).current;return(0,v.useEffect)(()=>{let t=document.createElement("div");return t.style.position="absolute",t.style.pointerEvents="none",t.style.top="0",t.style.width="100%",t.style.height="100%",e.elt=t,document.body.appendChild(t),()=>{document.body.removeChild(t)}},[e]),t=>function(n){for(var l=arguments.length,s=Array(l>1?l-1:0),i=1;i<l;i++)s[i-1]=arguments[i];let o=t(n,...s);return"fixed"===n.draggableProps.style.position?(0,Z.createPortal)(o,e.elt):o}},F=e=>{let{data:t}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("label",{className:"font-semibold flex items-center gap-1",children:["C\xe2u trả lời:",!0==t.Correct?(0,l.jsx)(b.bzc,{color:"#0baa0e",size:18}):(0,l.jsx)(b.oHP,{color:"#e00e0e",size:18})]}),(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"p-[8px]  min-h-[80px] bg-[#f0f0f0] border-[1px] border-dashed rounded-[8px] gap-[8px] flex flex-wrap flex-grow-0 flex-row",children:t.IeltsAnswerResults&&t.IeltsAnswerResults.length>0&&(function(e){let t=[...e];for(var n=0;n<t.length;n++)t[n]=[t[n],n];t.sort(function(e,t){return e[0].MyIndex<t[0].MyIndex?-1:1});for(var l=0;l<t.length;l++)t[l]=t[l][0];return t})(t.IeltsAnswerResults).map(e=>(0,l.jsx)("div",{className:"mt-[16px]",children:(0,l.jsx)("div",{className:T()("flex w-full flex-shrink-0 cursor-move px-[8px] py-[2px] rounded-[6px]",e.MyIndex==e.Index&&e.MyChoice?"bg-[#0baa0e] ":"bg-[#e00e0e] "),children:(0,l.jsx)("div",{className:"font-[600] text-[16px] text-[#fff]",children:null==e?void 0:e.MyIeltsAnswerContent})})},"f-sort-Ielts-Answer-Content-".concat(e.Id)))})}),(0,l.jsx)("label",{className:"font-semibold flex items-center gap-1",children:"Đ\xe1p \xe1n:"}),(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"",children:(0,l.jsx)("div",{className:"p-[8px] min-h-[80px] bg-[#f0f0f0] border-[1px] border-dashed rounded-[8px] gap-[8px] flex flex-wrap flex-grow-0 flex-row",children:t.IeltsAnswerResults.map(e=>(0,l.jsx)("div",{className:"mt-[16px]",children:(0,l.jsx)(Q,{Content:null==e?void 0:e.IeltsAnswerContent})},"f-sort-My-Ielts-Answer-Content-".concat(e.Id)))})})})]})},Q=e=>{let{Content:t}=e;return(0,l.jsx)("div",{className:"flex w-full flex-shrink-0 cursor-move bg-[#1b73e8] px-[8px] py-[2px] rounded-[6px]",children:(0,l.jsx)("div",{className:"font-[600] text-[16px] text-[#fff]",children:t})})};var B=e=>{let{data:t,isResult:n,setCurGroup:s,IndexInExam:i,isDoing:a,index:r,onRefresh:c}=e,[u,m]=(0,v.useState)([]),{questionsInSection:x,setQuestionsInSection:f,setNotSetCurrentQuest:p,setCurrentQuestion:I,setLoadingUpdate:b}=(0,d._O)(),j=q(),[w,N]=(0,v.useState)(!0);(0,v.useEffect)(()=>{t.DoingTestDetails?m(t.DoingTestDetails):m(t.IeltsAnswers)},[t]);let y=e=>{if(!e.destination)return;let t=P(u,e.source.index,e.destination.index).map((e,t)=>({...e,Index:t}));N(!1),m(t)},[C,A]=(0,v.useState)(!1),k=async()=>{try{var e,n,l,s,i;A(!0),N(!0),b(!0);let a=u.map(e=>({Id:e.IeltsAnswerId?e.Id:0,IeltsAnswerId:e.IeltsAnswerId?e.IeltsAnswerId:e.Id,IeltsAnswerContent:e.IeltsAnswerContent?e.IeltsAnswerContent:e.Content,Type:6,Index:e.Index})),d={DoingTestId:parseInt((null===o()||void 0===o()?void 0:null===(e=o().query)||void 0===e?void 0:e.exam)+""),IeltsQuestionId:t.Id,Items:[...a]},c=await h.J.insertDetail(d);if(m(null===(l=c.data.data)||void 0===l?void 0:null===(n=l.IeltsQuestions[r])||void 0===n?void 0:n.DoingTestDetails),200==c.status){m(null===(i=c.data.data)||void 0===i?void 0:null===(s=i.IeltsQuestions[r])||void 0===s?void 0:s.DoingTestDetails.sort((e,t)=>e.Index-t.Index));let e=x.findIndex(e=>(null==e?void 0:e.IeltsQuestionId)==(null==t?void 0:t.Id));if(e>-1){p(!0);let t=[...x];t[e].IsDone=!0,f([...t])}}A(!1)}catch(e){A(!0),(0,g.xZ)(e)}finally{b(!1)}};return(0,l.jsxs)("div",{className:"cc-choice-warpper shadow-sm border-[1px] border-[#fff]",style:{transform:"scale(".concat(1.005,")"),borderWidth:1,borderStyle:"solid"},children:[(0,l.jsx)("div",{className:"dragHandle mt-[10px] ml-2"}),(0,l.jsxs)("div",{id:"cauhoi-".concat(t.Id),className:"cc-choice-number",children:[!o().asPath.includes("questions")&&i&&(0,l.jsx)("div",{id:"quest-num-".concat(t.Id),className:"ex-quest-tf",children:i}),(0,l.jsx)("div",{className:"bg-[#e9e9e9] h-[26px] px-[8px] rounded-full text-[14px] inline-flex items-center justify-center",children:(0,l.jsxs)("div",{children:["Điểm: ",null==t?void 0:t.Point]})})]}),(0,l.jsxs)(l.Fragment,{children:[!n&&(0,l.jsx)("div",{children:(0,l.jsx)(E.Z5,{onDragEnd:y,children:(0,l.jsxs)("div",{className:"flex justify-center flex-col gap-2",children:[(0,l.jsx)(S.Z,{title:"",onDragEnd:y,name:"answers-".concat(t.Id),children:u&&u.length>0&&u.map((e,t)=>(0,l.jsx)(E._l,{draggableId:"draggable-answers-".concat(e.Id),index:t,direction:"horizontal",isDragDisabled:!a,children:j(t=>(0,l.jsx)("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:(0,l.jsx)(Q,{Content:e.Content||(null==e?void 0:e.IeltsAnswerContent)})}))},"draggable-answers-".concat(e.Id)))}),a&&(0,l.jsx)("div",{className:"flex justify-center ",children:(0,l.jsx)(M.Z,{disable:w||C,loading:C,type:"button",background:"green",onClick:k,children:"Lưu c\xe2u trả lời"})})]})})}),!!n&&(0,l.jsx)(F,{data:t})]})]})},_=n(30653),L=n(78773),z=n(69361),U=n(77024),G=n(27104),H=n(89865),O=n(79930),V=n(32399);let W="",J=0,K=V.ZP;var X=e=>{let{getLinkRecord:t,linkRecord:n,packageResult:s,dataQuestion:i,exerciseID:a,getActiveID:r,disabled:c}=e,[u,m]=(0,v.useState)(!1),[h,x]=(0,v.useState)(!1),[f,p]=(0,v.useState)(!1),{setLoadingUpdate:I,setAudioRecordingId:b,audioRecordingId:j}=(0,d._O)(),[w,N]=(0,v.useState)("00:00:00"),y=()=>{J+=1,N((0,g.j0)(J))},A=async()=>{try{var e,t,n,l;let s=!1;return(null===(t=window)||void 0===t?void 0:null===(e=t.navigator)||void 0===e?void 0:e.getUserMedia)||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia),navigator&&(null===(n=navigator)||void 0===n?void 0:n.getUserMedia)?await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(e=>{s=!0}).catch(e=>{s=!1,alert("An error occurred while trying to access the microphone. Please ensure the browser has permission to access the microphone or check your microphone settings.")}):(null===(l=navigator)||void 0===l?void 0:l.mediaDevices)?await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(e=>{s=!0}).catch(e=>{s=!1,alert("".concat(e.name,": ").concat(e.message))}):alert("Audio not supported in this browser."),s}catch(e){}},k=async()=>{if(!c)try{await A()&&(K.start(),x(!0),W=setInterval(y,1e3),r&&r(a),b(a))}catch(e){}},D=async e=>{var n,l;clearInterval(W),J=0,N("00:00:00");let s=(n=e.blob,l="record-audio.mp3",n.lastModifiedDate=new Date,n.name=l,new File([n],l,{lastModified:new Date().getTime(),type:n.type}));m(!0),x(!1),I(!0);try{let e=await O.X.uploadImage(s);200==e.status&&(t(e.data.data),C.Gu.success("Ghi \xe2m th\xe0nh c\xf4ng"),b(null))}catch(e){C.Gu.error(e.message)}finally{m(!1),I(!1)}};return(0,v.useEffect)(()=>{o().asPath.includes("/take-an-exam")&&Promise.resolve(navigator.mediaDevices.getUserMedia({audio:!0}))},[c]),(0,l.jsxs)("div",{className:"wrap-audio-record mt-2",children:[u?(0,l.jsxs)("div",{className:"d-flex align-items-center mt-2 mb-2",children:[(0,l.jsx)(z.Z,{}),(0,l.jsx)("span",{style:{marginLeft:"5px",fontStyle:"italic",fontSize:"13px"},children:"Loading audio..."})]}):(0,l.jsx)(l.Fragment,{children:!h&&n&&(0,l.jsx)("audio",{controls:!0,children:(0,l.jsx)("source",{src:n,type:"audio/mpeg"})})}),!h&&(0,l.jsx)(U.Z,{title:"Bắt đầu ghi \xe2m",children:(0,l.jsx)("button",{disabled:c||u,className:"btn-record start",onClick:e=>{e.stopPropagation(),k()},children:(0,l.jsx)(G.Z,{})})}),h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(U.Z,{title:"Lưu lại",children:(0,l.jsx)("button",{className:"btn-record save",onClick:()=>{K.stop(e=>{console.log("event: ",e),D(e)})},children:(0,l.jsx)(H.Z,{})})}),(0,l.jsx)("div",{className:"ml-3",style:{fontSize:16},children:w})]}),f&&(0,l.jsx)("div",{className:"d-block mt-2",children:(0,l.jsx)("p",{className:"font-italic",style:{fontWeight:500,opacity:.7},children:"Lưu \xfd: Hiện bạn đang tạm dừng. Bấm v\xe0o n\xfat lưu b\xean tr\xean để lưu lại đoạn ghi \xe2m."})})]})},$=n(41820),Y=n(96361),ee=n(9473),et=n(59178);let en="/api/IeltsQuestionGroupResult",el={getByID:e=>et.e.get("".concat(en,"/").concat(e)),getAnswerComment:e=>(C.cM.Yellow("GET: answer-comment: ",e),et.e.get(en+"/answer-comment",{params:e})),post:e=>et.e.post(en+"/grading-essay",e)};var es=n(63237),ei=n(90918),eo=n(34223),ea=n(74253),ed=n(98692),er=n(46556),ec=n(5152);let eu=n.n(ec)()(()=>n.e(6758).then(n.bind(n,45201)),{loadableGenerated:{webpack:()=>[45201]},ssr:!1}),{TextArea:ev}=ea.default;var em=e=>{let{hiddenRemove:t,item:n,active:s,onSave:i,onActive:o,onDeleteItem:a,loading:d,isSubmit:r,disabled:c}=e,[u,m]=(0,v.useState)(!1);async function h(){m(!0),await (0,C.Dc)(100),m(!1)}(0,v.useEffect)(()=>{h()},[n]);let[x,f]=(0,v.useState)(!1);(0,v.useEffect)(()=>{g()},[]);let g=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{}).catch(e=>{})};return(0,l.jsx)("div",{onClick:()=>o(n),id:"item-".concat(null==n?void 0:n.Code),className:"cmt-item ".concat((null==n?void 0:n.Code)==s?"active":""," ").concat((null==n?void 0:n.Comment)==""&&!!r&&"error"),style:{cursor:"pointer"},children:!d&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"user-info",children:[(0,l.jsx)(ed.C,{className:"shadow cmt-avt",src:(null==n?void 0:n.Avatar)?null==n?void 0:n.Avatar:"/images/logo-thumnail.jpg"}),(0,l.jsxs)("div",{className:"info",children:[(0,l.jsx)(U.Z,{title:null==n?void 0:n.CreatedBy,children:(0,l.jsx)("div",{className:"user-name in-1-line",children:null==n?void 0:n.CreatedBy})}),(0,l.jsx)("div",{className:"created-date in-1-line",children:null==n?void 0:n.RoleName})]})]}),!u&&(0,l.jsx)(ev,{rows:4,disabled:c,id:new Date().getTime()+"-cmt",className:"mt-3 cmt-input",placeholder:"Nhập nội dung nhận x\xe9t",defaultValue:e.item.Comment,onChange:e=>i({...n,Comment:e.target.value}),onFocus:()=>o(n)}),!!s&&(null==n?void 0:n.Code)==s&&!c&&(0,l.jsxs)("div",{className:"cmt-control mt-3",children:[(0,l.jsx)("div",{className:"mt-[-0px] mr-[8px]",children:(0,l.jsx)(eu,{disabled:c,id:null==n?void 0:n.Code,isHideBar:!0,setLinkRecord:e=>i({...n,LinkAudio:e}),linkRecord:null==n?void 0:n.LinkAudio,setIsRecord:f,isRecord:x,onDelete:()=>i({...n,LinkAudio:""})})}),t?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(er.Z,{onConfirm:()=>a(n),placement:"leftTop",title:"Bạn muốn x\xf3a nhận x\xe9t n\xe0y?",children:(0,l.jsx)(M.Z,{background:"red",icon:"cancel",type:"button",children:"Xo\xe1"})})]}),!!c&&!!(null==n?void 0:n.LinkAudio)&&(0,l.jsx)("audio",{id:"audio-".concat(n.Code),className:"mt-3 w-100",controls:!0,children:(0,l.jsx)("source",{src:null==n?void 0:n.LinkAudio,type:"audio/mpeg"})})]})})},eh=n(42006),ex=[];let ef=!0;var eg=e=>{var t,n,s;let{dataRow:i,info:o,setMarkingWritting:a,onRefresh:d,markingWritting:r,dataMarking:c,curGroup:u}=e,m=(0,v.useRef)(null),h=(0,ee.v9)(e=>e.user.information),[x,f]=(0,v.useState)(0),[g,p]=(0,v.useState)(!1),[I,b]=(0,v.useState)(!0),[j,w]=(0,v.useState)(!1),[N,y]=(0,v.useState)(),[A,k]=(0,v.useState)(!1),[D,R]=(0,v.useState)(""),T=!!(null==c?void 0:c.Point)||(null==c?void 0:c.Point)==0;D&&(null===(n=document.getElementById("".concat(D)))||void 0===n||n.setAttribute("class","highlight-editor active")),(0,v.useEffect)(()=>{r&&S()&&Z(),r&&y(null==c?void 0:c.Point)},[r]),(0,v.useEffect)(()=>{D&&U(D)},[D]);let E=()=>!!h&&3==h.RoleId;async function S(){try{let e=await el.getByID(null==u?void 0:u.Id);200==e.status||(ex=[])}catch(e){(0,C.fr)("error",(null==e?void 0:e.message)||e)}finally{b(!1),f(B())}}async function Z(){try{var e;let t=await el.getAnswerComment({ieltsQuestionResultId:null==i?void 0:i.Id,ieltsAnswerResultId:!!(null==i?void 0:i.IeltsAnswerResults)&&(null==i?void 0:i.IeltsAnswerResults.length)>0&&(null==i?void 0:null===(e=i.IeltsAnswerResults[0])||void 0===e?void 0:e.Id)});if(200==t.status){let e=[];await t.data.data.forEach((t,n)=>{let l={};try{l=(null==t?void 0:t.Note)?JSON.parse(null==t?void 0:t.Note):{}}catch(e){l={}}e.push({...t,...l,Comment:null==t?void 0:t.Content,LinkAudio:t.Audio})}),ex=e}else ex=[]}catch(e){(0,C.fr)("error",(null==e?void 0:e.message)||e)}finally{b(!1),f(B())}}async function P(e){C.cM.Yellow("SUBMIT completeMark",e),f(B()),b(!1);try{let t=await el.post(e);200==t.status&&((0,C.fr)("success","Th\xe0nh c\xf4ng"),a(!1),d(null==u?void 0:u.Id),ex=[],y(""))}catch(e){(0,C.fr)("error",(null==e?void 0:e.message)||e)}f(B()),b(!1),H(!1)}async function q(e){var t;ex.push({Code:"cmt-".concat(e.ID),Comment:"",LinkAudio:"",Avatar:h.Avatar,CreatedBy:h.FullName,RoleName:"Gi\xe1o vi\xean",IeltsAnswerResultId:!!(null==i?void 0:i.IeltsAnswerResults)&&(null==i?void 0:i.IeltsAnswerResults.length)>0&&(null==i?void 0:null===(t=i.IeltsAnswerResults[0])||void 0===t?void 0:t.Id),isAdd:!0,Enable:!0}),f(B()),Q({Code:"cmt-".concat(e.ID)}),f(B())}async function F(){let e=await document.getElementsByClassName("highlight-editor");if((null==e?void 0:e.length)>0){for(let t=0;t<e.length;t++)if(e[t]){let n=e[t].getAttribute("id");e[t].addEventListener("click",e=>{e.preventDefault(),Q({Code:n,event:e})})}}}function Q(e){R(e.Code);let t=document.getElementsByClassName("highlight-editor");for(let s=0;s<t.length;s++)if(t[s]){var n,l;t[s].getAttribute("id")==e.Code?null===(n=t[s])||void 0===n||n.setAttribute("class","highlight-editor active"):null===(l=t[s])||void 0===l||l.setAttribute("class","highlight-editor")}}function B(){return new Date().getTime()}async function L(e){let t=await ex.findIndex(t=>(null==t?void 0:t.Code)==(null==e?void 0:e.Code));ex[t].LinkAudio=null==e?void 0:e.LinkAudio,ex[t].Comment=null==e?void 0:e.Comment,f(B())}async function z(e){let t=document.getElementsByClassName("highlight-editor");ex=ex.filter(t=>(null==t?void 0:t.Code)!=(null==e?void 0:e.Code));for(let l=0;l<t.length;l++)if(t[l]){if(t[l].getAttribute("id")==e.Code)t[l].replaceWith(t[l].textContent);else{var n;null===(n=t[l])||void 0===n||n.setAttribute("class","highlight-editor")}}let l=await ex.findIndex(t=>(null==t?void 0:t.Code)==(null==e?void 0:e.Code));if(l>-1&&(ex[l]={...ex[l],Enable:!1},f(B())),"number"==typeof(null==e?void 0:e.ID)&&!(null==e?void 0:e.isAdd)){let t=await document.querySelector('.mce-content-body[id="'.concat(i.ID,'"]'));null==e||e.ID,t.innerHTML&&(null==t||t.innerHTML)}}async function U(e){if(e){let t=document.getElementById("scroll-tag"),n=await document.getElementsByClassName("cmt-item");if(n.length>0){let l=await document.getElementById("item-"+e);if(l){let e=await n[0].getBoundingClientRect(),s=await l.getBoundingClientRect(),i=await (s.top-e.bottom);t.scroll({top:i,left:0,behavior:"smooth"})}}}}ef&&document.getElementsByClassName("highlight-editor").length>0&&(ef=!1,F());let[G,H]=(0,v.useState)(!1);async function O(){if(R(""),H(!0),console.log(N),N||0===N){if(!0==function(){let e=!0;w(!0);for(let t=0;t<ex.length;t++)""==ex[t].Comment&&(e=!1);let t=document.getElementsByClassName("highlight-editor active")||[];if(t.length>0){var n;null===(n=t[0])||void 0===n||n.setAttribute("class","highlight-editor")}return e}()){let e=await document.querySelector('.mce-content-body[id="'.concat(i.Id,'"]')),t=[];ex.forEach((e,n)=>{t.push({...e,Content:e.Comment,Audio:(null==e?void 0:e.LinkAudio)||"",Note:JSON.stringify(e)})});let n={AnswerContentFix:null==e?void 0:e.innerHTML,Comment:ex,EssayPoint:N,IeltsQuestionResultId:null==i?void 0:i.Id,Point:N,Items:t,Note:null==e?void 0:e.innerHTML};if((null==i?void 0:i.MaxPoint)&&parseFloat(null==n?void 0:n.Point)>parseFloat(null==i?void 0:i.MaxPoint)){(0,C.fr)("error","Vui l\xf2ng nhập số điểm thấp hơn hoặc bằng điểm cao nhất"),H(!1);return}await P(n),e.innerHTML="",k(!0)}else(0,C.fr)("error","Vui l\xf2ng nhập nội dung nhận x\xe9t!")}else(0,C.fr)("error","Vui l\xf2ng nhập điểm");H(!1)}let[V,W]=(0,v.useState)(!1);return(0,v.useEffect)(()=>{i&&(p(!0),setTimeout(()=>{p(!1)},500))},[r]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(es.Z,{width:900,onCancel:()=>W(!1),centered:!0,title:"B\xe0i l\xe0m của học vi\xean",visible:V,footer:null,children:!!(null==i?void 0:i.IeltsAnswerResults)&&(null==i?void 0:i.IeltsAnswerResults.length)>0&&(0,l.jsx)("div",{style:{whiteSpace:"pre-line"},children:(0,_.ZP)((null==i?void 0:null===(t=i.IeltsAnswerResults[0])||void 0===t?void 0:t.MyIeltsAnswerContent)||"")})}),(0,l.jsx)(es.Z,{width:"100%",centered:!0,title:(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"font-[600]",children:"Sửa b\xe0i tập"})}),open:r,onCancel:()=>a(!1),footer:E()?null:(0,l.jsx)("div",{className:"w-100",style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.Z,{background:"red",icon:"cancel",onClick:()=>a(!1),type:"button",children:"Đ\xf3ng"}),!!h&&(1==h.RoleId||2==h.RoleId)&&!(null==c?void 0:c.IsDone)&&(0,l.jsx)(M.Z,{className:"ml-[8px]",loading:G,background:"blue",icon:"save",onClick:O,type:"button",children:"Ho\xe0n th\xe0nh chấm b\xe0i"})]})}),children:(0,l.jsx)("div",{className:"wrap-writting-marking",children:(0,l.jsx)("div",{className:"wrap-mark w-100",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"col-md-8 col-12 flex flex-col",children:[(0,l.jsx)(Y.Z,{title:"Nội dung c\xe2u hỏi",className:"mark-quest-content scrollable",children:(0,l.jsx)("div",{children:(0,_.ZP)(null==c?void 0:c.Content)})}),!(0,eh.is)(h).student&&(0,l.jsx)(Y.Z,{title:"Đ\xe1p \xe1n mẫu",className:"mark-quest-content scrollable mt-3",children:(0,l.jsx)("div",{className:"mb-3",children:(0,_.ZP)(null==c?void 0:c.Explain)})}),(0,l.jsx)(Y.Z,{title:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-[600]",children:"Gi\xe1o vi\xean sửa b\xe0i"}),(0,l.jsxs)("div",{className:"font-[400] text-[14px] text-[#1976D2]",children:["Điểm cao nhất: ",null==i?void 0:i.MaxPoint]})]}),extra:(0,l.jsxs)("div",{className:"wrapper-teacher-mark",children:[T&&(0,l.jsxs)("div",{style:{fontSize:18},children:["Điểm: ",N," "]}),(0,l.jsx)("button",{type:"button",onClick:()=>W(!0),className:"btn btn-primary",children:"B\xe0i l\xe0m của học vi\xean"}),!T&&(0,l.jsx)($.Z,{min:0,max:Number(null==i?void 0:i.MaxPoint),disabled:!!h&&(0,eh.is)(h).student,className:"rounded w-[150px] h-[36px] pt-[2px]",placeholder:"Nhập điểm",value:N,onChange:e=>y(e)})]}),className:"mark-content flex-1",children:!!(null==i?void 0:i.IeltsAnswerResults)&&(null==i?void 0:i.IeltsAnswerResults.length)>0&&(0,l.jsx)(l.Fragment,{children:!g&&(0,l.jsx)("div",{children:(0,l.jsx)(ei.M,{id:"".concat(i.Id),onInit:(e,t)=>m.current=t,initialValue:(null==i?void 0:i.IeltsAnswerResults)&&(null==i?void 0:i.IeltsAnswerResults.length)!=0?(null==i?void 0:i.Note)?null==i?void 0:i.Note:null==i?void 0:null===(s=i.IeltsAnswerResults[0])||void 0===s?void 0:s.MyIeltsAnswerContent:null,onChange:e=>f(B()),disabled:E(),init:{plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",menubar:"",toolbar:"",height:600,quickbars_insert_toolbar:!1,quickbars_selection_toolbar:"bold italic underline strikethrough | fontfamily fontsize blocks | codesample | forecolor backcolor | customInsertButton",font_family_formats:"Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Book Antiqua=book antiqua,palatino; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier; Georgia=georgia,palatino; Helvetica=helvetica; Impact=impact,chicago; Oswald=oswald; Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif; Terminal=terminal,monaco; Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva; Verdana=verdana,geneva;Lucida Sans Unicode=lucida sans unicode",setup:e=>{e.ui.registry.addButton("customInsertButton",{icon:"comment-add",tooltip:"Th\xeam nhận x\xe9t",onAction:()=>{let t=B(),n=m.current.selection.getContent(),l='<span class="highlight-editor" id="cmt-'.concat(t,'">').concat(n,"</span>");e.insertContent(l),F(),q({ID:t,Text:n})}})},inline:!0,noneditable_class:"mceNonEditable",toolbar_mode:"sliding"}})})})})]}),(0,l.jsx)("div",{className:"col-md-4 col-12",children:(0,l.jsx)(Y.Z,{className:"info-comments",children:(0,l.jsxs)("div",{className:"comments h-[calc(100vh-305px)] scrollable",children:[(0,l.jsx)("div",{id:"scroll-title",className:"title",children:"Danh s\xe1ch nhận x\xe9t"}),(0,l.jsxs)("div",{id:"scroll-tag",className:"inner scrollable",children:[I&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eo.Z,{}),(0,l.jsx)(eo.Z,{}),(0,l.jsx)(eo.Z,{})]}),!I&&(0,l.jsxs)(l.Fragment,{children:[0==ex.length&&(0,l.jsx)("p",{className:"mt-5 text-center font-weight-bold red-text",children:"Kh\xf4ng c\xf3 dữ liệu"}),ex.length>0&&(0,l.jsx)(l.Fragment,{children:ex.map(e=>(null==e?void 0:e.Enable)?(0,l.jsx)(em,{hiddenRemove:!1,loading:I,item:e,active:D,onDeleteItem:z,onSave:L,onActive:Q,isSubmit:j,disabled:E()}):(0,l.jsx)(l.Fragment,{}))})]})]})]})})})]})})})})]})};let ep=[];var eI=e=>{var t;let{onGetPoint:n,dataMarking:s,dataRow:o,isWritting:a,info:d,onRefresh:r,isSpeaking:c,curGroup:u}=e,m=(0,i.useRouter)(),[h,x]=(0,v.useState)(""),[f,p]=(0,v.useState)(!1),[I,b]=(0,v.useState)(),[j,w]=(0,v.useState)(!1),[N,y]=(0,v.useState)(null),[A,k]=(0,v.useState)(!1),[D,R]=(0,v.useState)(!1),[T,E]=(0,v.useState)(!1),[S,Z]=(0,v.useState)(0),P=(0,ee.v9)(e=>e.user.information),q=!!(null==s?void 0:s.Point)||(null==s?void 0:s.Point)==0,F=async()=>{var e,t;ep=[];let n=await el.getAnswerComment({ieltsQuestionResultId:null==o?void 0:o.Id,ieltsAnswerResultId:!!(null==o?void 0:o.IeltsAnswerResults)&&(null==o?void 0:o.IeltsAnswerResults.length)>0&&(null==o?void 0:null===(e=o.IeltsAnswerResults[0])||void 0===e?void 0:e.Id)});if(200==n.status){let e=[];await n.data.data.forEach((t,n)=>{let l={};try{l=(null==t?void 0:t.Note)?JSON.parse(null==t?void 0:t.Note):{}}catch(e){l={}}e.push({...t,...l,Comment:null==t?void 0:t.Content,LinkAudio:t.Audio})}),ep=e,b(null==o?void 0:o.Point),B({Code:e[0].Code})}else ep=[{Avatar:P.Avatar,Comment:"",CreatedBy:P.FullName,CreatedOn:"",Code:"cmt-".concat(L()),LinkAudio:"",RoleName:null==P?void 0:P.role,IeltsAnswerResultId:!!(null==o?void 0:o.IeltsAnswerResults)&&(null==o?void 0:o.IeltsAnswerResults.length)>0&&(null==o?void 0:null===(t=o.IeltsAnswerResults[0])||void 0===t?void 0:t.Id),isAdd:!0}];Z(new Date().getTime())};async function Q(e){let t=await ep.findIndex(t=>(null==t?void 0:t.Code)==(null==e?void 0:e.Code));ep[t].LinkAudio=null==e?void 0:e.LinkAudio,ep[t].Comment=null==e?void 0:e.Comment,Z(L())}function B(e){x(e.Code);let t=document.getElementsByClassName("highlight-editor");for(let s=0;s<t.length;s++)if(t[s]){var n,l;t[s].getAttribute("id")==e.Code?null===(n=t[s])||void 0===n||n.setAttribute("class","highlight-editor active"):null===(l=t[s])||void 0===l||l.setAttribute("class","highlight-editor")}}function L(){return new Date().getTime()}(0,v.useEffect)(()=>{c&&F()},[j]);let z=()=>{a?E(!0):w(!0)},U=async()=>{if(R(!0),I||0===Number(I)){let e=[];ep.forEach((t,n)=>{e.push({...t,Content:t.Comment,Audio:(null==t?void 0:t.LinkAudio)||"",Enable:!0,Note:JSON.stringify(t)})});let t={Comment:ep,EssayPoint:I,IeltsQuestionResultId:null==o?void 0:o.Id,Point:I,Items:e,Note:""};await G(t)}else C.Gu.error("Vui l\xf2ng nhập điểm !");R(!1)};async function G(e){C.cM.Yellow("SUBMIT completeMark",e),Z(L());try{let t=await el.post(e);200==t.status&&(C.Gu.success("Th\xe0nh c\xf4ng"),E(!1),r(null==u?void 0:u.Id),ep=[],b(""),w(!1))}catch(e){C.Gu.error((null==e?void 0:e.message)||e)}finally{Z(L())}}(0,v.useEffect)(()=>{},[]),(0,v.useEffect)(()=>{y(null==s?void 0:s.EssayPoint)},[s]);let H=()=>!!P&&3==P.RoleId;return(0,l.jsxs)(l.Fragment,{children:[!!P&&((null==P?void 0:P.RoleId)==1||(null==P?void 0:P.RoleId)==2)&&!q&&m.asPath.includes("/exam-result")&&(0,l.jsx)(M.Z,{background:"blue",icon:"edit",type:"button",onClick:z,children:"Chấm b\xe0i"}),q&&(0,l.jsx)(M.Z,{background:"blue",icon:"file",type:"button",onClick:z,children:"Kết quả"}),(0,l.jsxs)(es.Z,{title:c?"Sửa b\xe0i":"Chấm b\xe0i",open:j,onCancel:()=>{a?E(!1):(w(!1),y(null))},footer:null,children:[!A&&(0,l.jsx)("div",{className:"wrap-mark",children:(0,l.jsx)("div",{className:"info-comments-point",children:(0,l.jsx)("div",{className:"comments",children:(0,l.jsx)("div",{id:"scroll-tag",className:"inner scrollable",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"wrapper-teacher-mark",children:[(0,l.jsxs)("label",{style:{marginBottom:0,fontWeight:500},htmlFor:"id-mark",children:["Nhập điểm:"," "]}),(0,l.jsx)($.Z,{className:"rounded w-[150px]",disabled:H()||s.IsDone,id:"id-mark",type:"number",max:null==o?void 0:o.MaxPoint,min:0,placeholder:"Nhập điểm",value:I,onChange:e=>b(e)})]}),!(0,eh.is)(P).student&&(0,l.jsx)(Y.Z,{title:"Đ\xe1p \xe1n của học sinh",className:"mark-quest-content scrollable mt-3",children:(0,l.jsx)("div",{className:"mb-3",children:null==d?void 0:null===(t=d.IeltsAnswerResults)||void 0===t?void 0:t.map(e=>(0,l.jsx)(l.Fragment,{children:(0,g.Gv)(null==e?void 0:e.MyIeltsAnswerContent)?(0,l.jsx)("p",{className:"text-tw-red",children:"Kh\xf4ng trả lời"}):(0,l.jsx)("audio",{controls:!0,children:(0,l.jsx)("source",{src:null==e?void 0:e.MyIeltsAnswerContent,type:"audio/mpeg"})})}))})}),!(0,eh.is)(P).student&&(0,l.jsx)(Y.Z,{title:"Đ\xe1p \xe1n mẫu",className:"mark-quest-content scrollable mt-3",children:(0,l.jsx)("div",{className:"mb-3",children:(0,_.ZP)(null==s?void 0:s.SampleAnswer)})}),0==ep.length&&(0,l.jsx)("p",{className:"mt-5 text-center font-weight-bold red-text",children:"Kh\xf4ng c\xf3 dữ liệu"}),ep.length>0&&(0,l.jsx)(l.Fragment,{children:ep.map(e=>(0,l.jsx)(em,{hiddenRemove:!0,item:e,active:h,onDeleteItem:()=>{},onSave:Q,onActive:B,isSubmit:f,disabled:H()||s.IsDone}))})]})})})})}),!a&&((null==P?void 0:P.RoleId)==1||(null==P?void 0:P.RoleId)==2)&&(0,l.jsx)(M.Z,{className:"w-full",background:"blue",loading:D,onClick:U,type:"button",icon:"save",children:"Lưu"})]}),(0,l.jsx)(eg,{markingWritting:T,info:d,onRefresh:r,setMarkingWritting:E,dataMarking:s,dataRow:o,curGroup:u})]})},eb=n(37642),ej=e=>{var t,n,s,i;let{data:a,IndexInExam:r,disabled:c,onRefreshNav:u,setCurrentQuestion:m,isResult:x,curGroup:f,onRefresh:p}=e,[I,b]=(0,v.useState)(""),[j,w]=(0,v.useState)((null==a?void 0:null===(n=a.DoingTestDetails)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.Id)||0),{setLoadingUpdate:N,audioRecordingId:y}=(0,d._O)();(0,v.useEffect)(()=>{var e,t;w((null==a?void 0:null===(t=a.DoingTestDetails)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.Id)||0)},[null==a?void 0:null===(i=a.DoingTestDetails)||void 0===i?void 0:null===(s=i[0])||void 0===s?void 0:s.Id]);let C=async(e,t)=>{var n,l,s,i,d,r;console.time("--- Select Answer"),b(t),N(!0);let c=[];if(c.push({Id:j,IeltsAnswerId:0,IeltsAnswerContent:t,Type:0,Index:0}),null===o()||void 0===o()?void 0:null===(n=o().query)||void 0===n?void 0:n.exam){console.log("-------- PUT items: ",c);try{let e=await h.J.insertDetail({DoingTestId:parseInt((null===o()||void 0===o()?void 0:null===(l=o().query)||void 0===l?void 0:l.exam)+""),IeltsQuestionId:a.Id,Items:[...c]}),t=null==e?void 0:null===(d=e.data)||void 0===d?void 0:null===(i=d.data)||void 0===i?void 0:null===(s=i.IeltsQuestions)||void 0===s?void 0:s.find(e=>(null==e?void 0:e.Id)==(null==a?void 0:a.Id));w((null==t?void 0:null===(r=t.DoingTestDetails[0])||void 0===r?void 0:r.Id)||0)}catch(e){(0,g.xZ)(e)}finally{u(),N(!1)}}console.timeEnd("--- Select Answer")};function A(){var e,t,n;return I||((null==a?void 0:a.DoingTestDetails)?(null==a?void 0:null===(e=a.DoingTestDetails[0])||void 0===e?void 0:e.IeltsAnswerContent)||"":x&&(null==a?void 0:a.IeltsAnswerResults.length)>0&&(null==a?void 0:null===(t=a.IeltsAnswerResults[0])||void 0===t?void 0:t.MyIeltsAnswerContent)&&(null==a?void 0:null===(n=a.IeltsAnswerResults[0])||void 0===n?void 0:n.MyIeltsAnswerContent)||"")}return(0,l.jsxs)("div",{onClick:()=>!o().asPath.includes("/questions")&&m({...a,IeltsQuestionId:null==a?void 0:a.Id,IeltsQuestionResultId:null==a?void 0:a.Id}),id:"cauhoi-"+a.Id,className:"cc-choice-warpper border-[1px] border-[#e6e6e6]",children:[(0,l.jsxs)("div",{className:"exam-quest-wrapper none-selection",children:[(0,l.jsxs)("div",{id:"cauhoi-".concat(a.Id),className:"cc-choice-number",children:[!o().asPath.includes("questions")&&r&&(0,l.jsx)("div",{id:"quest-num-".concat(a.Id),className:"ex-quest-tf",children:r}),(0,l.jsx)("div",{className:"bg-[#e9e9e9] h-[26px] px-[8px] rounded-full text-[14px] inline-flex items-center justify-center",children:(0,l.jsxs)("div",{children:["Điểm cao nhất: ",(null==a?void 0:a.MaxPoint)||(null==a?void 0:a.Point)]})})]}),(0,l.jsx)("div",{className:"h-[16px]"}),(0,_.ZP)(null==a?void 0:a.Content)]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-[600] mb-2 mt-3",children:"Answer"}),(0,l.jsxs)(l.Fragment,{children:[!x&&(0,l.jsx)(X,{disabled:o().asPath.includes("take-an-exam")?!!y&&y!==(null==a?void 0:a.Id):c,linkRecord:A(),getLinkRecord:e=>C(a.Id,e),packageResult:[],exerciseID:a.Id,getActiveID:()=>{}}),!!x&&A()&&(0,l.jsx)("audio",{controls:!0,children:(0,l.jsx)("source",{src:A(),type:"audio/mpeg"})}),!!x&&!A()&&(0,l.jsx)("div",{className:"text-[red]",children:"Kh\xf4ng trả lời"}),!!x&&(0,l.jsxs)("div",{className:"flex flex-col items-start mt-[16px]",children:[!(null==a?void 0:a.Point)&&(0,l.jsx)(eb.Z,{color:"yellow",className:"!px-[8px]",children:"Chưa chấm"}),!!(null==a?void 0:a.Point)&&(0,l.jsxs)(eb.Z,{color:"green",className:"!px-[8px]",children:[(0,l.jsx)(L.l_A,{size:14,className:"mr-[4px]"})," Đ\xe3 chấm"]}),!!(null==a?void 0:a.Point)&&(0,l.jsxs)("div",{className:"title-exercise-content",style:{marginTop:16,fontSize:16,fontWeight:600},children:["Điểm: ",null==a?void 0:a.Point]}),(0,l.jsx)("div",{className:"mt-[16px]",children:(0,l.jsx)(eI,{onRefresh:p,isSpeaking:!0,onGetPoint:e=>{},dataRow:a,dataMarking:a,info:a,curGroup:f})})]})]})]})]},"question-"+a.Id)},ew=n(38646),eN=n.n(ew),ey=e=>{var t,n;let{onEditorChange:s,data:i,editorRef:o,id:a}=e;return(0,l.jsx)("div",{className:eN().rootEditor,children:(0,l.jsx)(ei.M,{onEditorChange:s,initialValue:(null==i?void 0:null===(t=i.DoingTestDetails)||void 0===t?void 0:t.length)>0?null==i?void 0:null===(n=i.DoingTestDetails[0])||void 0===n?void 0:n.IeltsAnswerContent:null,id:"editor-".concat(a),onInit:(e,t)=>o.current=t,init:{menubar:"",toolbar:"",height:600,quickbars_insert_toolbar:!1,inline:!0,noneditable_class:"mceNonEditable",toolbar_mode:"sliding"}})})},eC=n(52476);let eA=(0,eh.vE)(500);var ek=e=>{var t,n,s;let{data:i,IndexInExam:a,isDoing:r,isResult:c,curGroup:u,onRefresh:m}=e,{questionsInSection:x,setCurrentQuestion:f,setQuestionsInSection:p,setNotSetCurrentQuest:I,setLoadingUpdate:b}=(0,d._O)(),j=(0,v.useRef)(null),w=!!(null==i?void 0:i.Point)||(null==i?void 0:i.Point)==0,[N,y]=(0,v.useState)((null==i?void 0:i.DoingTestDetails)?[...null==i?void 0:i.DoingTestDetails]:[]);async function C(e){var t,n,l,s,a,d;let r=[];if(N&&N.length>0?N.forEach(t=>{r.push({...t,IeltsAnswerId:0,Id:null==t?void 0:t.Id,IeltsAnswerContent:null==e?void 0:e.Content,Enable:!(0,g.Gv)(null==e?void 0:e.Content)})}):r.push({Id:0,IeltsAnswerId:0,IeltsAnswerContent:null==e?void 0:e.Content,Type:0,Index:0,Enable:!0}),null===o()||void 0===o()?void 0:null===(t=o().query)||void 0===t?void 0:t.exam)try{b(!0);let t=await h.J.insertDetail({DoingTestId:parseInt((null===o()||void 0===o()?void 0:null===(n=o().query)||void 0===n?void 0:n.exam)+""),IeltsQuestionId:i.Id,Items:[...r]});if(200==t.status){let n=null==t?void 0:null===(s=t.data)||void 0===s?void 0:null===(l=s.data)||void 0===l?void 0:l.IeltsQuestions;if(n){let e=n.findIndex(e=>(null==e?void 0:e.Id)==(null==i?void 0:i.Id));e>-1&&(null===(a=n[e])||void 0===a?void 0:a.DoingTestDetails)&&y([...null===(d=n[e])||void 0===d?void 0:d.DoingTestDetails])}let o=x.findIndex(e=>(null==e?void 0:e.IeltsQuestionId)==(null==i?void 0:i.Id));if(o>-1){I(!0);let t=[...x];t[o].IsDone=!(0,g.Gv)(null==e?void 0:e.Content),p([...t])}}}catch(e){(0,g.xZ)(e)}finally{b(!1)}}return(0,l.jsxs)("div",{onClick:function(){o().asPath.includes("/questions")||f({...i,IeltsQuestionId:null==i?void 0:i.Id,IeltsQuestionResultId:null==i?void 0:i.Id})},id:"cauhoi-"+i.Id,className:"cc-choice-warpper border-[1px] border-[#e6e6e6] ",children:[(0,l.jsxs)("div",{className:"exam-quest-wrapper none-selection",children:[(0,l.jsxs)("div",{className:"cc-choice-number",children:[!o().asPath.includes("questions")&&a&&(0,l.jsx)("div",{id:"quest-num-".concat(i.Id),className:"ex-quest-tf",children:a}),(0,l.jsx)("div",{className:"bg-[#e9e9e9] h-[26px] px-[8px] rounded-full text-[14px] inline-flex items-center justify-center",children:(0,l.jsxs)("div",{children:["Điểm cao nhất: ",(null==i?void 0:i.MaxPoint)||(null==i?void 0:i.Point)]})})]}),(0,l.jsx)("div",{className:"h-[16px]"}),(0,_.ZP)(null==i?void 0:i.Content)]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"font-[600] mb-2 mt-3",children:"Answer"}),(0,l.jsx)("div",{className:"font-[600] mb-2 mt-3",children:"(".concat((()=>{let e;if(c){var t,n;if(!(null==i?void 0:null===(t=i.IeltsAnswerResults[0])||void 0===t?void 0:t.MyIeltsAnswerContent))return 0;e=null==i?void 0:null===(n=i.IeltsAnswerResults[0])||void 0===n?void 0:n.MyIeltsAnswerContent}else{if(!j.current)return 0;e=j.current.getContent()}return eC.X.countTextInHTML(e)})()," k\xfd tự)")})]}),!c&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(ey,{data:i,id:null==i?void 0:i.Id,editorRef:j,onEditorChange:()=>{o().asPath.includes("take-an-exam")&&eA(()=>{j.current&&C({Content:j.current.getContent()})})}})}),!!c&&(0,l.jsx)("div",{className:"whitespace-pre-wrap",children:(0,_.ZP)(r&&N?(null===(t=N[0])||void 0===t?void 0:t.IeltsAnswerContent)?null===(n=N[0])||void 0===n?void 0:n.IeltsAnswerContent:"":c?(null==i?void 0:null===(s=i.IeltsAnswerResults[0])||void 0===s?void 0:s.MyIeltsAnswerContent)||"Kh\xf4ng trả lời":"")}),!!c&&(0,l.jsxs)("div",{className:"flex flex-col items-start mt-[16px]",children:[!w&&(0,l.jsx)(eb.Z,{color:"yellow",className:"!px-[8px]",children:"Chưa chấm"}),w&&(0,l.jsxs)(eb.Z,{color:"green",className:"!px-[8px]",children:[(0,l.jsx)(L.l_A,{size:14,className:"mr-[4px]"})," Đ\xe3 chấm"]}),w&&(0,l.jsxs)("div",{className:"title-exercise-content",style:{marginTop:16,marginBottom:-8,fontSize:16,fontWeight:600},children:["Điểm: ",null==i?void 0:i.Point]}),(0,l.jsx)("div",{className:"mt-[16px]",children:(0,l.jsx)(eI,{onRefresh:m,isWritting:!0,onGetPoint:e=>{},dataRow:i,dataMarking:i,info:i,curGroup:u})})]})]})]},"question-"+i.Id)};function eD(e,t){if(o().asPath.includes("questions"))return null;let n=e.findIndex(e=>(null==e?void 0:e.IeltsQuestionId)==(null==t?void 0:t.Id));return -1!==n?e[n]:""}function eR(e,t){if(o().asPath.includes("questions"))return null;let n=e.findIndex(e=>(null==e?void 0:e.IeltsQuestionResultId)==(null==t?void 0:t.Id));return -1!==n?e[n]:""}var eT=e=>{let{data:t,isFinal:n,onRefresh:i,showEdit:c}=e,{onRefreshNav:u,isResult:v,setCurGroup:m}=e,{questionsInSection:h,setCurrentQuestion:x}=(0,d._O)(),g=v?(null==t?void 0:t.IeltsQuestionResults)||[]:null==t?void 0:t.IeltsQuestions,I={choice:(null==t?void 0:t.Type)==a.j.MultipleChoice,writing:(null==t?void 0:t.Type)==a.j.Write,trueOrFalse:(null==t?void 0:t.Type)==a.j.TrueOrFalse,speak:(null==t?void 0:t.Type)==a.j.Speak,mind:(null==t?void 0:t.Type)==a.j.Mindmap,sort:(null==t?void 0:t.Type)==a.j.Sort};return(0,l.jsxs)(l.Fragment,{children:[I.choice&&g.map((e,t)=>{let n=v?eR(h,e):eD(h,e);return(0,l.jsx)(p,{data:e,index:t,indexInExam:(null==n?void 0:n.Index)||"",showEdit:c,isDoing:o().asPath.includes("take-an-exam"),isResult:v},t)}),I.writing&&g.map((e,n)=>{let s=v?eR(h,e):eD(h,e);return(0,l.jsx)(ek,{data:e,IndexInExam:null==s?void 0:s.Index,isDoing:o().asPath.includes("take-an-exam"),isResult:v,curGroup:t,onRefresh:i},n)}),I.trueOrFalse&&(0,l.jsxs)("div",{className:"mb-[16px] bg-[#ffffff] p-[8px] !rounded-[6px]",children:[(0,l.jsxs)("div",{className:"w-full mb-[8px] hidden w500:flex",children:[(0,l.jsx)("div",{className:"flex-1"}),(0,l.jsxs)("div",{className:"h-[30px] flex items-center font-[600]",children:[(0,l.jsx)("div",{className:"w-[50px]",children:"True"}),(0,l.jsx)("div",{className:"w-[50px]",children:"False"}),(0,l.jsx)("div",{className:"w-[80px]",children:"Not Given"})]})]}),g.map((e,t)=>{let n=v?eR(h,e):eD(h,e);return(0,l.jsx)(r.Z,{type:"doing",data:e,indexInExam:(null==n?void 0:n.Index)||"",isDoing:o().asPath.includes("take-an-exam"),setCurrentQuestion:x,isResult:v,setCurGroup:m},t)}),v&&(0,l.jsx)("div",{className:"mt-[4px] mb-[4px]",children:(0,l.jsx)(f,{})})]}),I.speak&&g.map((e,n)=>{let s=v?eR(h,e):eD(h,e);return(0,l.jsx)(ej,{disabled:!0,data:e,IndexInExam:null==s?void 0:s.Index,setCurrentQuestion:x,onRefreshNav:u,isResult:v,curGroup:t,onRefresh:i,setCurGroup:m},n)}),I.mind&&(0,l.jsx)(D,{disabled:!0,isFinal:n,dataSource:t,setCurrentQuestion:x,isResult:v,setCurGroup:m}),I.sort&&(0,l.jsx)(s.Z,{direction:"vertical",className:"w-full",children:g.map((e,t)=>{let s=v?eR(h,e):eD(h,e);return(0,l.jsx)(B,{IndexInExam:null==s?void 0:s.Index,disabled:!0,isFinal:n,data:e,setCurrentQuestion:x,isResult:v,setCurGroup:m,isDoing:o().asPath.includes("take-an-exam"),index:t,onRefresh:i})})})]})}},83446:function(e,t,n){"use strict";var l=n(30653);t.Z=e=>e?(0,l.ZP)(e.replace(/contenteditable="true"/gi,"")):""},3027:function(e,t,n){"use strict";var l=n(85893),s=n(69361),i=n(92493),o=n(49367),a=n(8285),d=n(84295),r=n(92594),c=n(18644),u=n(92088),v=n(54425),m=n(75985),h=n(22101),x=n(48506);t.Z=e=>{let{background:t,children:n,icon:f,type:g="button",onClick:p,className:I,disable:b,loading:j,iconClassName:w,mobileIconOnly:N}=e,y=w||"",C=()=>{"button"==g&&!b&&p&&p()};return(0,l.jsxs)("button",{disabled:!!b||!!j,type:g,onClick:e=>{switch(f){case"upload":case"excel":break;default:e.stopPropagation()}b||C()},className:"font-medium none-selection gap-[8px] rounded-lg h-[36px] px-[10px] inline-flex items-center justify-center !flex-shrink-0 ".concat(b||j?"bg-[#cacaca] hover:bg-[#bababa] focus:bg-[#acacac] cursor-not-allowed":"green"==t?"bg-[#4CAF50] hover:bg-[#449a48] focus:bg-[#38853b]":"blue"==t?"bg-[#0A89FF] hover:bg-[#157ddd] focus:bg-[#1576cf]":"red"==t?"!bg-[#C94A4F] hover:!bg-[#b43f43] focus:!bg-[#9f3136]":"yellow"==t?"bg-[#FFBA0A] hover:bg-[#e7ab11] focus:bg-[#d19b10]":"black"==t?"bg-[#000] hover:bg-[#191919] focus:bg-[#313131]":"primary"==t?"bg-[#1b73e8] hover:bg-[#1369da] focus:bg-[#1b73e8]":"purple"==t?"bg-[#8E24AA] hover:bg-[#7B1FA2] focus:bg-[#8E24AA]":"disabled"==t?"bg-[#cacaca] hover:bg-[#bababa] focus:bg-[#acacac] cursor-not-allowed":"orange"==t?"bg-[#FF9800] hover:bg-[#f49302] focus:bg-[#f49302] cursor-not-allowed":"transparent"==t?"bg-[] hover:bg-[] focus:bg-[]":"white"===t?"bg-[#ffffff] border-[1px] border-[#D6DAE1] hover:bg-[#D6DAE1] focus:bg-[#D6DAE1]":void 0," ").concat(b||j?"text-white":"green"==t||"blue"==t||"red"==t?"text-white ":"yellow"==t?"text-black":"black"==t||"primary"==t||"purple"==t||"disabled"==t?"text-white":void 0," ").concat(I," transition-all duration-300"),children:[!!j&&(0,l.jsx)(s.Z,{className:"loading-base !ml-0 !mt-[1px]"}),!!f&&!j&&("sort"==f?(0,l.jsx)(d.roE,{size:18,className:y}):"add"==f?(0,l.jsx)(i.Z,{size:18,className:y}):"cart"==f?(0,l.jsx)(x.fhZ,{size:20,className:y}):"edit"==f?(0,l.jsx)(r.vPQ,{size:18,className:y}):"cancel"==f?(0,l.jsx)(r.$Rx,{size:18,className:y}):"save"==f?(0,l.jsx)(r.mW3,{size:18,className:y}):"remove"==f?(0,l.jsx)(r.Ybf,{size:18,className:y}):"check"==f?(0,l.jsx)(o.KP3,{size:18,className:y}):"exchange"==f?(0,l.jsx)(v.F7l,{size:22,className:y}):"eye"==f?(0,l.jsx)(o.Zju,{size:20,className:y}):"print"==f?(0,l.jsx)(o.s4T,{size:20,className:y}):"hide"==f?(0,l.jsx)(a.nJ9,{size:18,className:y}):"file"==f?(0,l.jsx)(o.Ehc,{size:18,className:y}):"download"==f?(0,l.jsx)(x.HXz,{size:22,className:y}):"upload"==f?(0,l.jsx)(x.S7F,{size:22,className:y}):"reset"==f?(0,l.jsx)(a.oAZ,{size:20,className:y}):"search"==f?(0,l.jsx)(a.wnI,{size:20,className:y}):"excel"==f?(0,l.jsx)(h.bBH,{size:18,className:y}):"power"==f?(0,l.jsx)(c.y1A,{size:20,className:y}):"enter"==f?(0,l.jsx)(c.Wem,{size:20,className:y}):"send"==f?(0,l.jsx)(r.LbG,{size:18,className:y}):"payment"==f?(0,l.jsx)(u.IDG,{size:18,className:y}):"arrow-up"==f?(0,l.jsx)(v.Tvk,{size:18,className:y}):"arrow-down"==f?(0,l.jsx)(v.ebp,{size:18,className:y}):"calculate"==f?(0,l.jsx)(v.eAe,{size:18,className:y}):"full-screen"==f?(0,l.jsx)(u.Mmr,{size:18,className:y}):"restore-screen"==f?(0,l.jsx)(u.nyS,{size:18,className:y}):"input"==f?(0,l.jsx)(m.j6p,{size:18,className:y}):"mic"==f?(0,l.jsx)(c.RU_,{size:25,className:y}):"exportPDF"===f?(0,l.jsx)(d.yRW,{size:16,className:y}):void 0),N?(0,l.jsx)("div",{className:"hidden w600:inline",children:n}):n]})}},37642:function(e,t,n){"use strict";var l=n(85893);n(67294),t.Z=e=>{let{color:t,children:n,className:s}=e;return(0,l.jsx)("div",{className:"rounded-lg px-3 py-1 w-auto inline-flex items-center ".concat("green"==t?"bg-[#4CAF50]":"blue"==t?"bg-[#0A89FF]":"red"==t?"bg-[#C94A4F]":"yellow"==t?"bg-[#FFBA0A]":"black"==t?"bg-[#000]":"disabled"==t?"bg-[#CFD8DC]":"orange"==t?"bg-[#ff7c38]":void 0," ").concat("green"==t||"blue"==t||"red"==t?"text-white ":"yellow"==t?"text-black":"black"==t?"text-white":"disabled"==t?"text-gray-800":void 0," ").concat(s),children:n})}},74776:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var l=n(30306)},17298:function(e,t,n){"use strict";n.d(t,{i:function(){return l},l:function(){return s}});let l=[{required:!0,message:"Kh\xf4ng được để trống"}],s=[{required:!1}]},1578:function(e,t,n){"use strict";n.d(t,{_O:function(){return r}});var l=n(85893),s=n(11163),i=n(67294),o=n(34617),a=n(58416);let d=(0,i.createContext)(null),r=()=>(0,i.useContext)(d);t.ZP=function(e){let t=(0,s.useRouter)(),[n,r]=(0,i.useState)(!0),[c,u]=(0,i.useState)(null),[v,m]=(0,i.useState)([]),[h,x]=(0,i.useState)([]),[f,g]=(0,i.useState)(!1),[p,I]=(0,i.useState)(null),[b,j]=(0,i.useState)(!1),[w,N]=(0,i.useState)(null),[y,C]=(0,i.useState)(null),[A,k]=(0,i.useState)(null),[D,R]=(0,i.useState)(null);async function T(e,n){if(null==e?void 0:e.Id){C(!0);try{var l;let s=await o.$.getQuestions({ieltsSectionId:null==e?void 0:e.Id,doingTestId:parseInt((null==t?void 0:null===(l=t.query)||void 0===l?void 0:l.exam)+"")||null});200==s.status?x(s.data.data):(x([]),n([]))}catch(e){a.Gu.error(null==e?void 0:e.message),x([]),n([])}finally{C(!1),r(!1)}}}return(0,l.jsx)(d.Provider,{value:{questionWithAnswers:v,setQuestionWithAnswers:m,curAudio:c,setCurAudio:u,loading:n,setLoading:r,questionsInSection:h,setQuestionsInSection:x,getAllQuestions:T,notSetCurrentQuest:f,setNotSetCurrentQuest:g,currentQuestion:p,setCurrentQuestion:I,loadingUpdate:b,setLoadingUpdate:j,audioRecordingId:w,setAudioRecordingId:N,sectionLoading:y,setSectionLoading:C,skillLoading:A,setSkillLoading:k,examTimeRemaining:D,setExamTimeRemaining:R},children:e.children})}},32399:function(e,t,n){"use strict";n.d(t,{VO:function(){return s}});var l=function(){var e=[],t=[],n=null,l=!1,s=0,i=null,o=null,a=null,d=null,r={};function c(e,t){for(var n=new Float32Array(t),l=0,s=e.length,i=0;i<s;i++){var o=e[i];n.set(o,l),l+=o.length}return n}function u(e,t,n){for(var l=n.length,s=0;s<l;s++)e.setUint8(t+s,n.charCodeAt(s))}function v(r){console.log("sampleRate: ",a=(d=new(window.AudioContext||window.webkitAudioContext)).sampleRate),i=d.createGain(),(o=d.createMediaStreamSource(r)).connect(i),(n=d.createScriptProcessor(8192,2,2)).onaudioprocess=function(n){if(l){var i=n.inputBuffer.getChannelData(0),o=n.inputBuffer.getChannelData(1);e.push(new Float32Array(i)),t.push(new Float32Array(o)),s+=8192}},i.connect(n),n.connect(d.destination)}return{start:function(){var n,i,o,a;(null===(i=window)||void 0===i?void 0:null===(n=i.navigator)||void 0===n?void 0:n.getUserMedia)||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia),navigator&&(null===(o=navigator)||void 0===o?void 0:o.getUserMedia)?navigator.getUserMedia({audio:!0},v,function(e){alert("An error occurred while trying to access the microphone. Please ensure the browser has permission to access the microphone or check your microphone settings.")}):(null===(a=navigator)||void 0===a?void 0:a.mediaDevices)?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(e=>v(e)).catch(e=>console.error("".concat(e.name,": ").concat(e.message))):alert("Audio not supported in this browser."),l=!0,e.length=t.length=0,s=0,r.innerHTML="Recording now..."},stop:function(d){l=!1,r.innerHTML="Building wav file...";var v,m=function(e,t){for(var n=e.length+t.length,l=new Float32Array(n),s=0,i=0;i<n;)l[i++]=e[s],l[i++]=t[s],s++;return l}(c(e,s),c(t,s)),h=new DataView(new ArrayBuffer(44+2*m.length));u(h,0,"RIFF"),h.setUint32(4,44+2*m.length,!0),u(h,8,"WAVE"),u(h,12,"fmt "),h.setUint32(16,16,!0),h.setUint16(20,1,!0),h.setUint16(22,2,!0),h.setUint32(24,a,!0),h.setUint32(28,4*a,!0),h.setUint16(32,4,!0),h.setUint16(34,16,!0),u(h,36,"data"),h.setUint32(40,2*m.length,!0);for(var x=m.length,f=44,g=0;g<x;g++)h.setInt16(f,32767*m[g],!0),f+=2;var p=new Blob([h],{type:"audio/wav"});r.innerHTML="Handing off the file now...";var I=(window.URL||window.webkitURL).createObjectURL(p);l=!1,null==o||null===(v=o.mediaStream)||void 0===v||v.getAudioTracks().forEach(function(e){e.stop()}),n.disconnect(0),o.disconnect(0),i.disconnect(0),d({url:I,blob:p,power:"https://ischau.org",timeStamp:new Date().getTime()})}}}();function s(){return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,new Promise((e,t)=>{if(navigator.getUserMedia){let n=[];navigator.getUserMedia({audio:!0},function(l){l.getTracks().forEach(e=>e.stop()),navigator.mediaDevices.enumerateDevices().then(function(t){t.forEach(function(e){"audioinput"===e.kind&&(console.log("Microphone: "+e.label),n.push(e.label))}),e(n)}).catch(function(e){console.log("An error occurred: "+e),t(e)})},function(e){console.log("The following error occurred: "+e.name),t(e)})}else console.log("getUserMedia not supported on your browser!"),t("getUserMedia not supported")})}t.ZP=l},52476:function(e,t,n){"use strict";n.d(t,{L:function(){return l},X:function(){return i}});let l=e=>{let t=document.createElement("a");t.href=e,t.download="DOWNLOAD",document.body.appendChild(t),t.click(),document.body.removeChild(t)};class s{numberToText(e){if(!e)return"-";let t=String(e)+"",n=0,l=[],s=t.length,i=[],o="";if(0==s||"NaN"==t)return"";for(;s>=0;)l.push(t.substring(s,Math.max(s-3,0))),s-=3;for(n=l.length-1;n>=0;n--)""!=l[n]&&"000"!=l[n]&&(i.push(this.convert_block_three(l[n])),this.dvBlock[n]&&i.push(this.dvBlock[n]));return console.log(o=i.join(" ")),"".concat(o.replace(/[0-9]/g,"").replace(/ /g," ").replace(/ $/,"")," việt nam đồng.")}constructor(){this.countTextInHTML=e=>{if(!e)return 0;let t=e.replace(/<\/?[^>]+(>|$)/g,""),n=document.createElement("div");return n.innerHTML=t,(n.textContent||n.innerText||"").replace(/[^a-zA-Z0-9\u00C0-\u1EF9]/g,"").length||0},this.getVND=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" VNĐ";return null==e?"--":Number(e)&&!e?0:Number.isInteger(e)?((null==e?void 0:e.toString())||"0").replace(/\B(?=(\d{3})+(?!\d))/g,",")+t:(e>0?e.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,","):e)+t},this.defaultNumbers=" hai ba bốn năm s\xe1u bảy t\xe1m ch\xedn",this.dvBlock="1 ngh\xecn triệu tỷ".split(" "),this.chuHangDonVi=("1 một"+this.defaultNumbers).split(" "),this.chuHangChuc=("lẻ mười"+this.defaultNumbers).split(" "),this.chuHangTram=("kh\xf4ng một"+this.defaultNumbers).split(" "),this.convert_block_three=e=>{if("000"==e)return"";let t=e+"";switch(t.length){case 0:return"";case 1:return this.chuHangDonVi[t];case 2:return this.convert_block_two(t);case 3:let n="";return"00"!=t.slice(1,3)&&(n=this.convert_block_two(t.slice(1,3))),this.chuHangTram[t[0]]+" trăm "+n}},this.convert_block_two=e=>{let t=this.chuHangDonVi[e[1]],n=this.chuHangChuc[e[0]],l="";return e[0]>0&&5==e[1]&&(t="lăm"),e[0]>1&&(l=" mươi",1==e[1]&&(t=" mốt")),n+""+l+" "+t}}}let i=new s},41480:function(e){e.exports={ccEditor:"styles_ccEditor__II_s7"}},38646:function(e){e.exports={rootEditor:"styles_rootEditor__5xQ1E"}},30306:function(e){"use strict";e.exports=JSON.parse('{"MultipleChoice":1,"MultipleChoiceLabel":"Trắc nghiệm","DragDrop":2,"DragDropLabel":"Chọn từ v\xe0o \xf4 trống","FillInTheBlank":3,"FillInTheBlankLabel":"Điền v\xe0o \xf4 trống","Mindmap":4,"MindmapLabel":"Mindmap","TrueOrFalse":5,"TrueOrFalseLabel":"True/False/Not Given","Sort":6,"SortLabel":"Sắp xếp c\xe2u","Write":7,"WriteLabel":"Viết","Speak":8,"SpeakLabel":"N\xf3i"}')}}]);