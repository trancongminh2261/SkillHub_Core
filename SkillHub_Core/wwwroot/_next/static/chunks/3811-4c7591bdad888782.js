"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3811],{7653:function(e,l,s){var i=s(85893);s(67294);var n=s(58759),t=s(18644),a=s(96352),d=s(78773),c=s(48506),o=s(1578);l.Z=e=>{let{showAudioControl:l,setShowAudioControl:s,curSection:r,curSkill:u}=e,{curAudio:x,setCurAudio:m}=(0,o._O)();return(0,i.jsx)(i.Fragment,{children:!!(null==x?void 0:x.Audio)&&(0,i.jsx)("div",{className:"right-[16px] duration-200 bottom-[16px] absolute ".concat(l?"ex-au-show":"ex-au-hidden"),children:(0,i.jsx)(a.Z,{className:"h-[94px] duration-200 !w-[calc(100vw-32px)] w400:!w-[350px] hide-loop",src:null==x?void 0:x.Audio,onPlay:e=>{},showSkipControls:!1,showDownloadProgress:!1,showJumpControls:!1,loop:!1,autoPlay:!0,layout:"horizontal-reverse",header:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(n.Z,{content:"Đ\xf3ng",place:"left",id:"x-".concat(null==r?void 0:r.Id,"-").concat(null==u?void 0:u.Id),children:(0,i.jsx)("div",{onClick:()=>m(null),className:"all-center rounded-full w-[24px] h-[24px] cursor-pointer mr-[8px] bg-[red]",children:(0,i.jsx)(t.Lp2,{size:18,color:"#fff"})})}),(0,i.jsx)(n.Z,{content:l?"Thu nhỏ":"Mở rộng",place:"left",id:"min-".concat(null==r?void 0:r.Id,"-").concat(null==u?void 0:u.Id),children:(0,i.jsxs)("div",{onClick:()=>s(!l),className:"all-center rounded-full w-[24px] h-[24px] cursor-pointer ".concat(l?"bg-[#a2a2a2]":"bg-[#0A89FF]"),children:[l&&(0,i.jsx)(d.iFH,{size:14,color:"#fff"}),!l&&(0,i.jsx)(c.waq,{size:14,color:"#fff"})]})}),(0,i.jsx)("div",{className:"ml-[8px] font-[600] in-1-line",children:null==x?void 0:x.Name})]})})})})}},13811:function(e,l,s){s.d(l,{Z:function(){return eo}});var i=s(85893),n=s(98302),t=s(34223),a=s(11163),d=s.n(a),c=s(67294),o=s(65890),r=s(78773),u=s(85340),x=s(54425),m=s(9473),h=s(34617),v=s(65320),f=s(34460),j=s(98546),p=s(59178);let g="/api/IeltsSkill",N={getAll:e=>p.e.get(g,{params:e}),post:e=>p.e.post(g,e),put:e=>p.e.put(g,e),saveIndex:e=>p.e.put(g+"/change-index",e),delete:e=>p.e.delete(g+"/"+e)};var w=s(74776),I=s(58416),b=s(42006),y=s(4644),k=s(31884),C=s(1578),S=s(83446),Z=s(3027),A=s(58759),F=s(1120),E=s(7653),Q=s(13081),z=s(46556),P=s(18644),T=function(e){let{currentSection:l,curGroup:s,onRefresh:n,getQuestions:t}=e;async function a(){try{let e=await f.r.delete(null==s?void 0:s.Id);(null==e?void 0:e.status)==200&&(t(),n())}catch(e){I.Gu.error(null==e?void 0:e.message)}}return(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(Q.Z,{isEdit:!0,section:l,defaultData:s,onRefresh:n}),(0,i.jsx)(z.Z,{title:"Xo\xe1 nh\xf3m c\xe2u hỏi n\xe0y?",onConfirm:a,children:(0,i.jsxs)("div",{className:"exam-23-btn-del-group",children:[(0,i.jsx)(P.bjh,{size:20}),(0,i.jsx)("div",{className:"hidden w600:inline ml-2",children:"Xo\xe1 nh\xf3m c\xe2u"})]})})]})},R=s(99528),B=s(39456),G=s(90924),D=s(31379),q=s(74253),O=s(8285),$=s(92594),V=s(79930),_=s(63237),L=s(17298),J=s(95117),M=s(98856),X=s(92933),H=e=>{let{onRefresh:l,isEdit:s,defaultData:n,className:t,onOpen:a}=e,[o]=D.Z.useForm(),[r,u]=(0,c.useState)(!1),[x,h]=(0,c.useState)(!1);async function v(e){try{let s=await N.put(e);200==s.status&&((0,I.fr)("success",s.data.message),l&&(l(),o.resetFields(),h(!1)))}catch(e){(0,I.fr)("error",e.message)}finally{u(!1)}}async function f(e){try{let s=await N.post(e);200==s.status&&((0,I.fr)("success",s.data.message),l&&(l(),o.resetFields(),h(!1)))}catch(e){(0,I.fr)("error",e.message)}finally{u(!1)}}(0,c.useEffect)(()=>{x&&a&&a()},[x]);let j=async e=>{try{var l;let s=await V.X.uploadImage(e.file.originFileObj);if(200!=s.status)return"";return null===(l=s.data)||void 0===l?void 0:l.data}catch(e){return(0,I.fr)("error",e.message),""}},p=async e=>{var l;u(!0);let i="";(null==e?void 0:e.Audio)&&(i="object"==typeof(null==e?void 0:e.Audio)?await j(null==e?void 0:e.Audio):null==e?void 0:e.Audio);let t={...e,IeltsExamId:parseInt((0,b.Jx)((null===(l=d().query)||void 0===l?void 0:l.exam)+"")),Audio:i};I.cM.Yellow("DATA_SUBMIT",t),s||f(t),s&&v({...t,ID:n.Id,Audio:i})},g=(0,m.v9)(e=>e.user.information);return(0,i.jsxs)(i.Fragment,{children:[(null==g?void 0:g.RoleId)==1&&!s&&(0,i.jsxs)("div",{onClick:function(){h(!x)},className:"cc-23-skill flex-shrink-0 ".concat("bg-[#4CAF50] hover:bg-[#449a48] focus:bg-[#38853b] text-[#fff]"),children:[(0,i.jsx)(O.poH,{size:18}),(0,i.jsx)("div",{className:"ml-[4px]",children:"Kỹ năng mới"})]}),(null==g?void 0:g.RoleId)==1&&!!s&&(0,i.jsxs)("div",{onClick:function(e){e.stopPropagation(),o.setFieldsValue({Audio:null==n?void 0:n.Audio}),o.setFieldsValue({Time:null==n?void 0:n.Time}),o.setFieldsValue({Name:null==n?void 0:n.Name}),h(!0)},className:"cc-23-skill-menu-item",children:[(0,i.jsx)($.vPQ,{size:16,className:"text-[#9C27B0]"}),(0,i.jsx)("div",{className:"ml-[8px] font-[500]",children:"Cập nhật"})]}),(0,i.jsx)(_.Z,{centered:!0,title:s?"Cập nhật kỹ năng":"Th\xeam kỹ năng mới",width:500,open:x,onCancel:()=>!r&&h(!1),footer:(0,i.jsxs)("div",{className:"w-full flex items-center justify-center",children:[(0,i.jsx)(J.Z,{iconSize:18,icon:"outline",shadow:"sm",onClick:()=>h(!1),children:"Huỷ"}),(0,i.jsx)(M.Z,{iconSize:16,loading:r,onClick:()=>o.submit(),shadow:"sm",className:"ml-3",icon:"outline",children:"Lưu"})]}),children:(0,i.jsx)(D.Z,{disabled:r,form:o,layout:"vertical",initialValues:{remember:!0},onFinish:p,children:(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-x-4",children:[(0,i.jsx)(D.Z.Item,{className:"w500:col-span-4",label:"T\xean kỹ năng",name:"Name",rules:L.i,children:(0,i.jsx)(q.default,{disabled:r,className:"primary-input"})}),(0,i.jsx)(X.Z,{loading:r,defaultValue:null==n?void 0:n.Audio,className:"col-span-4",form:o,name:"Audio",label:"\xc2m thanh",rules:L.l})]})})})]})},K=s(36070),W=s(43291),U=s(92088),Y=s(72833),ee=s(17857),el=e=>{let{data:l}=e,[s,t]=(0,c.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"cc-exam-item-name !mt-[-4px] text-center",children:null==l?void 0:l.Name}),(0,i.jsx)(n.Z,{className:"ant-divider-16"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 w400:grid-cols-2 gap-3",children:[(0,i.jsxs)("div",{className:"cc-xem-info-quest-container !text-[#1b73e8]",children:[(0,i.jsx)("div",{className:"font-[500]",children:"Tổng số c\xe2u"}),(0,i.jsx)(ee.ZP,{end:null==l?void 0:l.QuestionsAmount,className:"font-[600] text-[20px]"})]}),(0,i.jsxs)("div",{className:"cc-xem-info-quest-container !text-[#1b73e8]",children:[(0,i.jsx)("div",{className:"font-[500]",children:"Thời gian"}),(0,i.jsx)(ee.ZP,{end:null==l?void 0:l.Time,className:"font-[600] text-[20px]",suffix:" ph\xfat"})]})]}),(0,i.jsx)(n.Z,{className:"ant-divider-16"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 w400:grid-cols-3 gap-3",children:[(0,i.jsxs)("div",{className:"cc-xem-info-quest-container",children:[(0,i.jsx)("div",{className:"font-[500]",children:"C\xe2u dễ"}),(0,i.jsx)(ee.ZP,{end:null==l?void 0:l.QuestionsEasy,className:"font-[600] text-[20px]"})]}),(0,i.jsxs)("div",{className:"cc-xem-info-quest-container",children:[(0,i.jsx)("div",{className:"font-[500]",children:"C\xe2u thường"}),(0,i.jsx)(ee.ZP,{end:null==l?void 0:l.QuestionsNormal,className:"font-[600] text-[20px]"})]}),(0,i.jsxs)("div",{className:"cc-xem-info-quest-container",children:[(0,i.jsx)("div",{className:"font-[500]",children:"C\xe2u kh\xf3"}),(0,i.jsx)(ee.ZP,{end:null==l?void 0:l.QuestionsDifficult,className:"font-[600] text-[20px]"})]})]}),(null==l?void 0:l.Audio)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.Z,{className:"ant-divider-16"}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"text-[#1b73e8]",children:(0,i.jsx)("strong",{children:"\xc2m thanh"})}),(0,i.jsx)("div",{className:"whitespace-pre-wrap",children:(0,i.jsx)("div",{className:"mt-[8px] flex items-center",children:(0,i.jsxs)("audio",{controls:!0,controlsList:"nodownload noplaybackrate",children:[(0,i.jsx)("source",{src:null==l?void 0:l.Audio,type:"audio/mpeg"}),"Tr\xecnh duyệt của bạn kh\xf4ng hỗ trợ. Vui l\xf2ng sử dụng Chrome."]})})})]})]}),(0,i.jsx)(n.Z,{className:"ant-divider-16"}),(0,i.jsxs)("div",{onClick:()=>t(!s),className:"all-center cursor-pointer text-center no-select hover:text-[#1b73e8]",children:[(0,i.jsx)("div",{children:s?"Ẩn bớt":"Hiện th\xeam"}),(0,i.jsx)(U.x3N,{size:20,className:"ml-[4px] rotate-".concat(s?"180":0," duration-200")})]}),s&&(0,i.jsxs)("div",{className:"mt-[16px]",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"cc-exam-info-item-icon",children:(0,i.jsx)(U.f$3,{size:19})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Ng\xe0y tạo:"})," ",(0,Y.wG)(null==l?void 0:l.CreatedOn)]})]}),(0,i.jsxs)("div",{className:"flex items-center mt-[8px]",children:[(0,i.jsx)("div",{className:"cc-exam-info-item-icon",children:(0,i.jsx)(r.Bj$,{size:18})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Người tạo:"})," ",null==l?void 0:l.CreatedBy]})]}),(0,i.jsxs)("div",{className:"flex items-center mt-[8px]",children:[(0,i.jsx)("div",{className:"cc-exam-info-item-icon",children:(0,i.jsx)(r.Pll,{size:16})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Ng\xe0y cập nhật:"})," ",(0,Y.wG)(null==l?void 0:l.ModifiedOn)]})]}),(0,i.jsxs)("div",{className:"flex items-center mt-[8px]",children:[(0,i.jsx)("div",{className:"cc-exam-info-item-icon",children:(0,i.jsx)(r.dfI,{size:18})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Người cập nhật:"})," ",null==l?void 0:l.ModifiedBy]})]})]})]})},es=function(e){let{data:l,index:s,allSkills:n,onRefresh:t,onUp:a,onDown:d,showSort:o,currentSkill:u,setCurrentSkill:x,onPlayAudio:h,hideController:v}=e,f=(null==u?void 0:u.Id)==l.Id,j=(0,c.useRef)(null),[p,g]=(0,c.useState)(!1);function w(){g(!p)}async function y(e){null==e||e.stopPropagation(),f&&(x(null),await (0,I.Dc)(100));try{let e=await N.delete(null==l?void 0:l.Id);200==e.status&&(t(),k())}catch(e){(0,I.fr)("error",null==e?void 0:e.message)}}function k(){if(null==j?void 0:j.current){var e;null==j||null===(e=j.current)||void 0===e||e.close()}}let C=(0,i.jsxs)("div",{className:"cursor-pointer",children:[(0,i.jsxs)("div",{className:"cc-23-skill-menu-item",onClick:e=>{k(),e.stopPropagation(),w()},children:[(0,i.jsx)(r.DAO,{size:18,color:"#1E88E5"}),(0,i.jsx)("div",{className:"ml-[8px] font-[500]",children:"Th\xf4ng tin"})]}),(0,i.jsx)(H,{onOpen:k,onRefresh:t,isEdit:!0,defaultData:l}),(0,i.jsx)(z.Z,{title:"Xo\xe1 kỹ năng?",onConfirm:y,placement:"left",children:(0,i.jsxs)("div",{className:"cc-23-skill-menu-item",children:[(0,i.jsx)(P.Lp2,{size:20,className:"text-[#F44336] ml-[-2px]"}),(0,i.jsx)("div",{className:"ml-[8px] font-[500]",children:"Xo\xe1"})]})})]}),S=(0,m.v9)(e=>e.user.information),Z="text-[#000] bg-[#e9e9e9] hover:bg-[#dad9d9]",F=f?"text-[#fff] bg-[#1b73e8] hover:bg-[#1867cf]":Z;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{onClick:()=>!o&&x(l),className:"cc-23-skill flex-shrink-0 ".concat(o?Z:F),children:[s>0&&!!o&&(0,i.jsx)("div",{onClick:a,className:"btn-sort-left",children:(0,i.jsx)(W.dbR,{size:16,className:"rotate-90 ml-[-2px]"})}),(0,i.jsx)("div",{children:null==l?void 0:l.Name}),s<n.length-1&&!!o&&(0,i.jsx)("div",{onClick:d,className:"btn-sort-right",children:(0,i.jsx)(W.dbR,{size:16,className:"-rotate-90 mr-[-2px]"})}),!o&&(0,i.jsxs)(i.Fragment,{children:[(null==l?void 0:l.Audio)&&(0,i.jsx)("div",{onClick:e=>{e.stopPropagation(),f&&h(l)},children:(0,i.jsx)(A.Z,{place:"left",id:"au-sk-".concat(s),content:"Play audio",children:(0,i.jsx)("div",{className:"cc-23-skill-info ml-[8px] ".concat(f?"bg-[#fff]":"bg-[#0A89FF] !cursor-not-allowed"),children:(0,i.jsx)(r.QBq,{size:12,className:f?"text-[#000]":"text-[#fff]"})})})}),((0,b.B$)(S).admin||(0,b.B$)(S).manager)&&!v&&(0,i.jsx)("button",{disabled:!f,onClick:e=>e.stopPropagation(),children:(0,i.jsx)(A.Z,{place:"left",id:"tip-".concat(s),content:"Menu",children:(0,i.jsx)(K.Z,{ref:j,placement:"rightTop",title:"Menu",content:C,trigger:"click",overlayClassName:"show-arrow exam-skill",children:(0,i.jsx)("div",{className:"cc-23-skill-info ml-[8px] ".concat(f?"bg-[#fff]":"bg-[#0A89FF] !cursor-not-allowed"),children:(0,i.jsx)($.$Pu,{size:12,className:f?"text-[#000]":"text-[#fff]"})})})})})]})]}),(0,i.jsx)(_.Z,{width:500,open:p,title:"Th\xf4ng tin kỹ năng",footer:null,onCancel:w,children:(0,i.jsx)(el,{...e,onClose:w})})]})},ei=s(58064),en=s(64267),et=s(50228),ea=s(94361),ed=e=>{let{toggleQuestions:l,currentQuestion:s,setCurrentQuestion:n,onClickQuest:t}=e,{questionsInSection:a}=(0,C._O)();return(0,i.jsx)("div",{className:"exam-23-footer",children:(0,i.jsxs)("div",{className:"flex flex-col items-start",children:[(0,i.jsxs)("div",{onClick:l,className:"ex-23-f-button",children:[(0,i.jsx)(U.KEG,{className:"rotate-90 mr-[8px]"}),(0,i.jsxs)("div",{className:"font-[500]",children:["C\xe2u hỏi (",a.length,")"]})]}),(0,i.jsxs)("div",{className:"flex items-center no-select flex-wrap gap-2",children:[a.map((e,l)=>{let n=(null==s?void 0:s.IeltsQuestionId)==(null==e?void 0:e.IeltsQuestionId);return(0,i.jsx)(ea.Z,{isActivated:n,data:e,onClick:()=>t(e)},"quest-num-".concat(l))}),0==a.length&&(0,i.jsx)("div",{className:"text-[red]",children:"Chưa c\xf3 c\xe2u hỏi"})]})]})})},ec=s(35146),eo=function(){var e,l,s;let d=(0,a.useRouter)(),p=(0,m.I0)(),{curAudio:g,setCurAudio:z,loading:P,setLoading:D,getAllQuestions:q,questionsInSection:O,setQuestionsInSection:$,notSetCurrentQuest:V,setNotSetCurrentQuest:_,currentQuestion:L,setCurrentQuestion:J}=(0,C._O)(),M=(0,m.v9)(e=>e.user.information),[X,K]=(0,c.useState)(null),[W,U]=(0,c.useState)(null),[ee,el]=(0,c.useState)(!0),[ea,eo]=(0,c.useState)(!0),[er,eu]=(0,c.useState)(!0),[ex,em]=(0,c.useState)(""),[eh,ev]=(0,c.useState)(!0);async function ef(){try{var e,l;let s=await h.$.getByID(parseInt((0,b.Jx)((null==d?void 0:null===(e=d.query)||void 0===e?void 0:e.exam)+"")));200==s.status&&(K(s.data.data),p((0,y.OE)([{title:"Quản l\xfd đề",link:"/exam"},{title:null===(l=s.data.data)||void 0===l?void 0:l.Name,link:""}])))}catch(e){I.Gu.error(null==e?void 0:e.message)}finally{D(!1)}}(0,c.useEffect)(()=>{eB(),p((0,y.OE)([{title:"Quản l\xfd đề",link:"/exam"}]));let e=async e=>{p((0,y.OE)([]))};return d.events.on("routeChangeStart",e),()=>{d.events.off("routeChangeStart",e)}},[]),(0,c.useEffect)(()=>{var e;(null==d?void 0:null===(e=d.query)||void 0===e?void 0:e.exam)&&M&&((0,b.is)(M).admin||(0,b.is)(M).manager||(0,b.is)(M).teacher||(0,b.is)(M).academic||(0,b.is)(M).teachingAssistant?(ef(),eg()):em("Kh\xf4ng c\xf3 quyền truy cập"))},[d,M]);let[ej,ep]=(0,c.useState)([]);async function eg(){try{var e;let l=await N.getAll({pageSize:99,pageIndex:1,ieltsExamId:parseInt((0,b.Jx)((null==d?void 0:null===(e=d.query)||void 0===e?void 0:e.exam)+""))});if(200==l.status){if(ep(l.data.data),W){let e=l.data.data.findIndex(e=>(null==e?void 0:e.Id)==(null==W?void 0:W.Id));-1==e&&U(l.data.data[0])}else U(l.data.data[0])}else ep([]),U(null)}catch(e){I.Gu.error(null==e?void 0:e.message)}finally{D(!1)}}let[eN,ew]=(0,c.useState)([]),[eI,eb]=(0,c.useState)(null);async function ey(e,l){try{let s=await j.P.getAll({pageSize:99,pageIndex:1,ieltsSkillId:null==W?void 0:W.Id});if(200==s.status){if(ew(s.data.data),eI&&(null==W?void 0:W.Id)==(null==eI?void 0:eI.IeltsSkillId)||eb(s.data.data[0]),null==e?void 0:e.Id){let i=s.data.data.findIndex(l=>(null==l?void 0:l.Id)==(null==e?void 0:e.Id));i>-1?eb(s.data.data[i]):(null==eI?void 0:eI.Id)==(null==e?void 0:e.Id)&&(l>0?eb(s.data.data[l-1]):eb(s.data.data[0]))}}else eS(!1),ew([]),eb(null)}catch(e){I.Gu.error(null==e?void 0:e.message)}finally{D(!1)}}async function ek(){q(eI,eA)}let[eC,eS]=(0,c.useState)(!1),[eZ,eA]=(0,c.useState)(null);async function eF(){if(null==L?void 0:L.IeltsQuestionGroupId){eS(!0);try{let e=await f.r.getByID(null==L?void 0:L.IeltsQuestionGroupId);200==e.status?(p((0,k.pT)(e.data.data)),eA(e.data.data)):(eA(null),p((0,k.pT)(null)))}catch(e){I.Gu.error(null==e?void 0:e.message)}finally{eS(!1),D(!1)}}}function eE(){eu(!er)}(0,c.useEffect)(()=>{(null==L?void 0:L.IeltsQuestionGroupId)&&eF()},[null==L?void 0:L.IeltsQuestionGroupId]),(0,c.useEffect)(()=>{L&&(0,ec.Vh)(L,J)},[L]),(0,c.useEffect)(()=>{eA(null),(null==W?void 0:W.Id)&&(ey(),eR()),z(null)},[W]),(0,c.useEffect)(()=>{(null==eI?void 0:eI.Id)&&ek(),z(null)},[eI]),(0,c.useEffect)(()=>{0==eN.length&&eb(null)},[eN]),(0,c.useEffect)(()=>{O.length>0?J(O[0]):(eA(null),p((0,k.pT)(null)),J(null))},[O]);let[eQ,ez]=(0,c.useState)(0),[eP,eT]=(0,c.useState)(!0);async function eR(){ez(300),eT(!1),await (0,b.Dc)(50),eT(!0),await (0,b.Dc)(50),eB()}function eB(){let e=document.getElementById("the-fica-block");e&&ez(e.offsetHeight)}(0,c.useEffect)(()=>{eR()},[ea,ee,er,O]),(0,c.useEffect)(()=>{eZ&&(null==eZ?void 0:eZ.Id)&&eW()},[eZ]);let[eG,eD]=(0,c.useState)([]);(0,c.useEffect)(()=>{!function(){let e=[...document.getElementsByClassName("b-in")];if(e.length>0)for(let l=0;l<e.length;l++){let s=e[l].getAttribute("id");e[l].setAttribute("placeholder","(".concat(function(e){let l=O.findIndex(l=>(null==l?void 0:l.IeltsQuestionId)==e);return -1!==l?O[l]:""}(function(e){let l=null==eZ?void 0:eZ.IeltsQuestions.findIndex(l=>(null==l?void 0:l.InputId)==e);if(-1!==l){var s;return null==eZ?void 0:null===(s=eZ.IeltsQuestions[l])||void 0===s?void 0:s.Id}return""}(s)).Index,")"))}if(eq.drag){let e=[];for(let l=0;l<(null==eZ?void 0:eZ.IeltsQuestions.length);l++){let s=null==eZ?void 0:eZ.IeltsQuestions[l];for(let l=0;l<(null==s?void 0:s.IeltsAnswers.length);l++){let i=null==s?void 0:s.IeltsAnswers[l];e.push({...i,Question:{...s}})}}eD(e)}eq.drag||eD([])}()},[eZ]);let eq={typing:(null==eZ?void 0:eZ.Type)==w.j.FillInTheBlank,drag:(null==eZ?void 0:eZ.Type)==w.j.DragDrop},[eO,e$]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(null==g?void 0:g.Audio)&&I.Gu.success("Playing: ".concat(null==g?void 0:g.Name))},[g]);let[eV,e_]=(0,c.useState)(!1);async function eL(){e_(!0),localStorage.setItem("audioPlayed",null);try{var e,l,s;let i=await v.J.post({IeltsExamId:parseInt((0,b.Jx)((null==d?void 0:null===(e=d.query)||void 0===e?void 0:e.exam)+"")),ValueId:0,Type:1});(null==i?void 0:i.status)==200&&(null==(s=null===(l=i.data)||void 0===l?void 0:l.data)?void 0:s.Id)&&window.open("/take-an-exam/?exam=".concat(null==s?void 0:s.Id),"_blank")}catch(e){}finally{e_(!1)}}let[eJ,eM]=(0,c.useState)(!1);async function eX(){let e=[];for(let s=0;s<ej.length;s++){var l;e.push({Id:null===(l=ej[s])||void 0===l?void 0:l.Id,Index:s+1})}try{await N.saveIndex({Items:e})}catch(e){(0,I.fr)("error",null==e?void 0:e.message)}}let[eH,eK]=(0,c.useState)(!1);async function eW(){ev(!1),await (0,b.Dc)(200),ev(!0),await (0,b.Dc)(200),(0,ec.Vh)(L,J)}return(0,i.jsxs)("div",{className:"exam-23-container",children:[eC&&(0,i.jsx)("div",{className:"bg-[rgba(0,0,0,0.1)] z-[9999] all-center rounded-[6px] absolute top-0 left-0 w-full h-full",children:(0,i.jsx)("div",{className:"text-[#000] font-[500]",children:"Đang xử l\xfd..."})}),(0,i.jsxs)("div",{className:"cc-exam-detail z-10 !w-full bg-[#fff]",children:[(0,i.jsxs)("div",{className:"exam-23-header",children:[(0,i.jsx)(A.Z,{id:"fucking-home",content:"Trang chủ",place:"right",children:(0,i.jsxs)("a",{href:"/",children:[(0,i.jsx)("div",{className:"pl-[16px] hidden w600:block",children:(0,i.jsx)("img",{src:"/shot-logo.png",className:"w-auto h-[46px]"})}),(0,i.jsx)("div",{className:"pl-[16px] block w600:hidden",children:(0,i.jsx)("img",{src:"/mini-logo.png",className:"w-auto h-[36px]"})})]})}),!P&&(0,i.jsxs)("div",{className:"ml-[16px] flex-1 pr-2",children:[(0,i.jsx)("div",{className:"cc-text-16-700 in-1-line",children:null==X?void 0:X.Name}),(0,i.jsxs)("div",{className:"cc-text-14-500-blue flex items-center mt-[2px]",children:[(0,i.jsxs)("div",{className:"all-center inline-flex cc-choice-point !ml-0",children:[null==X?void 0:X.QuestionsAmount," c\xe2u"]}),(0,i.jsxs)("div",{className:"cc-choice-correct-number",children:[null==X?void 0:X.Point," điểm"]}),(0,i.jsx)("div",{className:"cc-choice-time",children:(0,Y.rJ)(null==X?void 0:X.Time,"minutes")})]})]}),(0,i.jsx)("div",{className:"mr-[8px] flex-shrink-0",children:!P&&(!!(0,b.is)(M).admin||!!(0,b.is)(M).teacher||!!(0,b.is)(M).academic||!!(0,b.is)(M).manager)&&(0,i.jsxs)(Z.Z,{loading:eV,onClick:eL,background:"blue",type:"button",children:[!eV&&(0,i.jsx)(u.HBT,{size:20}),(0,i.jsx)("div",{className:"ml-2 hidden w500:inline",children:"L\xe0m thử"})]})}),!P&&(0,i.jsx)(en.Z,{showSkills:ee,showSections:ea,showQuestions:er,setShowSkills:el,setShowQuestions:eu,setShowSections:eo})]}),(ee||ea)&&(0,i.jsx)("div",{className:"mt-[-16px]",children:(0,i.jsx)(n.Z,{className:"ant-divider-16"})}),(0,i.jsxs)("div",{className:"exam-23-skills",children:[P&&(0,i.jsxs)("div",{className:"flex items-center mb-3",children:[(0,i.jsx)(t.Z,{active:!0,paragraph:!1,style:{width:"100px"}}),(0,i.jsx)(t.Z,{active:!0,paragraph:!1,style:{width:"50px",marginLeft:8,marginRight:8}}),(0,i.jsx)(t.Z,{active:!0,paragraph:!1,style:{width:"70px"}})]}),ee&&(0,i.jsxs)("div",{className:"flex items-center pb-[16px] scroll-h",children:[!P&&(0,i.jsx)(H,{onRefresh:eg}),!P&&ej.length>1&&(0,i.jsxs)(i.Fragment,{children:[((0,b.B$)(M).admin||(0,b.B$)(M).manager)&&!eJ&&(0,i.jsxs)("div",{onClick:()=>eM(!0),className:"cc-23-skill flex-shrink-0 bg-[#FFBA0A] hover:bg-[#e7ab11] focus:bg-[#d19b10] text-[#000]",children:[(0,i.jsx)(r.roE,{size:16,className:"ml-[-2px]"}),(0,i.jsx)("div",{className:"ml-[4px]",children:"Sắp xếp"})]}),eJ&&(0,i.jsxs)("div",{onClick:()=>{eX(),eM(!1)},className:"cc-23-skill bg-[#0A89FF] hover:bg-[#157ddd] focus:bg-[#1576cf] text-[#fff]",children:[(0,i.jsx)(x.xpG,{size:16,className:"ml-[-2px]"}),(0,i.jsx)("div",{className:"ml-[4px]",children:"Lưu"})]})]}),ej.map((e,l)=>(0,i.jsx)(es,{index:l,allSkills:ej,onUp:()=>(function(e,l){let s=e.indexOf(l);-1!==s&&0!==s&&([e[s-1],e[s]]=[e[s],e[s-1]]),ep([...e])})(ej,e),onDown:()=>(function(e,l){let s=e.indexOf(l);-1!==s&&s!==e.length-1&&([e[s+1],e[s]]=[e[s],e[s+1]]),ep([...e])})(ej,e),onPlayAudio:e=>z(e||""),data:e,showSort:eJ,currentSkill:W,setCurrentSkill:U,onRefresh:eg}))]})]}),ee&&!!W&&ea&&(0,i.jsx)("div",{className:"mt-[-16px]",children:(0,i.jsx)(n.Z,{className:"ant-divider-16"})}),(0,i.jsxs)("div",{className:"exam-23-sections",children:[P&&(0,i.jsxs)("div",{className:"flex items-center my-3",children:[(0,i.jsx)(t.Z,{active:!0,paragraph:!1,style:{width:"100px"}}),(0,i.jsx)(t.Z,{active:!0,paragraph:!1,style:{width:"50px",marginLeft:8,marginRight:8}}),(0,i.jsx)(t.Z,{active:!0,paragraph:!1,style:{width:"70px"}})]}),ea&&!!W&&(0,i.jsxs)("div",{className:"flex items-center pb-[16px] scroll-h",children:[(0,i.jsx)(ei.Z,{onRefresh:e=>ey(e||null),skill:W}),eN.map((e,l)=>(0,i.jsx)(G.Z,{index:l,data:e,currentSection:eI,setCurrentSection:eb,onRefresh:ey,onPlayAudio:e=>z(e||""),createGroupComponent:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(Q.Z,{section:eI,onRefresh:()=>{eF(),ek(),ef()}})})},"sec-e".concat(l)))]})]})]}),(0,i.jsxs)("div",{className:"flex-1 flex relative",children:[(0,i.jsx)(E.Z,{showAudioControl:eO,setShowAudioControl:e$,curSection:eI,curSkill:W}),(0,i.jsxs)(i.Fragment,{children:[eP&&(0,i.jsx)("div",{id:"the-fica-block",className:"w-[0.5px] bg-transparent"}),!!(null==eI?void 0:eI.ReadingPassage)&&eH&&(0,i.jsxs)("div",{className:"flex-1 p-[16px] bg-[#fff] scrollable block w750:hidden",style:{height:eQ},children:[eH&&(0,i.jsx)("div",{className:"flex justify-start",children:(0,i.jsx)("div",{onClick:()=>eK(!1),className:"block w750:hidden mb-[16px] bg-[#0A89FF] px-[8px] text-[#fff] rounded-[4px] font-[600] py-[4px]",children:"Xem c\xe2u hỏi"})}),(0,S.Z)((null==eI?void 0:eI.ReadingPassage)||"")]}),!!(null==eI?void 0:eI.ReadingPassage)&&(0,i.jsx)("div",{className:"flex-1 p-[16px] bg-[#fff] scrollable hidden w750:block",style:{height:eQ},children:(0,S.Z)((null==eI?void 0:eI.ReadingPassage)||"")}),eh&&(0,i.jsx)(i.Fragment,{children:!eH&&(0,i.jsxs)("div",{className:"flex-1 p-[16px] scrollable max-w-[1200px] mx-auto block w750:hidden",style:{height:eQ},children:[((0,b.B$)(M).admin||(0,b.B$)(M).manager)&&O.length>0&&(null==eZ?void 0:eZ.Id)&&(0,i.jsx)(T,{currentSection:eI,curGroup:eZ,getQuestions:ek,onRefresh:()=>{eF(),ek()}},"gr-ctr-".concat(null==eZ?void 0:eZ.Id)),!!window&&(null===(e=window)||void 0===e?void 0:e.innerWidth)<750&&(0,i.jsx)(i.Fragment,{children:eq.drag&&(0,i.jsx)(R.Z,{answers:eG})}),!eH&&!!(null==eI?void 0:eI.ReadingPassage)&&(0,i.jsx)("div",{className:"flex justify-start",children:(0,i.jsx)("div",{onClick:()=>eK(!0),className:"block w750:hidden mb-[16px] bg-[#0A89FF] px-[8px] text-[#fff] rounded-[4px] font-[600] py-[4px]",children:"Xem b\xe0i đọc"})}),!!window&&(null===(l=window)||void 0===l?void 0:l.innerWidth)<750&&(0,i.jsx)(B.Z,{is:eq,curGroup:eZ}),!!window&&(null===(s=window)||void 0===s?void 0:s.innerWidth)<750&&(0,i.jsx)(F.Z,{data:eZ}),(null==g?void 0:g.Audio)&&(0,i.jsx)("div",{className:"h-[200px]"}),(0,i.jsx)("div",{className:"h-[100px]"})]})}),(0,i.jsxs)("div",{id:"scroll-tag",className:"exam-detail-right",style:{height:eQ},children:[((0,b.B$)(M).admin||(0,b.B$)(M).manager)&&O.length>0&&(null==eZ?void 0:eZ.Id)&&(0,i.jsx)(T,{currentSection:eI,curGroup:eZ,getQuestions:ek,onRefresh:()=>{eF(),ek(),ef()}},"gr-ctr-".concat(null==eZ?void 0:eZ.Id)),eq.drag&&(0,i.jsx)(R.Z,{answers:eG}),(0,i.jsx)(B.Z,{is:eq,curGroup:eZ}),(0,i.jsx)(F.Z,{data:eZ}),(null==g?void 0:g.Audio)&&(0,i.jsx)("div",{className:"h-[200px]"}),(0,i.jsx)("div",{className:"h-[100px]"})]})]})]}),er&&(0,i.jsx)(ed,{currentQuestion:L,setCurrentQuestion:J,toggleQuestions:eE,onClickQuest:e=>(0,ec.Vh)(e,J)},"exam-detail-footer"),!er&&(0,i.jsxs)("div",{onClick:eE,className:"cc-23-btn-quests all-center",children:[(0,i.jsx)(o.m_d,{size:20,className:"mt-[2px]"}),(0,i.jsxs)("div",{children:["C\xe2u hỏi (",O.length,")"]})]}),(0,i.jsx)(et.Z,{content:ex})]})}}}]);