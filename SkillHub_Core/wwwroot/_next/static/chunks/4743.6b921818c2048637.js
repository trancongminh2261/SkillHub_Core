"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4743],{46556:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(87462),o=t(97685),a=t(73899),i=t(93967),l=t.n(i),c=t(54043),s=t(28778),u=t(67294),d=t(93565),f=t(36070),p=t(26901),v=t(51095),g=t(61939),m=t(81094),h=t(91130),y=t(37681),w=t(54252),b=function(e){var n=e.prefixCls,t=e.okButtonProps,o=e.cancelButtonProps,a=e.title,i=e.cancelText,l=e.okText,c=e.okType,s=e.icon,f=e.showCancel,p=void 0===f||f,b=e.close,x=e.onConfirm,O=e.onCancel,C=u.useContext(d.E_).getPrefixCls;return u.createElement(h.Z,{componentName:"Popconfirm",defaultLocale:y.Z.Popconfirm},function(e){return u.createElement("div",{className:"".concat(n,"-inner-content")},u.createElement("div",{className:"".concat(n,"-message")},s&&u.createElement("span",{className:"".concat(n,"-message-icon")},s),u.createElement("div",{className:"".concat(n,"-message-title")},(0,w.Z)(a))),u.createElement("div",{className:"".concat(n,"-buttons")},p&&u.createElement(v.Z,(0,r.Z)({onClick:O,size:"small"},o),null!=i?i:e.cancelText),u.createElement(m.Z,{buttonProps:(0,r.Z)((0,r.Z)({size:"small"},(0,g.n)(c)),t),actionFn:x,close:b,prefixCls:C("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!=l?l:e.okText)))})},x=void 0,O=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>n.indexOf(r)&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>n.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]]);return t},C=u.forwardRef(function(e,n){var t=e.prefixCls,i=e.placement,v=e.trigger,g=e.okType,m=e.icon,h=void 0===m?u.createElement(a.Z,null):m,y=e.children,w=e.overlayClassName,C=e.onOpenChange,j=e.onVisibleChange,k=O(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),E=u.useContext(d.E_).getPrefixCls,U=(0,c.Z)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),M=(0,o.Z)(U,2),Z=M[0],P=M[1],T=function(e,n){P(e,!0),null==j||j(e,n),null==C||C(e,n)},N=function(e){e.keyCode===s.Z.ESC&&Z&&T(!1,e)},S=E("popover",t),I=E("popconfirm",t),D=l()(I,w);return u.createElement(f.Z,(0,r.Z)({},k,{trigger:void 0===v?"click":v,prefixCls:S,placement:void 0===i?"top":i,onOpenChange:function(n){var t=e.disabled;void 0!==t&&t||T(n)},open:Z,ref:n,overlayClassName:D,_overlay:u.createElement(b,(0,r.Z)({okType:void 0===g?"primary":g,icon:h},e,{prefixCls:S,close:function(e){T(!1,e)},onConfirm:function(n){var t;return null===(t=e.onConfirm)||void 0===t?void 0:t.call(x,n)},onCancel:function(n){var t;T(!1,n),null===(t=e.onCancel)||void 0===t||t.call(x,n)}}))}),(0,p.Tm)(y,{onKeyDown:function(e){var n,t;u.isValidElement(y)&&(null===(t=null==y?void 0:(n=y.props).onKeyDown)||void 0===t||t.call(n,e)),N(e)}}))})},79930:function(e,n,t){t.d(n,{X:function(){return o}});var r=t(59178);let o={uploadImage(e){let n=new FormData;return n.append("file",e),r.e.post("".concat("/api/Base","/Upload"),n,{})}}},64743:function(e,n,t){t.r(n);var r=t(85893),o=t(67294),a=t(27104),i=t(89865),l=t(77024),c=t(69361),s=t(46556),u=t(51095),d=t(32399),f=t(79930);let p=e=>new Promise(n=>setTimeout(n,e)),v="",g=0;n.default=e=>{let{setLinkRecord:n,linkRecord:t,isHideBar:m,onDelete:h,disabled:y,isRecord:w,setIsRecord:b}=e,[x,O]=(0,o.useState)(!1),[C,j]=(0,o.useState)("");(0,o.useEffect)(()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then(e=>{j(new MediaRecorder(e))}).catch(function(e){console.log("Kh\xf4ng thể lấy được quyền ghi \xe2m: "+e)}):console.log("Tr\xecnh duyệt của bạn kh\xf4ng hỗ trợ ghi \xe2m!")},[]);let[k,E]=(0,o.useState)("00:00:00"),U=()=>{var e,n,t;g+=1,E((n=Math.floor(parseInt(e=parseInt(g,10).toString())/3600).toString(),t=Math.floor((parseInt(e)-3600*parseInt(n))/60).toString(),e=(parseInt(e)-3600*parseInt(n)-60*parseInt(t)).toString(),10>parseInt(n)&&(n="0"+n),10>parseInt(t)&&(t="0"+t),10>parseInt(e)&&(e="0"+e),n+":"+t+":"+e))},M=async e=>{var t,r;clearInterval(v),g=0,E("00:00:00");let o=(t=e.blob,r="record-audio.mp3",t.lastModifiedDate=new Date,t.name=r,new File([t],r,{lastModified:new Date().getTime(),type:t.type}));O(!0),b(!1);try{let e=await f.X.uploadImage(o);200==e.status&&n(e.data.data)}catch(e){}finally{O(!1)}};async function Z(){try{d.ZP.stop(e=>{console.log("event: ",e),M(e)})}catch(e){}}async function P(){O(!0),await p(0),O(!1)}return(0,o.useEffect)(()=>{P()},[t]),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{id:"recoder-".concat(e.id),className:"wrapper-recoder-audio",children:[!t&&!w&&!y&&(0,r.jsx)(l.Z,{title:t?"Ghi lại":"Bắt đầu ghi \xe2m",children:(0,r.jsx)("button",{className:"btn-record start mt-2",onClick:function(){C&&(d.ZP.start(),b(!0),v=setInterval(U,1e3))},children:(0,r.jsx)(a.Z,{})})}),w&&!y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{title:"Lưu lại",children:(0,r.jsx)("button",{className:"btn-record save mt-3",onClick:Z,children:(0,r.jsx)(i.Z,{})})}),(0,r.jsx)("div",{className:"mt-3",style:{fontSize:16},children:k})]}),x?(0,r.jsx)(c.Z,{className:"mt-3"}):!w&&!!t&&(0,r.jsxs)(r.Fragment,{children:[!!h&&!y&&(0,r.jsx)(l.Z,{title:"Xo\xe1 \xe2m thanh",children:(0,r.jsx)(s.Z,{okText:"X\xf3a",cancelText:"Hủy",onConfirm:()=>!!h&&h(),title:"Bạn muốn x\xf3a bản ghi n\xe0y?",children:(0,r.jsx)(u.Z,{className:"btn-icon mr-2"})})}),(0,r.jsx)("audio",{onPlay:()=>e.setPlaying(!0),onPause:()=>e.setPlaying(!1),onEnded:()=>e.setPlaying(!1),id:"audio-".concat(e.id),className:"mt-3 custom-audio-recorder-netxt",controls:!0,children:(0,r.jsx)("source",{src:t,type:"audio/mpeg"})})]})]})})}},32399:function(e,n,t){t.d(n,{VO:function(){return o}});var r=function(){var e=[],n=[],t=null,r=!1,o=0,a=null,i=null,l=null,c=null,s={};function u(e,n){for(var t=new Float32Array(n),r=0,o=e.length,a=0;a<o;a++){var i=e[a];t.set(i,r),r+=i.length}return t}function d(e,n,t){for(var r=t.length,o=0;o<r;o++)e.setUint8(n+o,t.charCodeAt(o))}function f(s){console.log("sampleRate: ",l=(c=new(window.AudioContext||window.webkitAudioContext)).sampleRate),a=c.createGain(),(i=c.createMediaStreamSource(s)).connect(a),(t=c.createScriptProcessor(8192,2,2)).onaudioprocess=function(t){if(r){var a=t.inputBuffer.getChannelData(0),i=t.inputBuffer.getChannelData(1);e.push(new Float32Array(a)),n.push(new Float32Array(i)),o+=8192}},a.connect(t),t.connect(c.destination)}return{start:function(){var t,a,i,l;(null===(a=window)||void 0===a?void 0:null===(t=a.navigator)||void 0===t?void 0:t.getUserMedia)||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia),navigator&&(null===(i=navigator)||void 0===i?void 0:i.getUserMedia)?navigator.getUserMedia({audio:!0},f,function(e){alert("An error occurred while trying to access the microphone. Please ensure the browser has permission to access the microphone or check your microphone settings.")}):(null===(l=navigator)||void 0===l?void 0:l.mediaDevices)?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(e=>f(e)).catch(e=>console.error("".concat(e.name,": ").concat(e.message))):alert("Audio not supported in this browser."),r=!0,e.length=n.length=0,o=0,s.innerHTML="Recording now..."},stop:function(c){r=!1,s.innerHTML="Building wav file...";var f,p=function(e,n){for(var t=e.length+n.length,r=new Float32Array(t),o=0,a=0;a<t;)r[a++]=e[o],r[a++]=n[o],o++;return r}(u(e,o),u(n,o)),v=new DataView(new ArrayBuffer(44+2*p.length));d(v,0,"RIFF"),v.setUint32(4,44+2*p.length,!0),d(v,8,"WAVE"),d(v,12,"fmt "),v.setUint32(16,16,!0),v.setUint16(20,1,!0),v.setUint16(22,2,!0),v.setUint32(24,l,!0),v.setUint32(28,4*l,!0),v.setUint16(32,4,!0),v.setUint16(34,16,!0),d(v,36,"data"),v.setUint32(40,2*p.length,!0);for(var g=p.length,m=44,h=0;h<g;h++)v.setInt16(m,32767*p[h],!0),m+=2;var y=new Blob([v],{type:"audio/wav"});s.innerHTML="Handing off the file now...";var w=(window.URL||window.webkitURL).createObjectURL(y);r=!1,null==i||null===(f=i.mediaStream)||void 0===f||f.getAudioTracks().forEach(function(e){e.stop()}),t.disconnect(0),i.disconnect(0),a.disconnect(0),c({url:w,blob:y,power:"https://ischau.org",timeStamp:new Date().getTime()})}}}();function o(){return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,new Promise((e,n)=>{if(navigator.getUserMedia){let t=[];navigator.getUserMedia({audio:!0},function(r){r.getTracks().forEach(e=>e.stop()),navigator.mediaDevices.enumerateDevices().then(function(n){n.forEach(function(e){"audioinput"===e.kind&&(console.log("Microphone: "+e.label),t.push(e.label))}),e(t)}).catch(function(e){console.log("An error occurred: "+e),n(e)})},function(e){console.log("The following error occurred: "+e.name),n(e)})}else console.log("getUserMedia not supported on your browser!"),n("getUserMedia not supported")})}n.ZP=r},27104:function(e,n,t){var r=t(67294),o=t(45697),a=t.n(o);function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var l=(0,r.forwardRef)(function(e,n){var t=e.color,o=e.size,a=void 0===o?24:o,l=function(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],!(n.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return r.createElement("svg",i({ref:n,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),r.createElement("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),r.createElement("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),r.createElement("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),r.createElement("line",{x1:"8",y1:"23",x2:"16",y2:"23"}))});l.propTypes={color:a().string,size:a().oneOfType([a().string,a().number])},l.displayName="Mic",n.Z=l},89865:function(e,n,t){var r=t(67294),o=t(45697),a=t.n(o);function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var l=(0,r.forwardRef)(function(e,n){var t=e.color,o=e.size,a=void 0===o?24:o,l=function(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],!(n.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return r.createElement("svg",i({ref:n,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),r.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}))});l.propTypes={color:a().string,size:a().oneOfType([a().string,a().number])},l.displayName="Square",n.Z=l}}]);